# 🧪 本地测试指南

## 🚀 启动开发服务器

```bash
cd C:\Users\30449\what-to-eat-today
npm run dev
```

启动后，浏览器会打开 `http://localhost:5173` 或 `http://localhost:5174`（如果 5173 被占用）

## ✅ 测试 checklist

### 1. 基础功能测试

- [ ] **页面加载**
  - 打开浏览器，访问开发服务器地址
  - 检查页面是否正常显示
  - 检查标题、副标题是否显示

- [ ] **地图服务选择器**
  - 检查是否显示三个选项：高德地图、OpenStreetMap、Google Maps
  - 点击切换不同的地图服务
  - 检查选择状态是否正确

### 2. 高德地图测试（中国用户）

- [ ] **自动定位**
  - 选择"高德地图"
  - 点击"点击获取定位"按钮
  - 允许浏览器位置权限
  - 检查是否显示当前位置

- [ ] **手动输入位置**
  - 切换到"手动输入"模式
  - 输入一个中国城市（如：北京、上海、深圳）
  - 检查是否显示搜索结果
  - 选择一个结果，检查位置是否设置成功

- [ ] **搜索餐厅**
  - 选择想吃的类型（火锅、快餐、日料等）
  - 调整搜索范围（500m - 5km）
  - 点击"帮我选"按钮
  - 检查是否显示抽选动画
  - 检查是否显示餐厅结果
  - 检查餐厅信息（名称、评分、距离、地址）是否正确

- [ ] **导航功能**
  - 在餐厅结果中点击"带我导航"
  - 检查是否打开高德地图网页版导航

### 3. OpenStreetMap 测试（海外用户）

- [ ] **选择 OpenStreetMap 服务**
  - 在地图服务选择器中选择"OpenStreetMap"
  - 检查是否显示绿色提示："✓ 完全免费，无需配置"

- [ ] **手动输入位置**
  - 切换到"手动输入"模式
  - 输入一个海外城市（如：New York、London、Tokyo）
  - 检查是否显示搜索结果（需要等待几秒）
  - 选择一个结果，检查位置是否设置成功

- [ ] **搜索餐厅**
  - 选择想吃的类型
  - 调整搜索范围
  - 点击"帮我选"按钮
  - 检查是否显示抽选动画
  - 检查是否显示餐厅结果（OpenStreetMap 数据可能较少）

**注意**：OpenStreetMap 数据依赖于社区维护，某些地区数据可能不完整。

### 4. 移动端测试

- [ ] **在手机浏览器测试**
  - 在手机浏览器访问开发服务器地址
  - 需要确保手机和电脑在同一 WiFi 网络
  - 开发服务器会显示 Network 地址（如：`http://192.168.x.x:5173`）
  - 在手机浏览器输入该地址
  - 测试触摸操作是否流畅
  - 测试按钮大小是否合适

### 5. 边界情况测试

- [ ] **无网络连接**
  - 断开网络，测试错误提示是否友好

- [ ] **位置权限拒绝**
  - 拒绝浏览器位置权限
  - 检查错误提示是否显示

- [ ] **没有选中任何食物类型**
  - 不选择任何食物类型，点击"帮我选"
  - 检查是否有提示

- [ ] **没有设置位置**
  - 不设置位置，点击"帮我选"
  - 检查是否有提示

- [ ] **搜索无结果**
  - 选择一个偏僻的位置
  - 选择特定食物类型
  - 点击"帮我选"
  - 检查是否显示"美食荒漠"提示

## 🔍 调试技巧

### 查看浏览器控制台

1. 按 `F12` 打开开发者工具
2. 切换到 "Console" 标签
3. 查看是否有错误信息（红色）
4. 查看日志信息（蓝色/灰色）

### 常见问题排查

**问题：页面空白**
- 检查控制台是否有错误
- 检查网络请求是否失败
- 尝试刷新页面（Ctrl+R 或 Cmd+R）

**问题：OpenStreetMap 搜索失败**
- 检查控制台错误信息
- 确认开发服务器正在运行
- 检查 Vite 代理是否配置正确

**问题：高德地图搜索失败**
- 检查网络连接
- 检查 API Key 是否正确（已内置）
- 查看控制台错误信息

**问题：定位失败**
- 检查浏览器位置权限
- 确认使用 HTTPS 或 localhost（HTTP 在部分浏览器需要 HTTPS）
- 检查设备是否支持定位

## 📊 测试数据对比

### 高德地图（中国地区）
- ✅ 数据丰富，覆盖全面
- ✅ 包含评分、电话等信息
- ✅ 搜索速度快
- ⚠️ 仅适用于中国内地

### OpenStreetMap（全球）
- ✅ 全球覆盖
- ✅ 完全免费
- ⚠️ 数据详细程度不如商业API
- ⚠️ 某些地区数据可能不完整
- ⚠️ 不提供评分信息

## 🎯 测试建议

1. **先测试高德地图**（如果在中国）
   - 功能最完整
   - 数据最准确
   - 验证核心功能是否正常

2. **再测试 OpenStreetMap**（如果有海外需求）
   - 验证代理是否工作
   - 检查数据质量是否满足需求
   - 测试不同地区的搜索

3. **移动端测试**
   - 使用手机浏览器访问
   - 测试触摸操作
   - 检查响应式布局

4. **性能测试**
   - 检查页面加载速度
   - 检查动画是否流畅
   - 检查搜索响应时间

## 📝 测试记录表

建议记录测试结果：

| 功能 | 高德地图 | OpenStreetMap | 备注 |
|------|---------|---------------|------|
| 自动定位 | ✅/❌ | ✅/❌ | |
| 手动搜索 | ✅/❌ | ✅/❌ | |
| 餐厅搜索 | ✅/❌ | ✅/❌ | |
| 导航功能 | ✅/❌ | ✅/❌ | |
| 移动端 | ✅/❌ | ✅/❌ | |

## 🚀 测试完成后

如果测试通过，您可以：
1. 查看 `DEPLOY_GUIDE.md` 了解部署步骤
2. 查看 `快速部署.md` 获取最简单的部署方法
3. 决定是否部署到 Vercel

如果测试有问题：
1. 查看浏览器控制台错误信息
2. 参考本指南的"调试技巧"部分
3. 检查配置文件是否正确

---

**提示**：本地测试通过后，部署到 Vercel 通常也不会有问题，因为代码是相同的。
