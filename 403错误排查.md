# 🔍 403 Forbidden 错误排查

## ⚠️ 问题

请求返回 403 Forbidden，这通常意味着：

1. **Nominatim API 拒绝请求**
   - User-Agent 问题
   - 请求频率过高
   - API 使用限制

2. **Vercel Functions 权限问题**
   - 函数配置问题
   - 部署问题

## 🔍 诊断步骤

### 步骤 1：查看 Vercel Functions 日志（最重要）

1. **访问 Vercel Dashboard**
   - https://vercel.com/dashboard
   - 找到 "what-to-eat-today" 项目

2. **查看 Functions**
   - 点击 "Functions" 标签
   - 点击 `api/nominatim` 函数

3. **查看 Logs**
   - 点击 "Logs" 标签
   - 查看最近的日志
   - 查找错误信息
   - **这是最关键的信息！**

4. **复制错误信息**
   - 复制完整的错误日志
   - 这可以帮助诊断问题

### 步骤 2：检查 Nominatim API 限制

Nominatim API 有使用限制：

1. **请求频率限制**
   - 建议每秒不超过 1 次请求
   - 可能触发了频率限制

2. **User-Agent 要求**
   - 必须设置有效的 User-Agent
   - 不能使用默认的 User-Agent

3. **使用政策**
   - 不能用于商业用途
   - 必须遵守使用条款

## 💡 可能的解决方案

### 方案 1：检查 User-Agent

确保 User-Agent 设置正确（代码中应该已经设置了）。

### 方案 2：添加请求延迟

如果请求频率过高，可以添加延迟。

### 方案 3：使用其他 Nominatim 实例

如果官方实例限制太严格，可以使用其他公共实例。

## 🔧 下一步

**最重要的是查看 Vercel Functions 日志！**

日志会显示：
- 是否是 Nominatim API 返回的 403
- 具体的错误信息
- 请求的详细信息

---

**请先查看 Vercel Functions 日志，告诉我具体的错误信息，这样我可以更准确地解决问题！**
