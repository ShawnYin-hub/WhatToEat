# 功能特性说明

## ✨ 新增功能

### 1. 老虎机滚动动画
- **位置**: 点击"帮我选"按钮后，在配置卡片上方显示
- **效果**: 
  - 快速滚动显示不同的餐厅名字
  - 持续 1.5 秒
  - 使用 Framer Motion 实现流畅的滚动动画
  - 每次滚动显示不同的餐厅，增加悬念感
- **目的**: 消除选择焦虑，增加趣味性

### 2. 毛玻璃效果结果卡片
- **设计**: Glassmorphism 风格
  - 半透明背景 (`bg-white/80`)
  - 背景模糊效果 (`backdrop-blur-xl`)
  - 精致的边框和阴影
  - 渐变装饰元素
- **显示内容**:
  - 餐厅名称（大标题）
  - 高德星级评分（5星显示）
  - 距离（自动转换为 km 或 m）
  - 具体地址（完整地址信息）

### 3. 带我导航按钮
- **功能**: 点击后直接跳转到高德地图网页版导航
- **导航模式**: 驾车导航（mode=car）
- **链接格式**: `https://uri.amap.com/navigation?to=lng,lat,name&mode=car&src=webapp`

### 4. 换一家按钮
- **功能**: 点击后重新触发老虎机滚动动画
- **逻辑**: 
  - 使用已缓存的餐厅列表（无需重新请求 API）
  - 立即关闭当前结果弹窗
  - 重新开始 1.5 秒的老虎机动画
  - 随机选择新的餐厅

## 🎨 动画细节

### 老虎机动画
- 初始状态：从下方滑入 (`y: 50`)
- 滚动过程：快速切换，每次约 30-50ms
- 最终状态：平滑停止并显示选中结果
- 渐变遮罩：上下渐变遮罩增强滚动视觉效果

### 结果弹窗动画
- 进入动画：缩放 + 位移动画（spring 效果）
- 图标动画：旋转进入（-180° → 0°）
- 内容动画：依次淡入（stagger 延迟）

## 🔧 技术实现

### 组件结构
```
SelectButton
├── SlotMachine (老虎机组件)
└── ResultModal (结果弹窗)
```

### 状态管理
- `isLoading`: API 请求状态
- `isSpinning`: 老虎机滚动状态
- `allRestaurants`: 缓存所有餐厅列表
- `selectedRestaurant`: 当前选中的餐厅
- `slotKey`: 用于强制重新渲染老虎机

### API 数据
- `rating`: 从 `biz_ext.rating` 或 `rating` 字段获取
- `distance`: 距离（米）
- `address`: 完整地址
- `location`: 经纬度坐标

## 📱 用户体验流程

1. 用户点击"帮我选"
2. 显示"正在搜索..."加载状态
3. API 请求完成后，显示老虎机动画
4. 老虎机快速滚动 1.5 秒
5. 停止并显示选中的餐厅
6. 弹出毛玻璃效果的结果卡片
7. 用户可以选择：
   - 点击"换一家"：重新触发老虎机
   - 点击"带我导航"：打开高德地图导航
   - 点击关闭：返回主界面
