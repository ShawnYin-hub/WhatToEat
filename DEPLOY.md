# éƒ¨ç½²è¯´æ˜ - Cloudflare Pages

## ğŸ“¦ æ„å»ºæ–‡ä»¶ä½ç½®

ç”Ÿäº§ç‰ˆæœ¬å·²æ„å»ºå®Œæˆï¼Œæ–‡ä»¶ä½äºï¼š

```
C:\Users\30449\what-to-eat-today\dist
```

è¿™ä¸ª `dist` æ–‡ä»¶å¤¹åŒ…å«äº†æ‰€æœ‰éœ€è¦éƒ¨ç½²çš„é™æ€æ–‡ä»¶ã€‚

## ğŸš€ Cloudflare Pages éƒ¨ç½²æ­¥éª¤

### æ–¹æ³•ä¸€ï¼šé€šè¿‡ Cloudflare Dashboard ä¸Šä¼ ï¼ˆæ¨èï¼‰

1. **ç™»å½• Cloudflare**
   - è®¿é—® [Cloudflare Dashboard](https://dash.cloudflare.com/)
   - ç™»å½•æ‚¨çš„è´¦æˆ·

2. **åˆ›å»ºæ–°é¡¹ç›®**
   - ç‚¹å‡»å·¦ä¾§èœå• "Workers & Pages"
   - ç‚¹å‡» "Create application"
   - é€‰æ‹© "Pages" æ ‡ç­¾
   - ç‚¹å‡» "Upload assets"

3. **ä¸Šä¼  dist æ–‡ä»¶å¤¹**
   - ç›´æ¥æ‹–æ‹½ `dist` æ–‡ä»¶å¤¹åˆ°ä¸Šä¼ åŒºåŸŸ
   - æˆ–è€…ç‚¹å‡»é€‰æ‹©æ–‡ä»¶å¤¹ï¼Œé€‰æ‹© `dist` ç›®å½•

4. **é…ç½®é¡¹ç›®**
   - Project name: `what-to-eat-today`ï¼ˆæˆ–æ‚¨å–œæ¬¢çš„åå­—ï¼‰
   - Production branch: `main`ï¼ˆå¯ä»¥ä»»æ„ï¼‰
   - Framework preset: `None` æˆ– `React`ï¼ˆå¯é€‰ï¼‰

5. **ç¯å¢ƒå˜é‡é…ç½®**ï¼ˆé‡è¦ï¼ï¼‰
   - éƒ¨ç½²åï¼Œè¿›å…¥é¡¹ç›®è®¾ç½®
   - ç‚¹å‡» "Settings" â†’ "Environment variables"
   - æ·»åŠ ç¯å¢ƒå˜é‡ï¼š
     - Variable name: `VITE_AMAP_API_KEY`
     - Value: `59db828f842e5c5666d401e86911ce1d`
     - Environment: `Production`

6. **éƒ¨ç½²**
   - ç‚¹å‡» "Deploy site"
   - ç­‰å¾…å‡ åˆ†é’Ÿå®Œæˆéƒ¨ç½²
   - å®Œæˆåä¼šè·å¾—ä¸€ä¸ª `*.pages.dev` çš„å…è´¹åŸŸå

### æ–¹æ³•äºŒï¼šé€šè¿‡ Git è¿æ¥ï¼ˆè‡ªåŠ¨éƒ¨ç½²ï¼‰

å¦‚æœéœ€è¦è‡ªåŠ¨éƒ¨ç½²ï¼Œå¯ä»¥ï¼š

1. **å°†é¡¹ç›®æ¨é€åˆ° GitHub**
   ```bash
   git init
   git add .
   git commit -m "Initial commit"
   git remote add origin <your-github-repo-url>
   git push -u origin main
   ```

2. **åœ¨ Cloudflare Pages ä¸­è¿æ¥ Git**
   - é€‰æ‹© "Connect to Git"
   - æˆæƒ GitHub
   - é€‰æ‹©ä»“åº“
   - Build settings:
     - Build command: `npm run build`
     - Build output directory: `dist`
     - Root directory: `/`ï¼ˆé¡¹ç›®æ ¹ç›®å½•ï¼‰

3. **ç¯å¢ƒå˜é‡**
   - åœ¨é¡¹ç›®è®¾ç½®ä¸­æ·»åŠ ç¯å¢ƒå˜é‡ `VITE_AMAP_API_KEY`

## âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

### ç¯å¢ƒå˜é‡é—®é¢˜
Cloudflare Pages éƒ¨ç½²é™æ€æ–‡ä»¶æ—¶ï¼Œ**æ— æ³•ç›´æ¥è¯»å– `.env.local` æ–‡ä»¶**ã€‚

**è§£å†³æ–¹æ¡ˆï¼š**

1. **æ–¹æ¡ˆä¸€ï¼šåœ¨ Cloudflare è®¾ç½®ç¯å¢ƒå˜é‡**ï¼ˆæ¨èï¼‰
   - åœ¨ Cloudflare Pages é¡¹ç›®è®¾ç½®ä¸­æ·»åŠ ç¯å¢ƒå˜é‡
   - Variable: `VITE_AMAP_API_KEY`
   - Value: `59db828f842e5c5666d401e86911ce1d`

2. **æ–¹æ¡ˆäºŒï¼šä¿®æ”¹ä»£ç ä½¿ç”¨å›ºå®šå€¼**ï¼ˆä»…ç”¨äºæ¼”ç¤ºï¼‰
   - å¦‚æœåªæ˜¯æ¼”ç¤ºï¼Œå¯ä»¥ä¸´æ—¶åœ¨ä»£ç ä¸­ç›´æ¥ä½¿ç”¨ API Key
   - âš ï¸ æ³¨æ„ï¼šè¿™æ ·ä¼šå°† API Key æš´éœ²åœ¨å®¢æˆ·ç«¯ä»£ç ä¸­

### ä¿®æ”¹ä»£ç ä»¥æ”¯æŒ Cloudflare ç¯å¢ƒå˜é‡

ç”±äº Cloudflare Pages çš„ç¯å¢ƒå˜é‡åœ¨æ„å»ºæ—¶å¯ç”¨ï¼Œæ‚¨éœ€è¦ï¼š

1. ç¡®ä¿ `.env.local` ä¸­çš„ API Key æ­£ç¡®
2. æˆ–è€…ä¿®æ”¹ `vite.config.js` ä½¿ç”¨é»˜è®¤å€¼ï¼š

```js
// vite.config.js
export default defineConfig({
  plugins: [react()],
  define: {
    // ä¸ºç”Ÿäº§ç¯å¢ƒæä¾›é»˜è®¤ API Keyï¼ˆä»…ç”¨äºæ¼”ç¤ºï¼‰
    'import.meta.env.VITE_AMAP_API_KEY': JSON.stringify(
      process.env.VITE_AMAP_API_KEY || '59db828f842e5c5666d401e86911ce1d'
    ),
  },
  // ...
})
```

## ğŸ“ æ„å»ºæ–‡ä»¶æ¸…å•

`dist` æ–‡ä»¶å¤¹åŒ…å«ï¼š
- `index.html` - å…¥å£æ–‡ä»¶
- `assets/` - æ‰€æœ‰ CSS å’Œ JS æ–‡ä»¶
  - `index-*.css` - æ ·å¼æ–‡ä»¶
  - `index-*.js` - JavaScript æ–‡ä»¶

## ğŸŒ éƒ¨ç½²åè®¿é—®

éƒ¨ç½²å®Œæˆåï¼Œæ‚¨ä¼šè·å¾—ç±»ä¼¼è¿™æ ·çš„ URLï¼š
```
https://what-to-eat-today-xxx.pages.dev
```

## ğŸ”§ è‡ªå®šä¹‰åŸŸåï¼ˆå¯é€‰ï¼‰

1. åœ¨ Cloudflare Pages é¡¹ç›®è®¾ç½®ä¸­
2. ç‚¹å‡» "Custom domains"
3. æ·»åŠ æ‚¨çš„åŸŸå
4. Cloudflare ä¼šè‡ªåŠ¨é…ç½® DNS

## ğŸ“Š éƒ¨ç½²åéªŒè¯

éƒ¨ç½²åè¯·æ£€æŸ¥ï¼š
- [ ] é¡µé¢æ­£å¸¸åŠ è½½
- [ ] è‡ªåŠ¨å®šä½åŠŸèƒ½æ­£å¸¸
- [ ] æ‰‹åŠ¨è¾“å…¥åœ°å€åŠŸèƒ½æ­£å¸¸
- [ ] API è°ƒç”¨æ­£å¸¸ï¼ˆæ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°ï¼‰
- [ ] ç§»åŠ¨ç«¯æ˜¾ç¤ºæ­£å¸¸

## ğŸ› å¸¸è§é—®é¢˜

### Q: API è°ƒç”¨å¤±è´¥ï¼Ÿ
A: æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®è®¾ç½®ï¼Œæˆ–åœ¨æ„å»ºå‰ç¡®ä¿ `.env.local` æ–‡ä»¶å­˜åœ¨ä¸” API Key æ­£ç¡®ã€‚

### Q: é¡µé¢æ˜¾ç¤ºç©ºç™½ï¼Ÿ
A: æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ï¼Œå¯èƒ½æ˜¯è·¯å¾„é—®é¢˜ã€‚ç¡®ä¿æ‰€æœ‰èµ„æºè·¯å¾„æ­£ç¡®ã€‚

### Q: CORS é”™è¯¯ï¼Ÿ
A: ç”Ÿäº§ç¯å¢ƒéœ€è¦ä½¿ç”¨ JSONP æ–¹æ¡ˆï¼Œä»£ç ä¸­å·²åŒ…å«è‡ªåŠ¨å›é€€é€»è¾‘ã€‚

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. Cloudflare Pages çš„éƒ¨ç½²æ—¥å¿—
2. æµè§ˆå™¨æ§åˆ¶å°çš„é”™è¯¯ä¿¡æ¯
3. Network æ ‡ç­¾ä¸­çš„ API è¯·æ±‚çŠ¶æ€
