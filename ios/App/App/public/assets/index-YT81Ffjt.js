(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var PC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Zp={exports:{}},fa={},em={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pi=Symbol.for("react.element"),_v=Symbol.for("react.portal"),kv=Symbol.for("react.fragment"),Ev=Symbol.for("react.strict_mode"),Tv=Symbol.for("react.profiler"),jv=Symbol.for("react.provider"),Pv=Symbol.for("react.context"),Cv=Symbol.for("react.forward_ref"),Nv=Symbol.for("react.suspense"),Rv=Symbol.for("react.memo"),Ov=Symbol.for("react.lazy"),Dd=Symbol.iterator;function Av(t){return t===null||typeof t!="object"?null:(t=Dd&&t[Dd]||t["@@iterator"],typeof t=="function"?t:null)}var tm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nm=Object.assign,rm={};function fs(t,e,n){this.props=t,this.context=e,this.refs=rm,this.updater=n||tm}fs.prototype.isReactComponent={};fs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};fs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sm(){}sm.prototype=fs.prototype;function fc(t,e,n){this.props=t,this.context=e,this.refs=rm,this.updater=n||tm}var pc=fc.prototype=new sm;pc.constructor=fc;nm(pc,fs.prototype);pc.isPureReactComponent=!0;var Md=Array.isArray,im=Object.prototype.hasOwnProperty,mc={current:null},om={key:!0,ref:!0,__self:!0,__source:!0};function am(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)im.call(e,r)&&!om.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Pi,type:t,key:i,ref:o,props:s,_owner:mc.current}}function Lv(t,e){return{$$typeof:Pi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function gc(t){return typeof t=="object"&&t!==null&&t.$$typeof===Pi}function Iv(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ud=/\/+/g;function Ba(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Iv(""+t.key):e.toString(36)}function fo(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Pi:case _v:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Ba(o,0):r,Md(s)?(n="",t!=null&&(n=t.replace(Ud,"$&/")+"/"),fo(s,e,n,"",function(u){return u})):s!=null&&(gc(s)&&(s=Lv(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Ud,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Md(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Ba(i,a);o+=fo(i,e,n,l,s)}else if(l=Av(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Ba(i,a++),o+=fo(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ui(t,e,n){if(t==null)return t;var r=[],s=0;return fo(t,r,"","",function(i){return e.call(n,i,s++)}),r}function $v(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var nt={current:null},po={transition:null},Dv={ReactCurrentDispatcher:nt,ReactCurrentBatchConfig:po,ReactCurrentOwner:mc};function lm(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:Ui,forEach:function(t,e,n){Ui(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ui(t,function(){e++}),e},toArray:function(t){return Ui(t,function(e){return e})||[]},only:function(t){if(!gc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ee.Component=fs;ee.Fragment=kv;ee.Profiler=Tv;ee.PureComponent=fc;ee.StrictMode=Ev;ee.Suspense=Nv;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dv;ee.act=lm;ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=nm({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=mc.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)im.call(e,l)&&!om.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Pi,type:t.type,key:s,ref:i,props:r,_owner:o}};ee.createContext=function(t){return t={$$typeof:Pv,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:jv,_context:t},t.Consumer=t};ee.createElement=am;ee.createFactory=function(t){var e=am.bind(null,t);return e.type=t,e};ee.createRef=function(){return{current:null}};ee.forwardRef=function(t){return{$$typeof:Cv,render:t}};ee.isValidElement=gc;ee.lazy=function(t){return{$$typeof:Ov,_payload:{_status:-1,_result:t},_init:$v}};ee.memo=function(t,e){return{$$typeof:Rv,type:t,compare:e===void 0?null:e}};ee.startTransition=function(t){var e=po.transition;po.transition={};try{t()}finally{po.transition=e}};ee.unstable_act=lm;ee.useCallback=function(t,e){return nt.current.useCallback(t,e)};ee.useContext=function(t){return nt.current.useContext(t)};ee.useDebugValue=function(){};ee.useDeferredValue=function(t){return nt.current.useDeferredValue(t)};ee.useEffect=function(t,e){return nt.current.useEffect(t,e)};ee.useId=function(){return nt.current.useId()};ee.useImperativeHandle=function(t,e,n){return nt.current.useImperativeHandle(t,e,n)};ee.useInsertionEffect=function(t,e){return nt.current.useInsertionEffect(t,e)};ee.useLayoutEffect=function(t,e){return nt.current.useLayoutEffect(t,e)};ee.useMemo=function(t,e){return nt.current.useMemo(t,e)};ee.useReducer=function(t,e,n){return nt.current.useReducer(t,e,n)};ee.useRef=function(t){return nt.current.useRef(t)};ee.useState=function(t){return nt.current.useState(t)};ee.useSyncExternalStore=function(t,e,n){return nt.current.useSyncExternalStore(t,e,n)};ee.useTransition=function(){return nt.current.useTransition()};ee.version="18.3.1";em.exports=ee;var S=em.exports;const pa=Sv(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mv=S,Uv=Symbol.for("react.element"),Vv=Symbol.for("react.fragment"),Fv=Object.prototype.hasOwnProperty,Bv=Mv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zv={key:!0,ref:!0,__self:!0,__source:!0};function um(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Fv.call(e,r)&&!zv.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Uv,type:t,key:i,ref:o,props:s,_owner:Bv.current}}fa.Fragment=Vv;fa.jsx=um;fa.jsxs=um;Zp.exports=fa;var h=Zp.exports,Bl={},cm={exports:{}},xt={},dm={exports:{}},hm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,$){var H=R.length;R.push($);e:for(;0<H;){var A=H-1>>>1,q=R[A];if(0<s(q,$))R[A]=$,R[H]=q,H=A;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var $=R[0],H=R.pop();if(H!==$){R[0]=H;e:for(var A=0,q=R.length,be=q>>>1;A<be;){var Ce=2*(A+1)-1,Ae=R[Ce],ae=Ce+1,Ke=R[ae];if(0>s(Ae,H))ae<q&&0>s(Ke,Ae)?(R[A]=Ke,R[ae]=H,A=ae):(R[A]=Ae,R[Ce]=H,A=Ce);else if(ae<q&&0>s(Ke,H))R[A]=Ke,R[ae]=H,A=ae;else break e}}return $}function s(R,$){var H=R.sortIndex-$.sortIndex;return H!==0?H:R.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,c=null,f=3,p=!1,m=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(R){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=R)r(u),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(u)}}function x(R){if(v=!1,y(R),!m)if(n(l)!==null)m=!0,I(E);else{var $=n(u);$!==null&&X(x,$.startTime-R)}}function E(R,$){m=!1,v&&(v=!1,w(j),j=-1),p=!0;var H=f;try{for(y($),c=n(l);c!==null&&(!(c.expirationTime>$)||R&&!K());){var A=c.callback;if(typeof A=="function"){c.callback=null,f=c.priorityLevel;var q=A(c.expirationTime<=$);$=t.unstable_now(),typeof q=="function"?c.callback=q:c===n(l)&&r(l),y($)}else r(l);c=n(l)}if(c!==null)var be=!0;else{var Ce=n(u);Ce!==null&&X(x,Ce.startTime-$),be=!1}return be}finally{c=null,f=H,p=!1}}var _=!1,k=null,j=-1,T=5,N=-1;function K(){return!(t.unstable_now()-N<T)}function F(){if(k!==null){var R=t.unstable_now();N=R;var $=!0;try{$=k(!0,R)}finally{$?V():(_=!1,k=null)}}else _=!1}var V;if(typeof g=="function")V=function(){g(F)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,M=C.port2;C.port1.onmessage=F,V=function(){M.postMessage(null)}}else V=function(){b(F,0)};function I(R){k=R,_||(_=!0,V())}function X(R,$){j=b(function(){R(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,I(E))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(R){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var H=f;f=$;try{return R()}finally{f=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,$){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var H=f;f=R;try{return $()}finally{f=H}},t.unstable_scheduleCallback=function(R,$,H){var A=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?A+H:A):H=A,R){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=H+q,R={id:d++,callback:$,priorityLevel:R,startTime:H,expirationTime:q,sortIndex:-1},H>A?(R.sortIndex=H,e(u,R),n(l)===null&&R===n(u)&&(v?(w(j),j=-1):v=!0,X(x,H-A))):(R.sortIndex=q,e(l,R),m||p||(m=!0,I(E))),R},t.unstable_shouldYield=K,t.unstable_wrapCallback=function(R){var $=f;return function(){var H=f;f=$;try{return R.apply(this,arguments)}finally{f=H}}}})(hm);dm.exports=hm;var Wv=dm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hv=S,vt=Wv;function O(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fm=new Set,ei={};function pr(t,e){ns(t,e),ns(t+"Capture",e)}function ns(t,e){for(ei[t]=e,t=0;t<e.length;t++)fm.add(e[t])}var on=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zl=Object.prototype.hasOwnProperty,Kv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vd={},Fd={};function qv(t){return zl.call(Fd,t)?!0:zl.call(Vd,t)?!1:Kv.test(t)?Fd[t]=!0:(Vd[t]=!0,!1)}function Gv(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Jv(t,e,n,r){if(e===null||typeof e>"u"||Gv(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function rt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var He={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){He[t]=new rt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];He[e]=new rt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){He[t]=new rt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){He[t]=new rt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){He[t]=new rt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){He[t]=new rt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){He[t]=new rt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){He[t]=new rt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){He[t]=new rt(t,5,!1,t.toLowerCase(),null,!1,!1)});var yc=/[\-:]([a-z])/g;function vc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(yc,vc);He[e]=new rt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(yc,vc);He[e]=new rt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(yc,vc);He[e]=new rt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){He[t]=new rt(t,1,!1,t.toLowerCase(),null,!1,!1)});He.xlinkHref=new rt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){He[t]=new rt(t,1,!1,t.toLowerCase(),null,!0,!0)});function wc(t,e,n,r){var s=He.hasOwnProperty(e)?He[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Jv(e,n,s,r)&&(n=null),r||s===null?qv(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var dn=Hv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vi=Symbol.for("react.element"),Or=Symbol.for("react.portal"),Ar=Symbol.for("react.fragment"),xc=Symbol.for("react.strict_mode"),Wl=Symbol.for("react.profiler"),pm=Symbol.for("react.provider"),mm=Symbol.for("react.context"),bc=Symbol.for("react.forward_ref"),Hl=Symbol.for("react.suspense"),Kl=Symbol.for("react.suspense_list"),Sc=Symbol.for("react.memo"),mn=Symbol.for("react.lazy"),gm=Symbol.for("react.offscreen"),Bd=Symbol.iterator;function vs(t){return t===null||typeof t!="object"?null:(t=Bd&&t[Bd]||t["@@iterator"],typeof t=="function"?t:null)}var xe=Object.assign,za;function Rs(t){if(za===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);za=e&&e[1]||""}return`
`+za+t}var Wa=!1;function Ha(t,e){if(!t||Wa)return"";Wa=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Wa=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Rs(t):""}function Yv(t){switch(t.tag){case 5:return Rs(t.type);case 16:return Rs("Lazy");case 13:return Rs("Suspense");case 19:return Rs("SuspenseList");case 0:case 2:case 15:return t=Ha(t.type,!1),t;case 11:return t=Ha(t.type.render,!1),t;case 1:return t=Ha(t.type,!0),t;default:return""}}function ql(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ar:return"Fragment";case Or:return"Portal";case Wl:return"Profiler";case xc:return"StrictMode";case Hl:return"Suspense";case Kl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case mm:return(t.displayName||"Context")+".Consumer";case pm:return(t._context.displayName||"Context")+".Provider";case bc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Sc:return e=t.displayName||null,e!==null?e:ql(t.type)||"Memo";case mn:e=t._payload,t=t._init;try{return ql(t(e))}catch{}}return null}function Xv(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ql(e);case 8:return e===xc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function An(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ym(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Qv(t){var e=ym(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Fi(t){t._valueTracker||(t._valueTracker=Qv(t))}function vm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ym(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function jo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Gl(t,e){var n=e.checked;return xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function zd(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=An(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wm(t,e){e=e.checked,e!=null&&wc(t,"checked",e,!1)}function Jl(t,e){wm(t,e);var n=An(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Yl(t,e.type,n):e.hasOwnProperty("defaultValue")&&Yl(t,e.type,An(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Wd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Yl(t,e,n){(e!=="number"||jo(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Os=Array.isArray;function Jr(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+An(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Xl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(O(91));return xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Hd(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(O(92));if(Os(n)){if(1<n.length)throw Error(O(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:An(n)}}function xm(t,e){var n=An(e.value),r=An(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Kd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function bm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ql(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?bm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Bi,Sm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Bi=Bi||document.createElement("div"),Bi.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Bi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ti(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ds={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zv=["Webkit","ms","Moz","O"];Object.keys(Ds).forEach(function(t){Zv.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ds[e]=Ds[t]})});function _m(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ds.hasOwnProperty(t)&&Ds[t]?(""+e).trim():e+"px"}function km(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=_m(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var ew=xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zl(t,e){if(e){if(ew[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(O(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(O(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(O(61))}if(e.style!=null&&typeof e.style!="object")throw Error(O(62))}}function eu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tu=null;function _c(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var nu=null,Yr=null,Xr=null;function qd(t){if(t=Ri(t)){if(typeof nu!="function")throw Error(O(280));var e=t.stateNode;e&&(e=wa(e),nu(t.stateNode,t.type,e))}}function Em(t){Yr?Xr?Xr.push(t):Xr=[t]:Yr=t}function Tm(){if(Yr){var t=Yr,e=Xr;if(Xr=Yr=null,qd(t),e)for(t=0;t<e.length;t++)qd(e[t])}}function jm(t,e){return t(e)}function Pm(){}var Ka=!1;function Cm(t,e,n){if(Ka)return t(e,n);Ka=!0;try{return jm(t,e,n)}finally{Ka=!1,(Yr!==null||Xr!==null)&&(Pm(),Tm())}}function ni(t,e){var n=t.stateNode;if(n===null)return null;var r=wa(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(O(231,e,typeof n));return n}var ru=!1;if(on)try{var ws={};Object.defineProperty(ws,"passive",{get:function(){ru=!0}}),window.addEventListener("test",ws,ws),window.removeEventListener("test",ws,ws)}catch{ru=!1}function tw(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Ms=!1,Po=null,Co=!1,su=null,nw={onError:function(t){Ms=!0,Po=t}};function rw(t,e,n,r,s,i,o,a,l){Ms=!1,Po=null,tw.apply(nw,arguments)}function sw(t,e,n,r,s,i,o,a,l){if(rw.apply(this,arguments),Ms){if(Ms){var u=Po;Ms=!1,Po=null}else throw Error(O(198));Co||(Co=!0,su=u)}}function mr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Nm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Gd(t){if(mr(t)!==t)throw Error(O(188))}function iw(t){var e=t.alternate;if(!e){if(e=mr(t),e===null)throw Error(O(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Gd(s),t;if(i===r)return Gd(s),e;i=i.sibling}throw Error(O(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(O(189))}}if(n.alternate!==r)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?t:e}function Rm(t){return t=iw(t),t!==null?Om(t):null}function Om(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Om(t);if(e!==null)return e;t=t.sibling}return null}var Am=vt.unstable_scheduleCallback,Jd=vt.unstable_cancelCallback,ow=vt.unstable_shouldYield,aw=vt.unstable_requestPaint,je=vt.unstable_now,lw=vt.unstable_getCurrentPriorityLevel,kc=vt.unstable_ImmediatePriority,Lm=vt.unstable_UserBlockingPriority,No=vt.unstable_NormalPriority,uw=vt.unstable_LowPriority,Im=vt.unstable_IdlePriority,ma=null,Ht=null;function cw(t){if(Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(ma,t,void 0,(t.current.flags&128)===128)}catch{}}var Mt=Math.clz32?Math.clz32:fw,dw=Math.log,hw=Math.LN2;function fw(t){return t>>>=0,t===0?32:31-(dw(t)/hw|0)|0}var zi=64,Wi=4194304;function As(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ro(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=As(a):(i&=o,i!==0&&(r=As(i)))}else o=n&~s,o!==0?r=As(o):i!==0&&(r=As(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Mt(e),s=1<<n,r|=t[n],e&=~s;return r}function pw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Mt(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=pw(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function iu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $m(){var t=zi;return zi<<=1,!(zi&4194240)&&(zi=64),t}function qa(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ci(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Mt(e),t[e]=n}function gw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Mt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Ec(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Mt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var oe=0;function Dm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Mm,Tc,Um,Vm,Fm,ou=!1,Hi=[],kn=null,En=null,Tn=null,ri=new Map,si=new Map,wn=[],yw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yd(t,e){switch(t){case"focusin":case"focusout":kn=null;break;case"dragenter":case"dragleave":En=null;break;case"mouseover":case"mouseout":Tn=null;break;case"pointerover":case"pointerout":ri.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":si.delete(e.pointerId)}}function xs(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ri(e),e!==null&&Tc(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function vw(t,e,n,r,s){switch(e){case"focusin":return kn=xs(kn,t,e,n,r,s),!0;case"dragenter":return En=xs(En,t,e,n,r,s),!0;case"mouseover":return Tn=xs(Tn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ri.set(i,xs(ri.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,si.set(i,xs(si.get(i)||null,t,e,n,r,s)),!0}return!1}function Bm(t){var e=Zn(t.target);if(e!==null){var n=mr(e);if(n!==null){if(e=n.tag,e===13){if(e=Nm(n),e!==null){t.blockedOn=e,Fm(t.priority,function(){Um(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function mo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=au(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);tu=r,n.target.dispatchEvent(r),tu=null}else return e=Ri(n),e!==null&&Tc(e),t.blockedOn=n,!1;e.shift()}return!0}function Xd(t,e,n){mo(t)&&n.delete(e)}function ww(){ou=!1,kn!==null&&mo(kn)&&(kn=null),En!==null&&mo(En)&&(En=null),Tn!==null&&mo(Tn)&&(Tn=null),ri.forEach(Xd),si.forEach(Xd)}function bs(t,e){t.blockedOn===e&&(t.blockedOn=null,ou||(ou=!0,vt.unstable_scheduleCallback(vt.unstable_NormalPriority,ww)))}function ii(t){function e(s){return bs(s,t)}if(0<Hi.length){bs(Hi[0],t);for(var n=1;n<Hi.length;n++){var r=Hi[n];r.blockedOn===t&&(r.blockedOn=null)}}for(kn!==null&&bs(kn,t),En!==null&&bs(En,t),Tn!==null&&bs(Tn,t),ri.forEach(e),si.forEach(e),n=0;n<wn.length;n++)r=wn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<wn.length&&(n=wn[0],n.blockedOn===null);)Bm(n),n.blockedOn===null&&wn.shift()}var Qr=dn.ReactCurrentBatchConfig,Oo=!0;function xw(t,e,n,r){var s=oe,i=Qr.transition;Qr.transition=null;try{oe=1,jc(t,e,n,r)}finally{oe=s,Qr.transition=i}}function bw(t,e,n,r){var s=oe,i=Qr.transition;Qr.transition=null;try{oe=4,jc(t,e,n,r)}finally{oe=s,Qr.transition=i}}function jc(t,e,n,r){if(Oo){var s=au(t,e,n,r);if(s===null)rl(t,e,r,Ao,n),Yd(t,r);else if(vw(s,t,e,n,r))r.stopPropagation();else if(Yd(t,r),e&4&&-1<yw.indexOf(t)){for(;s!==null;){var i=Ri(s);if(i!==null&&Mm(i),i=au(t,e,n,r),i===null&&rl(t,e,r,Ao,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else rl(t,e,r,null,n)}}var Ao=null;function au(t,e,n,r){if(Ao=null,t=_c(r),t=Zn(t),t!==null)if(e=mr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Nm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ao=t,null}function zm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lw()){case kc:return 1;case Lm:return 4;case No:case uw:return 16;case Im:return 536870912;default:return 16}default:return 16}}var Sn=null,Pc=null,go=null;function Wm(){if(go)return go;var t,e=Pc,n=e.length,r,s="value"in Sn?Sn.value:Sn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return go=s.slice(t,1<r?1-r:void 0)}function yo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ki(){return!0}function Qd(){return!1}function bt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ki:Qd,this.isPropagationStopped=Qd,this}return xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ki)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ki)},persist:function(){},isPersistent:Ki}),e}var ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cc=bt(ps),Ni=xe({},ps,{view:0,detail:0}),Sw=bt(Ni),Ga,Ja,Ss,ga=xe({},Ni,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ss&&(Ss&&t.type==="mousemove"?(Ga=t.screenX-Ss.screenX,Ja=t.screenY-Ss.screenY):Ja=Ga=0,Ss=t),Ga)},movementY:function(t){return"movementY"in t?t.movementY:Ja}}),Zd=bt(ga),_w=xe({},ga,{dataTransfer:0}),kw=bt(_w),Ew=xe({},Ni,{relatedTarget:0}),Ya=bt(Ew),Tw=xe({},ps,{animationName:0,elapsedTime:0,pseudoElement:0}),jw=bt(Tw),Pw=xe({},ps,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Cw=bt(Pw),Nw=xe({},ps,{data:0}),eh=bt(Nw),Rw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ow={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Aw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Aw[t])?!!e[t]:!1}function Nc(){return Lw}var Iw=xe({},Ni,{key:function(t){if(t.key){var e=Rw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=yo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ow[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nc,charCode:function(t){return t.type==="keypress"?yo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?yo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$w=bt(Iw),Dw=xe({},ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),th=bt(Dw),Mw=xe({},Ni,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nc}),Uw=bt(Mw),Vw=xe({},ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fw=bt(Vw),Bw=xe({},ga,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zw=bt(Bw),Ww=[9,13,27,32],Rc=on&&"CompositionEvent"in window,Us=null;on&&"documentMode"in document&&(Us=document.documentMode);var Hw=on&&"TextEvent"in window&&!Us,Hm=on&&(!Rc||Us&&8<Us&&11>=Us),nh=" ",rh=!1;function Km(t,e){switch(t){case"keyup":return Ww.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Lr=!1;function Kw(t,e){switch(t){case"compositionend":return qm(e);case"keypress":return e.which!==32?null:(rh=!0,nh);case"textInput":return t=e.data,t===nh&&rh?null:t;default:return null}}function qw(t,e){if(Lr)return t==="compositionend"||!Rc&&Km(t,e)?(t=Wm(),go=Pc=Sn=null,Lr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Hm&&e.locale!=="ko"?null:e.data;default:return null}}var Gw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Gw[t.type]:e==="textarea"}function Gm(t,e,n,r){Em(r),e=Lo(e,"onChange"),0<e.length&&(n=new Cc("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Vs=null,oi=null;function Jw(t){ig(t,0)}function ya(t){var e=Dr(t);if(vm(e))return t}function Yw(t,e){if(t==="change")return e}var Jm=!1;if(on){var Xa;if(on){var Qa="oninput"in document;if(!Qa){var ih=document.createElement("div");ih.setAttribute("oninput","return;"),Qa=typeof ih.oninput=="function"}Xa=Qa}else Xa=!1;Jm=Xa&&(!document.documentMode||9<document.documentMode)}function oh(){Vs&&(Vs.detachEvent("onpropertychange",Ym),oi=Vs=null)}function Ym(t){if(t.propertyName==="value"&&ya(oi)){var e=[];Gm(e,oi,t,_c(t)),Cm(Jw,e)}}function Xw(t,e,n){t==="focusin"?(oh(),Vs=e,oi=n,Vs.attachEvent("onpropertychange",Ym)):t==="focusout"&&oh()}function Qw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ya(oi)}function Zw(t,e){if(t==="click")return ya(e)}function ex(t,e){if(t==="input"||t==="change")return ya(e)}function tx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Vt=typeof Object.is=="function"?Object.is:tx;function ai(t,e){if(Vt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!zl.call(e,s)||!Vt(t[s],e[s]))return!1}return!0}function ah(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function lh(t,e){var n=ah(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ah(n)}}function Xm(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Xm(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Qm(){for(var t=window,e=jo();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=jo(t.document)}return e}function Oc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function nx(t){var e=Qm(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Xm(n.ownerDocument.documentElement,n)){if(r!==null&&Oc(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=lh(n,i);var o=lh(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var rx=on&&"documentMode"in document&&11>=document.documentMode,Ir=null,lu=null,Fs=null,uu=!1;function uh(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;uu||Ir==null||Ir!==jo(r)||(r=Ir,"selectionStart"in r&&Oc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Fs&&ai(Fs,r)||(Fs=r,r=Lo(lu,"onSelect"),0<r.length&&(e=new Cc("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ir)))}function qi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $r={animationend:qi("Animation","AnimationEnd"),animationiteration:qi("Animation","AnimationIteration"),animationstart:qi("Animation","AnimationStart"),transitionend:qi("Transition","TransitionEnd")},Za={},Zm={};on&&(Zm=document.createElement("div").style,"AnimationEvent"in window||(delete $r.animationend.animation,delete $r.animationiteration.animation,delete $r.animationstart.animation),"TransitionEvent"in window||delete $r.transitionend.transition);function va(t){if(Za[t])return Za[t];if(!$r[t])return t;var e=$r[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Zm)return Za[t]=e[n];return t}var eg=va("animationend"),tg=va("animationiteration"),ng=va("animationstart"),rg=va("transitionend"),sg=new Map,ch="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mn(t,e){sg.set(t,e),pr(e,[t])}for(var el=0;el<ch.length;el++){var tl=ch[el],sx=tl.toLowerCase(),ix=tl[0].toUpperCase()+tl.slice(1);Mn(sx,"on"+ix)}Mn(eg,"onAnimationEnd");Mn(tg,"onAnimationIteration");Mn(ng,"onAnimationStart");Mn("dblclick","onDoubleClick");Mn("focusin","onFocus");Mn("focusout","onBlur");Mn(rg,"onTransitionEnd");ns("onMouseEnter",["mouseout","mouseover"]);ns("onMouseLeave",["mouseout","mouseover"]);ns("onPointerEnter",["pointerout","pointerover"]);ns("onPointerLeave",["pointerout","pointerover"]);pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pr("onBeforeInput",["compositionend","keypress","textInput","paste"]);pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ls="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ox=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ls));function dh(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,sw(r,e,void 0,t),t.currentTarget=null}function ig(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;dh(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;dh(s,a,u),i=l}}}if(Co)throw t=su,Co=!1,su=null,t}function de(t,e){var n=e[pu];n===void 0&&(n=e[pu]=new Set);var r=t+"__bubble";n.has(r)||(og(e,t,2,!1),n.add(r))}function nl(t,e,n){var r=0;e&&(r|=4),og(n,t,r,e)}var Gi="_reactListening"+Math.random().toString(36).slice(2);function li(t){if(!t[Gi]){t[Gi]=!0,fm.forEach(function(n){n!=="selectionchange"&&(ox.has(n)||nl(n,!1,t),nl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Gi]||(e[Gi]=!0,nl("selectionchange",!1,e))}}function og(t,e,n,r){switch(zm(e)){case 1:var s=xw;break;case 4:s=bw;break;default:s=jc}n=s.bind(null,e,n,t),s=void 0,!ru||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function rl(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Zn(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Cm(function(){var u=i,d=_c(n),c=[];e:{var f=sg.get(t);if(f!==void 0){var p=Cc,m=t;switch(t){case"keypress":if(yo(n)===0)break e;case"keydown":case"keyup":p=$w;break;case"focusin":m="focus",p=Ya;break;case"focusout":m="blur",p=Ya;break;case"beforeblur":case"afterblur":p=Ya;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Zd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=kw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Uw;break;case eg:case tg:case ng:p=jw;break;case rg:p=Fw;break;case"scroll":p=Sw;break;case"wheel":p=zw;break;case"copy":case"cut":case"paste":p=Cw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=th}var v=(e&4)!==0,b=!v&&t==="scroll",w=v?f!==null?f+"Capture":null:f;v=[];for(var g=u,y;g!==null;){y=g;var x=y.stateNode;if(y.tag===5&&x!==null&&(y=x,w!==null&&(x=ni(g,w),x!=null&&v.push(ui(g,x,y)))),b)break;g=g.return}0<v.length&&(f=new p(f,m,null,n,d),c.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==tu&&(m=n.relatedTarget||n.fromElement)&&(Zn(m)||m[an]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=u,m=m?Zn(m):null,m!==null&&(b=mr(m),m!==b||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(v=Zd,x="onMouseLeave",w="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(v=th,x="onPointerLeave",w="onPointerEnter",g="pointer"),b=p==null?f:Dr(p),y=m==null?f:Dr(m),f=new v(x,g+"leave",p,n,d),f.target=b,f.relatedTarget=y,x=null,Zn(d)===u&&(v=new v(w,g+"enter",m,n,d),v.target=y,v.relatedTarget=b,x=v),b=x,p&&m)t:{for(v=p,w=m,g=0,y=v;y;y=wr(y))g++;for(y=0,x=w;x;x=wr(x))y++;for(;0<g-y;)v=wr(v),g--;for(;0<y-g;)w=wr(w),y--;for(;g--;){if(v===w||w!==null&&v===w.alternate)break t;v=wr(v),w=wr(w)}v=null}else v=null;p!==null&&hh(c,f,p,v,!1),m!==null&&b!==null&&hh(c,b,m,v,!0)}}e:{if(f=u?Dr(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var E=Yw;else if(sh(f))if(Jm)E=ex;else{E=Qw;var _=Xw}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=Zw);if(E&&(E=E(t,u))){Gm(c,E,n,d);break e}_&&_(t,f,u),t==="focusout"&&(_=f._wrapperState)&&_.controlled&&f.type==="number"&&Yl(f,"number",f.value)}switch(_=u?Dr(u):window,t){case"focusin":(sh(_)||_.contentEditable==="true")&&(Ir=_,lu=u,Fs=null);break;case"focusout":Fs=lu=Ir=null;break;case"mousedown":uu=!0;break;case"contextmenu":case"mouseup":case"dragend":uu=!1,uh(c,n,d);break;case"selectionchange":if(rx)break;case"keydown":case"keyup":uh(c,n,d)}var k;if(Rc)e:{switch(t){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Lr?Km(t,n)&&(j="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(Hm&&n.locale!=="ko"&&(Lr||j!=="onCompositionStart"?j==="onCompositionEnd"&&Lr&&(k=Wm()):(Sn=d,Pc="value"in Sn?Sn.value:Sn.textContent,Lr=!0)),_=Lo(u,j),0<_.length&&(j=new eh(j,t,null,n,d),c.push({event:j,listeners:_}),k?j.data=k:(k=qm(n),k!==null&&(j.data=k)))),(k=Hw?Kw(t,n):qw(t,n))&&(u=Lo(u,"onBeforeInput"),0<u.length&&(d=new eh("onBeforeInput","beforeinput",null,n,d),c.push({event:d,listeners:u}),d.data=k))}ig(c,e)})}function ui(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Lo(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ni(t,n),i!=null&&r.unshift(ui(t,i,s)),i=ni(t,e),i!=null&&r.push(ui(t,i,s))),t=t.return}return r}function wr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function hh(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=ni(n,i),l!=null&&o.unshift(ui(n,l,a))):s||(l=ni(n,i),l!=null&&o.push(ui(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var ax=/\r\n?/g,lx=/\u0000|\uFFFD/g;function fh(t){return(typeof t=="string"?t:""+t).replace(ax,`
`).replace(lx,"")}function Ji(t,e,n){if(e=fh(e),fh(t)!==e&&n)throw Error(O(425))}function Io(){}var cu=null,du=null;function hu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var fu=typeof setTimeout=="function"?setTimeout:void 0,ux=typeof clearTimeout=="function"?clearTimeout:void 0,ph=typeof Promise=="function"?Promise:void 0,cx=typeof queueMicrotask=="function"?queueMicrotask:typeof ph<"u"?function(t){return ph.resolve(null).then(t).catch(dx)}:fu;function dx(t){setTimeout(function(){throw t})}function sl(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ii(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ii(e)}function jn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function mh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ms=Math.random().toString(36).slice(2),zt="__reactFiber$"+ms,ci="__reactProps$"+ms,an="__reactContainer$"+ms,pu="__reactEvents$"+ms,hx="__reactListeners$"+ms,fx="__reactHandles$"+ms;function Zn(t){var e=t[zt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[an]||n[zt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=mh(t);t!==null;){if(n=t[zt])return n;t=mh(t)}return e}t=n,n=t.parentNode}return null}function Ri(t){return t=t[zt]||t[an],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Dr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(O(33))}function wa(t){return t[ci]||null}var mu=[],Mr=-1;function Un(t){return{current:t}}function he(t){0>Mr||(t.current=mu[Mr],mu[Mr]=null,Mr--)}function ue(t,e){Mr++,mu[Mr]=t.current,t.current=e}var Ln={},Xe=Un(Ln),at=Un(!1),ar=Ln;function rs(t,e){var n=t.type.contextTypes;if(!n)return Ln;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function lt(t){return t=t.childContextTypes,t!=null}function $o(){he(at),he(Xe)}function gh(t,e,n){if(Xe.current!==Ln)throw Error(O(168));ue(Xe,e),ue(at,n)}function ag(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(O(108,Xv(t)||"Unknown",s));return xe({},n,r)}function Do(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ln,ar=Xe.current,ue(Xe,t),ue(at,at.current),!0}function yh(t,e,n){var r=t.stateNode;if(!r)throw Error(O(169));n?(t=ag(t,e,ar),r.__reactInternalMemoizedMergedChildContext=t,he(at),he(Xe),ue(Xe,t)):he(at),ue(at,n)}var Qt=null,xa=!1,il=!1;function lg(t){Qt===null?Qt=[t]:Qt.push(t)}function px(t){xa=!0,lg(t)}function Vn(){if(!il&&Qt!==null){il=!0;var t=0,e=oe;try{var n=Qt;for(oe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Qt=null,xa=!1}catch(s){throw Qt!==null&&(Qt=Qt.slice(t+1)),Am(kc,Vn),s}finally{oe=e,il=!1}}return null}var Ur=[],Vr=0,Mo=null,Uo=0,kt=[],Et=0,lr=null,Zt=1,en="";function Hn(t,e){Ur[Vr++]=Uo,Ur[Vr++]=Mo,Mo=t,Uo=e}function ug(t,e,n){kt[Et++]=Zt,kt[Et++]=en,kt[Et++]=lr,lr=t;var r=Zt;t=en;var s=32-Mt(r)-1;r&=~(1<<s),n+=1;var i=32-Mt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Zt=1<<32-Mt(e)+s|n<<s|r,en=i+t}else Zt=1<<i|n<<s|r,en=t}function Ac(t){t.return!==null&&(Hn(t,1),ug(t,1,0))}function Lc(t){for(;t===Mo;)Mo=Ur[--Vr],Ur[Vr]=null,Uo=Ur[--Vr],Ur[Vr]=null;for(;t===lr;)lr=kt[--Et],kt[Et]=null,en=kt[--Et],kt[Et]=null,Zt=kt[--Et],kt[Et]=null}var yt=null,gt=null,me=!1,Dt=null;function cg(t,e){var n=Tt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function vh(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,yt=t,gt=jn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,yt=t,gt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=lr!==null?{id:Zt,overflow:en}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Tt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,yt=t,gt=null,!0):!1;default:return!1}}function gu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function yu(t){if(me){var e=gt;if(e){var n=e;if(!vh(t,e)){if(gu(t))throw Error(O(418));e=jn(n.nextSibling);var r=yt;e&&vh(t,e)?cg(r,n):(t.flags=t.flags&-4097|2,me=!1,yt=t)}}else{if(gu(t))throw Error(O(418));t.flags=t.flags&-4097|2,me=!1,yt=t}}}function wh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;yt=t}function Yi(t){if(t!==yt)return!1;if(!me)return wh(t),me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!hu(t.type,t.memoizedProps)),e&&(e=gt)){if(gu(t))throw dg(),Error(O(418));for(;e;)cg(t,e),e=jn(e.nextSibling)}if(wh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){gt=jn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}gt=null}}else gt=yt?jn(t.stateNode.nextSibling):null;return!0}function dg(){for(var t=gt;t;)t=jn(t.nextSibling)}function ss(){gt=yt=null,me=!1}function Ic(t){Dt===null?Dt=[t]:Dt.push(t)}var mx=dn.ReactCurrentBatchConfig;function _s(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var r=n.stateNode}if(!r)throw Error(O(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,t))}return t}function Xi(t,e){throw t=Object.prototype.toString.call(e),Error(O(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function xh(t){var e=t._init;return e(t._payload)}function hg(t){function e(w,g){if(t){var y=w.deletions;y===null?(w.deletions=[g],w.flags|=16):y.push(g)}}function n(w,g){if(!t)return null;for(;g!==null;)e(w,g),g=g.sibling;return null}function r(w,g){for(w=new Map;g!==null;)g.key!==null?w.set(g.key,g):w.set(g.index,g),g=g.sibling;return w}function s(w,g){return w=Rn(w,g),w.index=0,w.sibling=null,w}function i(w,g,y){return w.index=y,t?(y=w.alternate,y!==null?(y=y.index,y<g?(w.flags|=2,g):y):(w.flags|=2,g)):(w.flags|=1048576,g)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,g,y,x){return g===null||g.tag!==6?(g=hl(y,w.mode,x),g.return=w,g):(g=s(g,y),g.return=w,g)}function l(w,g,y,x){var E=y.type;return E===Ar?d(w,g,y.props.children,x,y.key):g!==null&&(g.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===mn&&xh(E)===g.type)?(x=s(g,y.props),x.ref=_s(w,g,y),x.return=w,x):(x=ko(y.type,y.key,y.props,null,w.mode,x),x.ref=_s(w,g,y),x.return=w,x)}function u(w,g,y,x){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=fl(y,w.mode,x),g.return=w,g):(g=s(g,y.children||[]),g.return=w,g)}function d(w,g,y,x,E){return g===null||g.tag!==7?(g=ir(y,w.mode,x,E),g.return=w,g):(g=s(g,y),g.return=w,g)}function c(w,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=hl(""+g,w.mode,y),g.return=w,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Vi:return y=ko(g.type,g.key,g.props,null,w.mode,y),y.ref=_s(w,null,g),y.return=w,y;case Or:return g=fl(g,w.mode,y),g.return=w,g;case mn:var x=g._init;return c(w,x(g._payload),y)}if(Os(g)||vs(g))return g=ir(g,w.mode,y,null),g.return=w,g;Xi(w,g)}return null}function f(w,g,y,x){var E=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return E!==null?null:a(w,g,""+y,x);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Vi:return y.key===E?l(w,g,y,x):null;case Or:return y.key===E?u(w,g,y,x):null;case mn:return E=y._init,f(w,g,E(y._payload),x)}if(Os(y)||vs(y))return E!==null?null:d(w,g,y,x,null);Xi(w,y)}return null}function p(w,g,y,x,E){if(typeof x=="string"&&x!==""||typeof x=="number")return w=w.get(y)||null,a(g,w,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Vi:return w=w.get(x.key===null?y:x.key)||null,l(g,w,x,E);case Or:return w=w.get(x.key===null?y:x.key)||null,u(g,w,x,E);case mn:var _=x._init;return p(w,g,y,_(x._payload),E)}if(Os(x)||vs(x))return w=w.get(y)||null,d(g,w,x,E,null);Xi(g,x)}return null}function m(w,g,y,x){for(var E=null,_=null,k=g,j=g=0,T=null;k!==null&&j<y.length;j++){k.index>j?(T=k,k=null):T=k.sibling;var N=f(w,k,y[j],x);if(N===null){k===null&&(k=T);break}t&&k&&N.alternate===null&&e(w,k),g=i(N,g,j),_===null?E=N:_.sibling=N,_=N,k=T}if(j===y.length)return n(w,k),me&&Hn(w,j),E;if(k===null){for(;j<y.length;j++)k=c(w,y[j],x),k!==null&&(g=i(k,g,j),_===null?E=k:_.sibling=k,_=k);return me&&Hn(w,j),E}for(k=r(w,k);j<y.length;j++)T=p(k,w,j,y[j],x),T!==null&&(t&&T.alternate!==null&&k.delete(T.key===null?j:T.key),g=i(T,g,j),_===null?E=T:_.sibling=T,_=T);return t&&k.forEach(function(K){return e(w,K)}),me&&Hn(w,j),E}function v(w,g,y,x){var E=vs(y);if(typeof E!="function")throw Error(O(150));if(y=E.call(y),y==null)throw Error(O(151));for(var _=E=null,k=g,j=g=0,T=null,N=y.next();k!==null&&!N.done;j++,N=y.next()){k.index>j?(T=k,k=null):T=k.sibling;var K=f(w,k,N.value,x);if(K===null){k===null&&(k=T);break}t&&k&&K.alternate===null&&e(w,k),g=i(K,g,j),_===null?E=K:_.sibling=K,_=K,k=T}if(N.done)return n(w,k),me&&Hn(w,j),E;if(k===null){for(;!N.done;j++,N=y.next())N=c(w,N.value,x),N!==null&&(g=i(N,g,j),_===null?E=N:_.sibling=N,_=N);return me&&Hn(w,j),E}for(k=r(w,k);!N.done;j++,N=y.next())N=p(k,w,j,N.value,x),N!==null&&(t&&N.alternate!==null&&k.delete(N.key===null?j:N.key),g=i(N,g,j),_===null?E=N:_.sibling=N,_=N);return t&&k.forEach(function(F){return e(w,F)}),me&&Hn(w,j),E}function b(w,g,y,x){if(typeof y=="object"&&y!==null&&y.type===Ar&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Vi:e:{for(var E=y.key,_=g;_!==null;){if(_.key===E){if(E=y.type,E===Ar){if(_.tag===7){n(w,_.sibling),g=s(_,y.props.children),g.return=w,w=g;break e}}else if(_.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===mn&&xh(E)===_.type){n(w,_.sibling),g=s(_,y.props),g.ref=_s(w,_,y),g.return=w,w=g;break e}n(w,_);break}else e(w,_);_=_.sibling}y.type===Ar?(g=ir(y.props.children,w.mode,x,y.key),g.return=w,w=g):(x=ko(y.type,y.key,y.props,null,w.mode,x),x.ref=_s(w,g,y),x.return=w,w=x)}return o(w);case Or:e:{for(_=y.key;g!==null;){if(g.key===_)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(w,g.sibling),g=s(g,y.children||[]),g.return=w,w=g;break e}else{n(w,g);break}else e(w,g);g=g.sibling}g=fl(y,w.mode,x),g.return=w,w=g}return o(w);case mn:return _=y._init,b(w,g,_(y._payload),x)}if(Os(y))return m(w,g,y,x);if(vs(y))return v(w,g,y,x);Xi(w,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(n(w,g.sibling),g=s(g,y),g.return=w,w=g):(n(w,g),g=hl(y,w.mode,x),g.return=w,w=g),o(w)):n(w,g)}return b}var is=hg(!0),fg=hg(!1),Vo=Un(null),Fo=null,Fr=null,$c=null;function Dc(){$c=Fr=Fo=null}function Mc(t){var e=Vo.current;he(Vo),t._currentValue=e}function vu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Zr(t,e){Fo=t,$c=Fr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ot=!0),t.firstContext=null)}function Ct(t){var e=t._currentValue;if($c!==t)if(t={context:t,memoizedValue:e,next:null},Fr===null){if(Fo===null)throw Error(O(308));Fr=t,Fo.dependencies={lanes:0,firstContext:t}}else Fr=Fr.next=t;return e}var er=null;function Uc(t){er===null?er=[t]:er.push(t)}function pg(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Uc(e)):(n.next=s.next,s.next=n),e.interleaved=n,ln(t,r)}function ln(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var gn=!1;function Vc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function nn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Pn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,re&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ln(t,n)}return s=r.interleaved,s===null?(e.next=e,Uc(r)):(e.next=s.next,s.next=e),r.interleaved=e,ln(t,n)}function vo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ec(t,n)}}function bh(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Bo(t,e,n,r){var s=t.updateQueue;gn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(i!==null){var c=s.baseState;o=0,d=u=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,v=a;switch(f=e,p=n,v.tag){case 1:if(m=v.payload,typeof m=="function"){c=m.call(p,c,f);break e}c=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,f=typeof m=="function"?m.call(p,c,f):m,f==null)break e;c=xe({},c,f);break e;case 2:gn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=p,l=c):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=c),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);cr|=o,t.lanes=o,t.memoizedState=c}}function Sh(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(O(191,s));s.call(r)}}}var Oi={},Kt=Un(Oi),di=Un(Oi),hi=Un(Oi);function tr(t){if(t===Oi)throw Error(O(174));return t}function Fc(t,e){switch(ue(hi,e),ue(di,t),ue(Kt,Oi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ql(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ql(e,t)}he(Kt),ue(Kt,e)}function os(){he(Kt),he(di),he(hi)}function gg(t){tr(hi.current);var e=tr(Kt.current),n=Ql(e,t.type);e!==n&&(ue(di,t),ue(Kt,n))}function Bc(t){di.current===t&&(he(Kt),he(di))}var ye=Un(0);function zo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ol=[];function zc(){for(var t=0;t<ol.length;t++)ol[t]._workInProgressVersionPrimary=null;ol.length=0}var wo=dn.ReactCurrentDispatcher,al=dn.ReactCurrentBatchConfig,ur=0,we=null,Ie=null,Me=null,Wo=!1,Bs=!1,fi=0,gx=0;function qe(){throw Error(O(321))}function Wc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Vt(t[n],e[n]))return!1;return!0}function Hc(t,e,n,r,s,i){if(ur=i,we=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wo.current=t===null||t.memoizedState===null?xx:bx,t=n(r,s),Bs){i=0;do{if(Bs=!1,fi=0,25<=i)throw Error(O(301));i+=1,Me=Ie=null,e.updateQueue=null,wo.current=Sx,t=n(r,s)}while(Bs)}if(wo.current=Ho,e=Ie!==null&&Ie.next!==null,ur=0,Me=Ie=we=null,Wo=!1,e)throw Error(O(300));return t}function Kc(){var t=fi!==0;return fi=0,t}function Bt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Me===null?we.memoizedState=Me=t:Me=Me.next=t,Me}function Nt(){if(Ie===null){var t=we.alternate;t=t!==null?t.memoizedState:null}else t=Ie.next;var e=Me===null?we.memoizedState:Me.next;if(e!==null)Me=e,Ie=t;else{if(t===null)throw Error(O(310));Ie=t,t={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},Me===null?we.memoizedState=Me=t:Me=Me.next=t}return Me}function pi(t,e){return typeof e=="function"?e(t):e}function ll(t){var e=Nt(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=Ie,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var d=u.lane;if((ur&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var c={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=c,o=r):l=l.next=c,we.lanes|=d,cr|=d}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,Vt(r,e.memoizedState)||(ot=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,we.lanes|=i,cr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ul(t){var e=Nt(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Vt(i,e.memoizedState)||(ot=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function yg(){}function vg(t,e){var n=we,r=Nt(),s=e(),i=!Vt(r.memoizedState,s);if(i&&(r.memoizedState=s,ot=!0),r=r.queue,qc(bg.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Me!==null&&Me.memoizedState.tag&1){if(n.flags|=2048,mi(9,xg.bind(null,n,r,s,e),void 0,null),Ue===null)throw Error(O(349));ur&30||wg(n,e,s)}return s}function wg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=we.updateQueue,e===null?(e={lastEffect:null,stores:null},we.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function xg(t,e,n,r){e.value=n,e.getSnapshot=r,Sg(e)&&_g(t)}function bg(t,e,n){return n(function(){Sg(e)&&_g(t)})}function Sg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Vt(t,n)}catch{return!0}}function _g(t){var e=ln(t,1);e!==null&&Ut(e,t,1,-1)}function _h(t){var e=Bt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:t},e.queue=t,t=t.dispatch=wx.bind(null,we,t),[e.memoizedState,t]}function mi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=we.updateQueue,e===null?(e={lastEffect:null,stores:null},we.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function kg(){return Nt().memoizedState}function xo(t,e,n,r){var s=Bt();we.flags|=t,s.memoizedState=mi(1|e,n,void 0,r===void 0?null:r)}function ba(t,e,n,r){var s=Nt();r=r===void 0?null:r;var i=void 0;if(Ie!==null){var o=Ie.memoizedState;if(i=o.destroy,r!==null&&Wc(r,o.deps)){s.memoizedState=mi(e,n,i,r);return}}we.flags|=t,s.memoizedState=mi(1|e,n,i,r)}function kh(t,e){return xo(8390656,8,t,e)}function qc(t,e){return ba(2048,8,t,e)}function Eg(t,e){return ba(4,2,t,e)}function Tg(t,e){return ba(4,4,t,e)}function jg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Pg(t,e,n){return n=n!=null?n.concat([t]):null,ba(4,4,jg.bind(null,e,t),n)}function Gc(){}function Cg(t,e){var n=Nt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wc(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ng(t,e){var n=Nt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wc(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Rg(t,e,n){return ur&21?(Vt(n,e)||(n=$m(),we.lanes|=n,cr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ot=!0),t.memoizedState=n)}function yx(t,e){var n=oe;oe=n!==0&&4>n?n:4,t(!0);var r=al.transition;al.transition={};try{t(!1),e()}finally{oe=n,al.transition=r}}function Og(){return Nt().memoizedState}function vx(t,e,n){var r=Nn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ag(t))Lg(e,n);else if(n=pg(t,e,n,r),n!==null){var s=tt();Ut(n,t,r,s),Ig(n,e,r)}}function wx(t,e,n){var r=Nn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ag(t))Lg(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Vt(a,o)){var l=e.interleaved;l===null?(s.next=s,Uc(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=pg(t,e,s,r),n!==null&&(s=tt(),Ut(n,t,r,s),Ig(n,e,r))}}function Ag(t){var e=t.alternate;return t===we||e!==null&&e===we}function Lg(t,e){Bs=Wo=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ig(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ec(t,n)}}var Ho={readContext:Ct,useCallback:qe,useContext:qe,useEffect:qe,useImperativeHandle:qe,useInsertionEffect:qe,useLayoutEffect:qe,useMemo:qe,useReducer:qe,useRef:qe,useState:qe,useDebugValue:qe,useDeferredValue:qe,useTransition:qe,useMutableSource:qe,useSyncExternalStore:qe,useId:qe,unstable_isNewReconciler:!1},xx={readContext:Ct,useCallback:function(t,e){return Bt().memoizedState=[t,e===void 0?null:e],t},useContext:Ct,useEffect:kh,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xo(4194308,4,jg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xo(4194308,4,t,e)},useInsertionEffect:function(t,e){return xo(4,2,t,e)},useMemo:function(t,e){var n=Bt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Bt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=vx.bind(null,we,t),[r.memoizedState,t]},useRef:function(t){var e=Bt();return t={current:t},e.memoizedState=t},useState:_h,useDebugValue:Gc,useDeferredValue:function(t){return Bt().memoizedState=t},useTransition:function(){var t=_h(!1),e=t[0];return t=yx.bind(null,t[1]),Bt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=we,s=Bt();if(me){if(n===void 0)throw Error(O(407));n=n()}else{if(n=e(),Ue===null)throw Error(O(349));ur&30||wg(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,kh(bg.bind(null,r,i,t),[t]),r.flags|=2048,mi(9,xg.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Bt(),e=Ue.identifierPrefix;if(me){var n=en,r=Zt;n=(r&~(1<<32-Mt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=fi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=gx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},bx={readContext:Ct,useCallback:Cg,useContext:Ct,useEffect:qc,useImperativeHandle:Pg,useInsertionEffect:Eg,useLayoutEffect:Tg,useMemo:Ng,useReducer:ll,useRef:kg,useState:function(){return ll(pi)},useDebugValue:Gc,useDeferredValue:function(t){var e=Nt();return Rg(e,Ie.memoizedState,t)},useTransition:function(){var t=ll(pi)[0],e=Nt().memoizedState;return[t,e]},useMutableSource:yg,useSyncExternalStore:vg,useId:Og,unstable_isNewReconciler:!1},Sx={readContext:Ct,useCallback:Cg,useContext:Ct,useEffect:qc,useImperativeHandle:Pg,useInsertionEffect:Eg,useLayoutEffect:Tg,useMemo:Ng,useReducer:ul,useRef:kg,useState:function(){return ul(pi)},useDebugValue:Gc,useDeferredValue:function(t){var e=Nt();return Ie===null?e.memoizedState=t:Rg(e,Ie.memoizedState,t)},useTransition:function(){var t=ul(pi)[0],e=Nt().memoizedState;return[t,e]},useMutableSource:yg,useSyncExternalStore:vg,useId:Og,unstable_isNewReconciler:!1};function At(t,e){if(t&&t.defaultProps){e=xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function wu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Sa={isMounted:function(t){return(t=t._reactInternals)?mr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=tt(),s=Nn(t),i=nn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Pn(t,i,s),e!==null&&(Ut(e,t,s,r),vo(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=tt(),s=Nn(t),i=nn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Pn(t,i,s),e!==null&&(Ut(e,t,s,r),vo(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=tt(),r=Nn(t),s=nn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Pn(t,s,r),e!==null&&(Ut(e,t,r,n),vo(e,t,r))}};function Eh(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ai(n,r)||!ai(s,i):!0}function $g(t,e,n){var r=!1,s=Ln,i=e.contextType;return typeof i=="object"&&i!==null?i=Ct(i):(s=lt(e)?ar:Xe.current,r=e.contextTypes,i=(r=r!=null)?rs(t,s):Ln),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Sa,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Th(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Sa.enqueueReplaceState(e,e.state,null)}function xu(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Vc(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ct(i):(i=lt(e)?ar:Xe.current,s.context=rs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(wu(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Sa.enqueueReplaceState(s,s.state,null),Bo(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function as(t,e){try{var n="",r=e;do n+=Yv(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function cl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function bu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var _x=typeof WeakMap=="function"?WeakMap:Map;function Dg(t,e,n){n=nn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){qo||(qo=!0,Ru=r),bu(t,e)},n}function Mg(t,e,n){n=nn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){bu(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){bu(t,e),typeof r!="function"&&(Cn===null?Cn=new Set([this]):Cn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function jh(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new _x;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Dx.bind(null,t,e,n),e.then(t,t))}function Ph(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ch(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=nn(-1,1),e.tag=2,Pn(n,e,1))),n.lanes|=1),t)}var kx=dn.ReactCurrentOwner,ot=!1;function et(t,e,n,r){e.child=t===null?fg(e,null,n,r):is(e,t.child,n,r)}function Nh(t,e,n,r,s){n=n.render;var i=e.ref;return Zr(e,s),r=Hc(t,e,n,r,i,s),n=Kc(),t!==null&&!ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,un(t,e,s)):(me&&n&&Ac(e),e.flags|=1,et(t,e,r,s),e.child)}function Rh(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!nd(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Ug(t,e,i,r,s)):(t=ko(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ai,n(o,r)&&t.ref===e.ref)return un(t,e,s)}return e.flags|=1,t=Rn(i,r),t.ref=e.ref,t.return=e,e.child=t}function Ug(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ai(i,r)&&t.ref===e.ref)if(ot=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(ot=!0);else return e.lanes=t.lanes,un(t,e,s)}return Su(t,e,n,r,s)}function Vg(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ue(zr,ft),ft|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ue(zr,ft),ft|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ue(zr,ft),ft|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ue(zr,ft),ft|=r;return et(t,e,s,n),e.child}function Fg(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Su(t,e,n,r,s){var i=lt(n)?ar:Xe.current;return i=rs(e,i),Zr(e,s),n=Hc(t,e,n,r,i,s),r=Kc(),t!==null&&!ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,un(t,e,s)):(me&&r&&Ac(e),e.flags|=1,et(t,e,n,s),e.child)}function Oh(t,e,n,r,s){if(lt(n)){var i=!0;Do(e)}else i=!1;if(Zr(e,s),e.stateNode===null)bo(t,e),$g(e,n,r),xu(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ct(u):(u=lt(n)?ar:Xe.current,u=rs(e,u));var d=n.getDerivedStateFromProps,c=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";c||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Th(e,o,r,u),gn=!1;var f=e.memoizedState;o.state=f,Bo(e,r,o,s),l=e.memoizedState,a!==r||f!==l||at.current||gn?(typeof d=="function"&&(wu(e,n,d,r),l=e.memoizedState),(a=gn||Eh(e,n,a,r,f,l,u))?(c||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,mg(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:At(e.type,a),o.props=u,c=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ct(l):(l=lt(n)?ar:Xe.current,l=rs(e,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==c||f!==l)&&Th(e,o,r,l),gn=!1,f=e.memoizedState,o.state=f,Bo(e,r,o,s);var m=e.memoizedState;a!==c||f!==m||at.current||gn?(typeof p=="function"&&(wu(e,n,p,r),m=e.memoizedState),(u=gn||Eh(e,n,u,r,f,m,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return _u(t,e,n,r,i,s)}function _u(t,e,n,r,s,i){Fg(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&yh(e,n,!1),un(t,e,i);r=e.stateNode,kx.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=is(e,t.child,null,i),e.child=is(e,null,a,i)):et(t,e,a,i),e.memoizedState=r.state,s&&yh(e,n,!0),e.child}function Bg(t){var e=t.stateNode;e.pendingContext?gh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&gh(t,e.context,!1),Fc(t,e.containerInfo)}function Ah(t,e,n,r,s){return ss(),Ic(s),e.flags|=256,et(t,e,n,r),e.child}var ku={dehydrated:null,treeContext:null,retryLane:0};function Eu(t){return{baseLanes:t,cachePool:null,transitions:null}}function zg(t,e,n){var r=e.pendingProps,s=ye.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ue(ye,s&1),t===null)return yu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ea(o,r,0,null),t=ir(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Eu(n),e.memoizedState=ku,t):Jc(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Ex(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Rn(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Rn(a,i):(i=ir(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Eu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=ku,r}return i=t.child,t=i.sibling,r=Rn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Jc(t,e){return e=Ea({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Qi(t,e,n,r){return r!==null&&Ic(r),is(e,t.child,null,n),t=Jc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ex(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=cl(Error(O(422))),Qi(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Ea({mode:"visible",children:r.children},s,0,null),i=ir(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&is(e,t.child,null,o),e.child.memoizedState=Eu(o),e.memoizedState=ku,i);if(!(e.mode&1))return Qi(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(O(419)),r=cl(i,r,void 0),Qi(t,e,o,r)}if(a=(o&t.childLanes)!==0,ot||a){if(r=Ue,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ln(t,s),Ut(r,t,s,-1))}return td(),r=cl(Error(O(421))),Qi(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Mx.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,gt=jn(s.nextSibling),yt=e,me=!0,Dt=null,t!==null&&(kt[Et++]=Zt,kt[Et++]=en,kt[Et++]=lr,Zt=t.id,en=t.overflow,lr=e),e=Jc(e,r.children),e.flags|=4096,e)}function Lh(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),vu(t.return,e,n)}function dl(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Wg(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(et(t,e,r.children,n),r=ye.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Lh(t,n,e);else if(t.tag===19)Lh(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ue(ye,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&zo(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),dl(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&zo(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}dl(e,!0,n,null,i);break;case"together":dl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function bo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function un(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),cr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(O(153));if(e.child!==null){for(t=e.child,n=Rn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Rn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Tx(t,e,n){switch(e.tag){case 3:Bg(e),ss();break;case 5:gg(e);break;case 1:lt(e.type)&&Do(e);break;case 4:Fc(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ue(Vo,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ue(ye,ye.current&1),e.flags|=128,null):n&e.child.childLanes?zg(t,e,n):(ue(ye,ye.current&1),t=un(t,e,n),t!==null?t.sibling:null);ue(ye,ye.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Wg(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ue(ye,ye.current),r)break;return null;case 22:case 23:return e.lanes=0,Vg(t,e,n)}return un(t,e,n)}var Hg,Tu,Kg,qg;Hg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Tu=function(){};Kg=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,tr(Kt.current);var i=null;switch(n){case"input":s=Gl(t,s),r=Gl(t,r),i=[];break;case"select":s=xe({},s,{value:void 0}),r=xe({},r,{value:void 0}),i=[];break;case"textarea":s=Xl(t,s),r=Xl(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Io)}Zl(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ei.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ei.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&de("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};qg=function(t,e,n,r){n!==r&&(e.flags|=4)};function ks(t,e){if(!me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ge(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function jx(t,e,n){var r=e.pendingProps;switch(Lc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ge(e),null;case 1:return lt(e.type)&&$o(),Ge(e),null;case 3:return r=e.stateNode,os(),he(at),he(Xe),zc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Yi(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Dt!==null&&(Lu(Dt),Dt=null))),Tu(t,e),Ge(e),null;case 5:Bc(e);var s=tr(hi.current);if(n=e.type,t!==null&&e.stateNode!=null)Kg(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(O(166));return Ge(e),null}if(t=tr(Kt.current),Yi(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[zt]=e,r[ci]=i,t=(e.mode&1)!==0,n){case"dialog":de("cancel",r),de("close",r);break;case"iframe":case"object":case"embed":de("load",r);break;case"video":case"audio":for(s=0;s<Ls.length;s++)de(Ls[s],r);break;case"source":de("error",r);break;case"img":case"image":case"link":de("error",r),de("load",r);break;case"details":de("toggle",r);break;case"input":zd(r,i),de("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},de("invalid",r);break;case"textarea":Hd(r,i),de("invalid",r)}Zl(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Ji(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Ji(r.textContent,a,t),s=["children",""+a]):ei.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&de("scroll",r)}switch(n){case"input":Fi(r),Wd(r,i,!0);break;case"textarea":Fi(r),Kd(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Io)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=bm(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[zt]=e,t[ci]=r,Hg(t,e,!1,!1),e.stateNode=t;e:{switch(o=eu(n,r),n){case"dialog":de("cancel",t),de("close",t),s=r;break;case"iframe":case"object":case"embed":de("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ls.length;s++)de(Ls[s],t);s=r;break;case"source":de("error",t),s=r;break;case"img":case"image":case"link":de("error",t),de("load",t),s=r;break;case"details":de("toggle",t),s=r;break;case"input":zd(t,r),s=Gl(t,r),de("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=xe({},r,{value:void 0}),de("invalid",t);break;case"textarea":Hd(t,r),s=Xl(t,r),de("invalid",t);break;default:s=r}Zl(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?km(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Sm(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ti(t,l):typeof l=="number"&&ti(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ei.hasOwnProperty(i)?l!=null&&i==="onScroll"&&de("scroll",t):l!=null&&wc(t,i,l,o))}switch(n){case"input":Fi(t),Wd(t,r,!1);break;case"textarea":Fi(t),Kd(t);break;case"option":r.value!=null&&t.setAttribute("value",""+An(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Jr(t,!!r.multiple,i,!1):r.defaultValue!=null&&Jr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Io)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ge(e),null;case 6:if(t&&e.stateNode!=null)qg(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(O(166));if(n=tr(hi.current),tr(Kt.current),Yi(e)){if(r=e.stateNode,n=e.memoizedProps,r[zt]=e,(i=r.nodeValue!==n)&&(t=yt,t!==null))switch(t.tag){case 3:Ji(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ji(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[zt]=e,e.stateNode=r}return Ge(e),null;case 13:if(he(ye),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(me&&gt!==null&&e.mode&1&&!(e.flags&128))dg(),ss(),e.flags|=98560,i=!1;else if(i=Yi(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(O(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(O(317));i[zt]=e}else ss(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ge(e),i=!1}else Dt!==null&&(Lu(Dt),Dt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ye.current&1?$e===0&&($e=3):td())),e.updateQueue!==null&&(e.flags|=4),Ge(e),null);case 4:return os(),Tu(t,e),t===null&&li(e.stateNode.containerInfo),Ge(e),null;case 10:return Mc(e.type._context),Ge(e),null;case 17:return lt(e.type)&&$o(),Ge(e),null;case 19:if(he(ye),i=e.memoizedState,i===null)return Ge(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ks(i,!1);else{if($e!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=zo(t),o!==null){for(e.flags|=128,ks(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ue(ye,ye.current&1|2),e.child}t=t.sibling}i.tail!==null&&je()>ls&&(e.flags|=128,r=!0,ks(i,!1),e.lanes=4194304)}else{if(!r)if(t=zo(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ks(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!me)return Ge(e),null}else 2*je()-i.renderingStartTime>ls&&n!==1073741824&&(e.flags|=128,r=!0,ks(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=je(),e.sibling=null,n=ye.current,ue(ye,r?n&1|2:n&1),e):(Ge(e),null);case 22:case 23:return ed(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ft&1073741824&&(Ge(e),e.subtreeFlags&6&&(e.flags|=8192)):Ge(e),null;case 24:return null;case 25:return null}throw Error(O(156,e.tag))}function Px(t,e){switch(Lc(e),e.tag){case 1:return lt(e.type)&&$o(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return os(),he(at),he(Xe),zc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Bc(e),null;case 13:if(he(ye),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(O(340));ss()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return he(ye),null;case 4:return os(),null;case 10:return Mc(e.type._context),null;case 22:case 23:return ed(),null;case 24:return null;default:return null}}var Zi=!1,Ye=!1,Cx=typeof WeakSet=="function"?WeakSet:Set,B=null;function Br(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ke(t,e,r)}else n.current=null}function ju(t,e,n){try{n()}catch(r){ke(t,e,r)}}var Ih=!1;function Nx(t,e){if(cu=Oo,t=Qm(),Oc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,c=t,f=null;t:for(;;){for(var p;c!==n||s!==0&&c.nodeType!==3||(a=o+s),c!==i||r!==0&&c.nodeType!==3||(l=o+r),c.nodeType===3&&(o+=c.nodeValue.length),(p=c.firstChild)!==null;)f=c,c=p;for(;;){if(c===t)break t;if(f===n&&++u===s&&(a=o),f===i&&++d===r&&(l=o),(p=c.nextSibling)!==null)break;c=f,f=c.parentNode}c=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(du={focusedElem:t,selectionRange:n},Oo=!1,B=e;B!==null;)if(e=B,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,B=t;else for(;B!==null;){e=B;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,b=m.memoizedState,w=e.stateNode,g=w.getSnapshotBeforeUpdate(e.elementType===e.type?v:At(e.type,v),b);w.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(x){ke(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,B=t;break}B=e.return}return m=Ih,Ih=!1,m}function zs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&ju(e,n,i)}s=s.next}while(s!==r)}}function _a(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Pu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Gg(t){var e=t.alternate;e!==null&&(t.alternate=null,Gg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[zt],delete e[ci],delete e[pu],delete e[hx],delete e[fx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Jg(t){return t.tag===5||t.tag===3||t.tag===4}function $h(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Jg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Cu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Io));else if(r!==4&&(t=t.child,t!==null))for(Cu(t,e,n),t=t.sibling;t!==null;)Cu(t,e,n),t=t.sibling}function Nu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Nu(t,e,n),t=t.sibling;t!==null;)Nu(t,e,n),t=t.sibling}var Be=null,It=!1;function fn(t,e,n){for(n=n.child;n!==null;)Yg(t,e,n),n=n.sibling}function Yg(t,e,n){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(ma,n)}catch{}switch(n.tag){case 5:Ye||Br(n,e);case 6:var r=Be,s=It;Be=null,fn(t,e,n),Be=r,It=s,Be!==null&&(It?(t=Be,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Be.removeChild(n.stateNode));break;case 18:Be!==null&&(It?(t=Be,n=n.stateNode,t.nodeType===8?sl(t.parentNode,n):t.nodeType===1&&sl(t,n),ii(t)):sl(Be,n.stateNode));break;case 4:r=Be,s=It,Be=n.stateNode.containerInfo,It=!0,fn(t,e,n),Be=r,It=s;break;case 0:case 11:case 14:case 15:if(!Ye&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ju(n,e,o),s=s.next}while(s!==r)}fn(t,e,n);break;case 1:if(!Ye&&(Br(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ke(n,e,a)}fn(t,e,n);break;case 21:fn(t,e,n);break;case 22:n.mode&1?(Ye=(r=Ye)||n.memoizedState!==null,fn(t,e,n),Ye=r):fn(t,e,n);break;default:fn(t,e,n)}}function Dh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Cx),e.forEach(function(r){var s=Ux.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Rt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Be=a.stateNode,It=!1;break e;case 3:Be=a.stateNode.containerInfo,It=!0;break e;case 4:Be=a.stateNode.containerInfo,It=!0;break e}a=a.return}if(Be===null)throw Error(O(160));Yg(i,o,s),Be=null,It=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){ke(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Xg(e,t),e=e.sibling}function Xg(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Rt(e,t),Ft(t),r&4){try{zs(3,t,t.return),_a(3,t)}catch(v){ke(t,t.return,v)}try{zs(5,t,t.return)}catch(v){ke(t,t.return,v)}}break;case 1:Rt(e,t),Ft(t),r&512&&n!==null&&Br(n,n.return);break;case 5:if(Rt(e,t),Ft(t),r&512&&n!==null&&Br(n,n.return),t.flags&32){var s=t.stateNode;try{ti(s,"")}catch(v){ke(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&wm(s,i),eu(a,o);var u=eu(a,i);for(o=0;o<l.length;o+=2){var d=l[o],c=l[o+1];d==="style"?km(s,c):d==="dangerouslySetInnerHTML"?Sm(s,c):d==="children"?ti(s,c):wc(s,d,c,u)}switch(a){case"input":Jl(s,i);break;case"textarea":xm(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Jr(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?Jr(s,!!i.multiple,i.defaultValue,!0):Jr(s,!!i.multiple,i.multiple?[]:"",!1))}s[ci]=i}catch(v){ke(t,t.return,v)}}break;case 6:if(Rt(e,t),Ft(t),r&4){if(t.stateNode===null)throw Error(O(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){ke(t,t.return,v)}}break;case 3:if(Rt(e,t),Ft(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ii(e.containerInfo)}catch(v){ke(t,t.return,v)}break;case 4:Rt(e,t),Ft(t);break;case 13:Rt(e,t),Ft(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Qc=je())),r&4&&Dh(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ye=(u=Ye)||d,Rt(e,t),Ye=u):Rt(e,t),Ft(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(B=t,d=t.child;d!==null;){for(c=B=d;B!==null;){switch(f=B,p=f.child,f.tag){case 0:case 11:case 14:case 15:zs(4,f,f.return);break;case 1:Br(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(v){ke(r,n,v)}}break;case 5:Br(f,f.return);break;case 22:if(f.memoizedState!==null){Uh(c);continue}}p!==null?(p.return=f,B=p):Uh(c)}d=d.sibling}e:for(d=null,c=t;;){if(c.tag===5){if(d===null){d=c;try{s=c.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=c.stateNode,l=c.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=_m("display",o))}catch(v){ke(t,t.return,v)}}}else if(c.tag===6){if(d===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(v){ke(t,t.return,v)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===t)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;d===c&&(d=null),c=c.return}d===c&&(d=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:Rt(e,t),Ft(t),r&4&&Dh(t);break;case 21:break;default:Rt(e,t),Ft(t)}}function Ft(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Jg(n)){var r=n;break e}n=n.return}throw Error(O(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ti(s,""),r.flags&=-33);var i=$h(t);Nu(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=$h(t);Cu(t,a,o);break;default:throw Error(O(161))}}catch(l){ke(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Rx(t,e,n){B=t,Qg(t)}function Qg(t,e,n){for(var r=(t.mode&1)!==0;B!==null;){var s=B,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Zi;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Ye;a=Zi;var u=Ye;if(Zi=o,(Ye=l)&&!u)for(B=s;B!==null;)o=B,l=o.child,o.tag===22&&o.memoizedState!==null?Vh(s):l!==null?(l.return=o,B=l):Vh(s);for(;i!==null;)B=i,Qg(i),i=i.sibling;B=s,Zi=a,Ye=u}Mh(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,B=i):Mh(t)}}function Mh(t){for(;B!==null;){var e=B;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ye||_a(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ye)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:At(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Sh(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Sh(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var c=d.dehydrated;c!==null&&ii(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}Ye||e.flags&512&&Pu(e)}catch(f){ke(e,e.return,f)}}if(e===t){B=null;break}if(n=e.sibling,n!==null){n.return=e.return,B=n;break}B=e.return}}function Uh(t){for(;B!==null;){var e=B;if(e===t){B=null;break}var n=e.sibling;if(n!==null){n.return=e.return,B=n;break}B=e.return}}function Vh(t){for(;B!==null;){var e=B;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{_a(4,e)}catch(l){ke(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){ke(e,s,l)}}var i=e.return;try{Pu(e)}catch(l){ke(e,i,l)}break;case 5:var o=e.return;try{Pu(e)}catch(l){ke(e,o,l)}}}catch(l){ke(e,e.return,l)}if(e===t){B=null;break}var a=e.sibling;if(a!==null){a.return=e.return,B=a;break}B=e.return}}var Ox=Math.ceil,Ko=dn.ReactCurrentDispatcher,Yc=dn.ReactCurrentOwner,jt=dn.ReactCurrentBatchConfig,re=0,Ue=null,Oe=null,We=0,ft=0,zr=Un(0),$e=0,gi=null,cr=0,ka=0,Xc=0,Ws=null,it=null,Qc=0,ls=1/0,Yt=null,qo=!1,Ru=null,Cn=null,eo=!1,_n=null,Go=0,Hs=0,Ou=null,So=-1,_o=0;function tt(){return re&6?je():So!==-1?So:So=je()}function Nn(t){return t.mode&1?re&2&&We!==0?We&-We:mx.transition!==null?(_o===0&&(_o=$m()),_o):(t=oe,t!==0||(t=window.event,t=t===void 0?16:zm(t.type)),t):1}function Ut(t,e,n,r){if(50<Hs)throw Hs=0,Ou=null,Error(O(185));Ci(t,n,r),(!(re&2)||t!==Ue)&&(t===Ue&&(!(re&2)&&(ka|=n),$e===4&&xn(t,We)),ut(t,r),n===1&&re===0&&!(e.mode&1)&&(ls=je()+500,xa&&Vn()))}function ut(t,e){var n=t.callbackNode;mw(t,e);var r=Ro(t,t===Ue?We:0);if(r===0)n!==null&&Jd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Jd(n),e===1)t.tag===0?px(Fh.bind(null,t)):lg(Fh.bind(null,t)),cx(function(){!(re&6)&&Vn()}),n=null;else{switch(Dm(r)){case 1:n=kc;break;case 4:n=Lm;break;case 16:n=No;break;case 536870912:n=Im;break;default:n=No}n=oy(n,Zg.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Zg(t,e){if(So=-1,_o=0,re&6)throw Error(O(327));var n=t.callbackNode;if(es()&&t.callbackNode!==n)return null;var r=Ro(t,t===Ue?We:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Jo(t,r);else{e=r;var s=re;re|=2;var i=ty();(Ue!==t||We!==e)&&(Yt=null,ls=je()+500,sr(t,e));do try{Ix();break}catch(a){ey(t,a)}while(!0);Dc(),Ko.current=i,re=s,Oe!==null?e=0:(Ue=null,We=0,e=$e)}if(e!==0){if(e===2&&(s=iu(t),s!==0&&(r=s,e=Au(t,s))),e===1)throw n=gi,sr(t,0),xn(t,r),ut(t,je()),n;if(e===6)xn(t,r);else{if(s=t.current.alternate,!(r&30)&&!Ax(s)&&(e=Jo(t,r),e===2&&(i=iu(t),i!==0&&(r=i,e=Au(t,i))),e===1))throw n=gi,sr(t,0),xn(t,r),ut(t,je()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(O(345));case 2:Kn(t,it,Yt);break;case 3:if(xn(t,r),(r&130023424)===r&&(e=Qc+500-je(),10<e)){if(Ro(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){tt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=fu(Kn.bind(null,t,it,Yt),e);break}Kn(t,it,Yt);break;case 4:if(xn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Mt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ox(r/1960))-r,10<r){t.timeoutHandle=fu(Kn.bind(null,t,it,Yt),r);break}Kn(t,it,Yt);break;case 5:Kn(t,it,Yt);break;default:throw Error(O(329))}}}return ut(t,je()),t.callbackNode===n?Zg.bind(null,t):null}function Au(t,e){var n=Ws;return t.current.memoizedState.isDehydrated&&(sr(t,e).flags|=256),t=Jo(t,e),t!==2&&(e=it,it=n,e!==null&&Lu(e)),t}function Lu(t){it===null?it=t:it.push.apply(it,t)}function Ax(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Vt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xn(t,e){for(e&=~Xc,e&=~ka,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Mt(e),r=1<<n;t[n]=-1,e&=~r}}function Fh(t){if(re&6)throw Error(O(327));es();var e=Ro(t,0);if(!(e&1))return ut(t,je()),null;var n=Jo(t,e);if(t.tag!==0&&n===2){var r=iu(t);r!==0&&(e=r,n=Au(t,r))}if(n===1)throw n=gi,sr(t,0),xn(t,e),ut(t,je()),n;if(n===6)throw Error(O(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Kn(t,it,Yt),ut(t,je()),null}function Zc(t,e){var n=re;re|=1;try{return t(e)}finally{re=n,re===0&&(ls=je()+500,xa&&Vn())}}function dr(t){_n!==null&&_n.tag===0&&!(re&6)&&es();var e=re;re|=1;var n=jt.transition,r=oe;try{if(jt.transition=null,oe=1,t)return t()}finally{oe=r,jt.transition=n,re=e,!(re&6)&&Vn()}}function ed(){ft=zr.current,he(zr)}function sr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ux(n)),Oe!==null)for(n=Oe.return;n!==null;){var r=n;switch(Lc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&$o();break;case 3:os(),he(at),he(Xe),zc();break;case 5:Bc(r);break;case 4:os();break;case 13:he(ye);break;case 19:he(ye);break;case 10:Mc(r.type._context);break;case 22:case 23:ed()}n=n.return}if(Ue=t,Oe=t=Rn(t.current,null),We=ft=e,$e=0,gi=null,Xc=ka=cr=0,it=Ws=null,er!==null){for(e=0;e<er.length;e++)if(n=er[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}er=null}return t}function ey(t,e){do{var n=Oe;try{if(Dc(),wo.current=Ho,Wo){for(var r=we.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Wo=!1}if(ur=0,Me=Ie=we=null,Bs=!1,fi=0,Yc.current=null,n===null||n.return===null){$e=1,gi=e,Oe=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=We,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,c=d.tag;if(!(d.mode&1)&&(c===0||c===11||c===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Ph(o);if(p!==null){p.flags&=-257,Ch(p,o,a,i,e),p.mode&1&&jh(i,u,e),e=p,l=u;var m=e.updateQueue;if(m===null){var v=new Set;v.add(l),e.updateQueue=v}else m.add(l);break e}else{if(!(e&1)){jh(i,u,e),td();break e}l=Error(O(426))}}else if(me&&a.mode&1){var b=Ph(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Ch(b,o,a,i,e),Ic(as(l,a));break e}}i=l=as(l,a),$e!==4&&($e=2),Ws===null?Ws=[i]:Ws.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=Dg(i,l,e);bh(i,w);break e;case 1:a=l;var g=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Cn===null||!Cn.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=Mg(i,a,e);bh(i,x);break e}}i=i.return}while(i!==null)}ry(n)}catch(E){e=E,Oe===n&&n!==null&&(Oe=n=n.return);continue}break}while(!0)}function ty(){var t=Ko.current;return Ko.current=Ho,t===null?Ho:t}function td(){($e===0||$e===3||$e===2)&&($e=4),Ue===null||!(cr&268435455)&&!(ka&268435455)||xn(Ue,We)}function Jo(t,e){var n=re;re|=2;var r=ty();(Ue!==t||We!==e)&&(Yt=null,sr(t,e));do try{Lx();break}catch(s){ey(t,s)}while(!0);if(Dc(),re=n,Ko.current=r,Oe!==null)throw Error(O(261));return Ue=null,We=0,$e}function Lx(){for(;Oe!==null;)ny(Oe)}function Ix(){for(;Oe!==null&&!ow();)ny(Oe)}function ny(t){var e=iy(t.alternate,t,ft);t.memoizedProps=t.pendingProps,e===null?ry(t):Oe=e,Yc.current=null}function ry(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Px(n,e),n!==null){n.flags&=32767,Oe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{$e=6,Oe=null;return}}else if(n=jx(n,e,ft),n!==null){Oe=n;return}if(e=e.sibling,e!==null){Oe=e;return}Oe=e=t}while(e!==null);$e===0&&($e=5)}function Kn(t,e,n){var r=oe,s=jt.transition;try{jt.transition=null,oe=1,$x(t,e,n,r)}finally{jt.transition=s,oe=r}return null}function $x(t,e,n,r){do es();while(_n!==null);if(re&6)throw Error(O(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(O(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(gw(t,i),t===Ue&&(Oe=Ue=null,We=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||eo||(eo=!0,oy(No,function(){return es(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=jt.transition,jt.transition=null;var o=oe;oe=1;var a=re;re|=4,Yc.current=null,Nx(t,n),Xg(n,t),nx(du),Oo=!!cu,du=cu=null,t.current=n,Rx(n),aw(),re=a,oe=o,jt.transition=i}else t.current=n;if(eo&&(eo=!1,_n=t,Go=s),i=t.pendingLanes,i===0&&(Cn=null),cw(n.stateNode),ut(t,je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(qo)throw qo=!1,t=Ru,Ru=null,t;return Go&1&&t.tag!==0&&es(),i=t.pendingLanes,i&1?t===Ou?Hs++:(Hs=0,Ou=t):Hs=0,Vn(),null}function es(){if(_n!==null){var t=Dm(Go),e=jt.transition,n=oe;try{if(jt.transition=null,oe=16>t?16:t,_n===null)var r=!1;else{if(t=_n,_n=null,Go=0,re&6)throw Error(O(331));var s=re;for(re|=4,B=t.current;B!==null;){var i=B,o=i.child;if(B.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(B=u;B!==null;){var d=B;switch(d.tag){case 0:case 11:case 15:zs(8,d,i)}var c=d.child;if(c!==null)c.return=d,B=c;else for(;B!==null;){d=B;var f=d.sibling,p=d.return;if(Gg(d),d===u){B=null;break}if(f!==null){f.return=p,B=f;break}B=p}}}var m=i.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}B=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,B=o;else e:for(;B!==null;){if(i=B,i.flags&2048)switch(i.tag){case 0:case 11:case 15:zs(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,B=w;break e}B=i.return}}var g=t.current;for(B=g;B!==null;){o=B;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,B=y;else e:for(o=g;B!==null;){if(a=B,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:_a(9,a)}}catch(E){ke(a,a.return,E)}if(a===o){B=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,B=x;break e}B=a.return}}if(re=s,Vn(),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(ma,t)}catch{}r=!0}return r}finally{oe=n,jt.transition=e}}return!1}function Bh(t,e,n){e=as(n,e),e=Dg(t,e,1),t=Pn(t,e,1),e=tt(),t!==null&&(Ci(t,1,e),ut(t,e))}function ke(t,e,n){if(t.tag===3)Bh(t,t,n);else for(;e!==null;){if(e.tag===3){Bh(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Cn===null||!Cn.has(r))){t=as(n,t),t=Mg(e,t,1),e=Pn(e,t,1),t=tt(),e!==null&&(Ci(e,1,t),ut(e,t));break}}e=e.return}}function Dx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=tt(),t.pingedLanes|=t.suspendedLanes&n,Ue===t&&(We&n)===n&&($e===4||$e===3&&(We&130023424)===We&&500>je()-Qc?sr(t,0):Xc|=n),ut(t,e)}function sy(t,e){e===0&&(t.mode&1?(e=Wi,Wi<<=1,!(Wi&130023424)&&(Wi=4194304)):e=1);var n=tt();t=ln(t,e),t!==null&&(Ci(t,e,n),ut(t,n))}function Mx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),sy(t,n)}function Ux(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(O(314))}r!==null&&r.delete(e),sy(t,n)}var iy;iy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||at.current)ot=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ot=!1,Tx(t,e,n);ot=!!(t.flags&131072)}else ot=!1,me&&e.flags&1048576&&ug(e,Uo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;bo(t,e),t=e.pendingProps;var s=rs(e,Xe.current);Zr(e,n),s=Hc(null,e,r,t,s,n);var i=Kc();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,lt(r)?(i=!0,Do(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Vc(e),s.updater=Sa,e.stateNode=s,s._reactInternals=e,xu(e,r,t,n),e=_u(null,e,r,!0,i,n)):(e.tag=0,me&&i&&Ac(e),et(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(bo(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Fx(r),t=At(r,t),s){case 0:e=Su(null,e,r,t,n);break e;case 1:e=Oh(null,e,r,t,n);break e;case 11:e=Nh(null,e,r,t,n);break e;case 14:e=Rh(null,e,r,At(r.type,t),n);break e}throw Error(O(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:At(r,s),Su(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:At(r,s),Oh(t,e,r,s,n);case 3:e:{if(Bg(e),t===null)throw Error(O(387));r=e.pendingProps,i=e.memoizedState,s=i.element,mg(t,e),Bo(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=as(Error(O(423)),e),e=Ah(t,e,r,n,s);break e}else if(r!==s){s=as(Error(O(424)),e),e=Ah(t,e,r,n,s);break e}else for(gt=jn(e.stateNode.containerInfo.firstChild),yt=e,me=!0,Dt=null,n=fg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ss(),r===s){e=un(t,e,n);break e}et(t,e,r,n)}e=e.child}return e;case 5:return gg(e),t===null&&yu(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,hu(r,s)?o=null:i!==null&&hu(r,i)&&(e.flags|=32),Fg(t,e),et(t,e,o,n),e.child;case 6:return t===null&&yu(e),null;case 13:return zg(t,e,n);case 4:return Fc(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=is(e,null,r,n):et(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:At(r,s),Nh(t,e,r,s,n);case 7:return et(t,e,e.pendingProps,n),e.child;case 8:return et(t,e,e.pendingProps.children,n),e.child;case 12:return et(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ue(Vo,r._currentValue),r._currentValue=o,i!==null)if(Vt(i.value,o)){if(i.children===s.children&&!at.current){e=un(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=nn(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),vu(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(O(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),vu(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}et(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Zr(e,n),s=Ct(s),r=r(s),e.flags|=1,et(t,e,r,n),e.child;case 14:return r=e.type,s=At(r,e.pendingProps),s=At(r.type,s),Rh(t,e,r,s,n);case 15:return Ug(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:At(r,s),bo(t,e),e.tag=1,lt(r)?(t=!0,Do(e)):t=!1,Zr(e,n),$g(e,r,s),xu(e,r,s,n),_u(null,e,r,!0,t,n);case 19:return Wg(t,e,n);case 22:return Vg(t,e,n)}throw Error(O(156,e.tag))};function oy(t,e){return Am(t,e)}function Vx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tt(t,e,n,r){return new Vx(t,e,n,r)}function nd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Fx(t){if(typeof t=="function")return nd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===bc)return 11;if(t===Sc)return 14}return 2}function Rn(t,e){var n=t.alternate;return n===null?(n=Tt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ko(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")nd(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ar:return ir(n.children,s,i,e);case xc:o=8,s|=8;break;case Wl:return t=Tt(12,n,e,s|2),t.elementType=Wl,t.lanes=i,t;case Hl:return t=Tt(13,n,e,s),t.elementType=Hl,t.lanes=i,t;case Kl:return t=Tt(19,n,e,s),t.elementType=Kl,t.lanes=i,t;case gm:return Ea(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case pm:o=10;break e;case mm:o=9;break e;case bc:o=11;break e;case Sc:o=14;break e;case mn:o=16,r=null;break e}throw Error(O(130,t==null?t:typeof t,""))}return e=Tt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ir(t,e,n,r){return t=Tt(7,t,r,e),t.lanes=n,t}function Ea(t,e,n,r){return t=Tt(22,t,r,e),t.elementType=gm,t.lanes=n,t.stateNode={isHidden:!1},t}function hl(t,e,n){return t=Tt(6,t,null,e),t.lanes=n,t}function fl(t,e,n){return e=Tt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Bx(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qa(0),this.expirationTimes=qa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qa(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function rd(t,e,n,r,s,i,o,a,l){return t=new Bx(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Tt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vc(i),t}function zx(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Or,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ay(t){if(!t)return Ln;t=t._reactInternals;e:{if(mr(t)!==t||t.tag!==1)throw Error(O(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(lt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(O(171))}if(t.tag===1){var n=t.type;if(lt(n))return ag(t,n,e)}return e}function ly(t,e,n,r,s,i,o,a,l){return t=rd(n,r,!0,t,s,i,o,a,l),t.context=ay(null),n=t.current,r=tt(),s=Nn(n),i=nn(r,s),i.callback=e??null,Pn(n,i,s),t.current.lanes=s,Ci(t,s,r),ut(t,r),t}function Ta(t,e,n,r){var s=e.current,i=tt(),o=Nn(s);return n=ay(n),e.context===null?e.context=n:e.pendingContext=n,e=nn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Pn(s,e,o),t!==null&&(Ut(t,s,o,i),vo(t,s,o)),o}function Yo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function zh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function sd(t,e){zh(t,e),(t=t.alternate)&&zh(t,e)}function Wx(){return null}var uy=typeof reportError=="function"?reportError:function(t){console.error(t)};function id(t){this._internalRoot=t}ja.prototype.render=id.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(O(409));Ta(t,e,null,null)};ja.prototype.unmount=id.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;dr(function(){Ta(null,t,null,null)}),e[an]=null}};function ja(t){this._internalRoot=t}ja.prototype.unstable_scheduleHydration=function(t){if(t){var e=Vm();t={blockedOn:null,target:t,priority:e};for(var n=0;n<wn.length&&e!==0&&e<wn[n].priority;n++);wn.splice(n,0,t),n===0&&Bm(t)}};function od(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Wh(){}function Hx(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Yo(o);i.call(u)}}var o=ly(e,r,t,0,null,!1,!1,"",Wh);return t._reactRootContainer=o,t[an]=o.current,li(t.nodeType===8?t.parentNode:t),dr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Yo(l);a.call(u)}}var l=rd(t,0,!1,null,null,!1,!1,"",Wh);return t._reactRootContainer=l,t[an]=l.current,li(t.nodeType===8?t.parentNode:t),dr(function(){Ta(e,l,n,r)}),l}function Ca(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Yo(o);a.call(l)}}Ta(e,o,t,s)}else o=Hx(n,e,t,s,r);return Yo(o)}Mm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=As(e.pendingLanes);n!==0&&(Ec(e,n|1),ut(e,je()),!(re&6)&&(ls=je()+500,Vn()))}break;case 13:dr(function(){var r=ln(t,1);if(r!==null){var s=tt();Ut(r,t,1,s)}}),sd(t,1)}};Tc=function(t){if(t.tag===13){var e=ln(t,134217728);if(e!==null){var n=tt();Ut(e,t,134217728,n)}sd(t,134217728)}};Um=function(t){if(t.tag===13){var e=Nn(t),n=ln(t,e);if(n!==null){var r=tt();Ut(n,t,e,r)}sd(t,e)}};Vm=function(){return oe};Fm=function(t,e){var n=oe;try{return oe=t,e()}finally{oe=n}};nu=function(t,e,n){switch(e){case"input":if(Jl(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=wa(r);if(!s)throw Error(O(90));vm(r),Jl(r,s)}}}break;case"textarea":xm(t,n);break;case"select":e=n.value,e!=null&&Jr(t,!!n.multiple,e,!1)}};jm=Zc;Pm=dr;var Kx={usingClientEntryPoint:!1,Events:[Ri,Dr,wa,Em,Tm,Zc]},Es={findFiberByHostInstance:Zn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qx={bundleType:Es.bundleType,version:Es.version,rendererPackageName:Es.rendererPackageName,rendererConfig:Es.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Rm(t),t===null?null:t.stateNode},findFiberByHostInstance:Es.findFiberByHostInstance||Wx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var to=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!to.isDisabled&&to.supportsFiber)try{ma=to.inject(qx),Ht=to}catch{}}xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kx;xt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!od(e))throw Error(O(200));return zx(t,e,null,n)};xt.createRoot=function(t,e){if(!od(t))throw Error(O(299));var n=!1,r="",s=uy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=rd(t,1,!1,null,null,n,!1,r,s),t[an]=e.current,li(t.nodeType===8?t.parentNode:t),new id(e)};xt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(O(188)):(t=Object.keys(t).join(","),Error(O(268,t)));return t=Rm(e),t=t===null?null:t.stateNode,t};xt.flushSync=function(t){return dr(t)};xt.hydrate=function(t,e,n){if(!Pa(e))throw Error(O(200));return Ca(null,t,e,!0,n)};xt.hydrateRoot=function(t,e,n){if(!od(t))throw Error(O(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=uy;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=ly(e,null,t,1,n??null,s,!1,i,o),t[an]=e.current,li(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ja(e)};xt.render=function(t,e,n){if(!Pa(e))throw Error(O(200));return Ca(null,t,e,!1,n)};xt.unmountComponentAtNode=function(t){if(!Pa(t))throw Error(O(40));return t._reactRootContainer?(dr(function(){Ca(null,null,t,!1,function(){t._reactRootContainer=null,t[an]=null})}),!0):!1};xt.unstable_batchedUpdates=Zc;xt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Pa(n))throw Error(O(200));if(t==null||t._reactInternals===void 0)throw Error(O(38));return Ca(t,e,n,!1,r)};xt.version="18.3.1-next-f1338f8080-20240426";function cy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cy)}catch(t){console.error(t)}}cy(),cm.exports=xt;var Gx=cm.exports,Hh=Gx;Bl.createRoot=Hh.createRoot,Bl.hydrateRoot=Hh.hydrateRoot;const dy=S.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Na=S.createContext({}),Ra=S.createContext(null),Oa=typeof document<"u",ad=Oa?S.useLayoutEffect:S.useEffect,hy=S.createContext({strict:!1}),ld=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Jx="framerAppearId",fy="data-"+ld(Jx);function Yx(t,e,n,r){const{visualElement:s}=S.useContext(Na),i=S.useContext(hy),o=S.useContext(Ra),a=S.useContext(dy).reducedMotion,l=S.useRef();r=r||i.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=l.current;S.useInsertionEffect(()=>{u&&u.update(n,o)});const d=S.useRef(!!(n[fy]&&!window.HandoffComplete));return ad(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),S.useEffect(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}function Wr(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Xx(t,e,n){return S.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Wr(n)&&(n.current=r))},[e])}function yi(t){return typeof t=="string"||Array.isArray(t)}function Aa(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const ud=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],cd=["initial",...ud];function La(t){return Aa(t.animate)||cd.some(e=>yi(t[e]))}function py(t){return!!(La(t)||t.variants)}function Qx(t,e){if(La(t)){const{initial:n,animate:r}=t;return{initial:n===!1||yi(n)?n:void 0,animate:yi(r)?r:void 0}}return t.inherit!==!1?e:{}}function Zx(t){const{initial:e,animate:n}=Qx(t,S.useContext(Na));return S.useMemo(()=>({initial:e,animate:n}),[Kh(e),Kh(n)])}function Kh(t){return Array.isArray(t)?t.join(" "):t}const qh={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},vi={};for(const t in qh)vi[t]={isEnabled:e=>qh[t].some(n=>!!e[n])};function eb(t){for(const e in t)vi[e]={...vi[e],...t[e]}}const dd=S.createContext({}),my=S.createContext({}),tb=Symbol.for("motionComponentSymbol");function nb({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&eb(t);function i(a,l){let u;const d={...S.useContext(dy),...a,layoutId:rb(a)},{isStatic:c}=d,f=Zx(a),p=r(a,c);if(!c&&Oa){f.visualElement=Yx(s,p,d,e);const m=S.useContext(my),v=S.useContext(hy).strict;f.visualElement&&(u=f.visualElement.loadFeatures(d,v,t,m))}return S.createElement(Na.Provider,{value:f},u&&f.visualElement?S.createElement(u,{visualElement:f.visualElement,...d}):null,n(s,a,Xx(p,f.visualElement,l),p,c,f.visualElement))}const o=S.forwardRef(i);return o[tb]=s,o}function rb({layoutId:t}){const e=S.useContext(dd).id;return e&&t!==void 0?e+"-"+t:t}function sb(t){function e(r,s={}){return nb(t(r,s))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,s)=>(n.has(s)||n.set(s,e(s)),n.get(s))})}const ib=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function hd(t){return typeof t!="string"||t.includes("-")?!1:!!(ib.indexOf(t)>-1||/[A-Z]/.test(t))}const Xo={};function ob(t){Object.assign(Xo,t)}const Ai=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],gr=new Set(Ai);function gy(t,{layout:e,layoutId:n}){return gr.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Xo[t]||t==="opacity")}const ct=t=>!!(t&&t.getVelocity),ab={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},lb=Ai.length;function ub(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,s){let i="";for(let o=0;o<lb;o++){const a=Ai[o];if(t[a]!==void 0){const l=ab[a]||a;i+=`${l}(${t[a]}) `}}return e&&!t.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(t,r?"":i):n&&r&&(i="none"),i}const yy=t=>e=>typeof e=="string"&&e.startsWith(t),vy=yy("--"),Iu=yy("var(--"),cb=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,db=(t,e)=>e&&typeof t=="number"?e.transform(t):t,In=(t,e,n)=>Math.min(Math.max(n,t),e),yr={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ks={...yr,transform:t=>In(0,1,t)},no={...yr,default:1},qs=t=>Math.round(t*1e5)/1e5,Ia=/(-)?([\d]*\.?[\d])+/g,wy=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,hb=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Li(t){return typeof t=="string"}const Ii=t=>({test:e=>Li(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),pn=Ii("deg"),qt=Ii("%"),Y=Ii("px"),fb=Ii("vh"),pb=Ii("vw"),Gh={...qt,parse:t=>qt.parse(t)/100,transform:t=>qt.transform(t*100)},Jh={...yr,transform:Math.round},xy={borderWidth:Y,borderTopWidth:Y,borderRightWidth:Y,borderBottomWidth:Y,borderLeftWidth:Y,borderRadius:Y,radius:Y,borderTopLeftRadius:Y,borderTopRightRadius:Y,borderBottomRightRadius:Y,borderBottomLeftRadius:Y,width:Y,maxWidth:Y,height:Y,maxHeight:Y,size:Y,top:Y,right:Y,bottom:Y,left:Y,padding:Y,paddingTop:Y,paddingRight:Y,paddingBottom:Y,paddingLeft:Y,margin:Y,marginTop:Y,marginRight:Y,marginBottom:Y,marginLeft:Y,rotate:pn,rotateX:pn,rotateY:pn,rotateZ:pn,scale:no,scaleX:no,scaleY:no,scaleZ:no,skew:pn,skewX:pn,skewY:pn,distance:Y,translateX:Y,translateY:Y,translateZ:Y,x:Y,y:Y,z:Y,perspective:Y,transformPerspective:Y,opacity:Ks,originX:Gh,originY:Gh,originZ:Y,zIndex:Jh,fillOpacity:Ks,strokeOpacity:Ks,numOctaves:Jh};function fd(t,e,n,r){const{style:s,vars:i,transform:o,transformOrigin:a}=t;let l=!1,u=!1,d=!0;for(const c in e){const f=e[c];if(vy(c)){i[c]=f;continue}const p=xy[c],m=db(f,p);if(gr.has(c)){if(l=!0,o[c]=m,!d)continue;f!==(p.default||0)&&(d=!1)}else c.startsWith("origin")?(u=!0,a[c]=m):s[c]=m}if(e.transform||(l||r?s.transform=ub(t.transform,n,d,r):s.transform&&(s.transform="none")),u){const{originX:c="50%",originY:f="50%",originZ:p=0}=a;s.transformOrigin=`${c} ${f} ${p}`}}const pd=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function by(t,e,n){for(const r in e)!ct(e[r])&&!gy(r,n)&&(t[r]=e[r])}function mb({transformTemplate:t},e,n){return S.useMemo(()=>{const r=pd();return fd(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function gb(t,e,n){const r=t.style||{},s={};return by(s,r,t),Object.assign(s,mb(t,e,n)),t.transformValues?t.transformValues(s):s}function yb(t,e,n){const r={},s=gb(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=s,r}const vb=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Qo(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||vb.has(t)}let Sy=t=>!Qo(t);function wb(t){t&&(Sy=e=>e.startsWith("on")?!Qo(e):t(e))}try{wb(require("@emotion/is-prop-valid").default)}catch{}function xb(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(Sy(s)||n===!0&&Qo(s)||!e&&!Qo(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function Yh(t,e,n){return typeof t=="string"?t:Y.transform(e+n*t)}function bb(t,e,n){const r=Yh(e,t.x,t.width),s=Yh(n,t.y,t.height);return`${r} ${s}`}const Sb={offset:"stroke-dashoffset",array:"stroke-dasharray"},_b={offset:"strokeDashoffset",array:"strokeDasharray"};function kb(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?Sb:_b;t[i.offset]=Y.transform(-r);const o=Y.transform(e),a=Y.transform(n);t[i.array]=`${o} ${a}`}function md(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},d,c,f){if(fd(t,u,d,f),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:m,dimensions:v}=t;p.transform&&(v&&(m.transform=p.transform),delete p.transform),v&&(s!==void 0||i!==void 0||m.transform)&&(m.transformOrigin=bb(v,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),o!==void 0&&kb(p,o,a,l,!1)}const _y=()=>({...pd(),attrs:{}}),gd=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Eb(t,e,n,r){const s=S.useMemo(()=>{const i=_y();return md(i,e,{enableHardwareAcceleration:!1},gd(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};by(i,t.style,t),s.style={...i,...s.style}}return s}function Tb(t=!1){return(n,r,s,{latestValues:i},o)=>{const l=(hd(n)?Eb:yb)(r,i,o,n),d={...xb(r,typeof n=="string",t),...l,ref:s},{children:c}=r,f=S.useMemo(()=>ct(c)?c.get():c,[c]);return S.createElement(n,{...d,children:f})}}function ky(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const Ey=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Ty(t,e,n,r){ky(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(Ey.has(s)?s:ld(s),e.attrs[s])}function yd(t,e){const{style:n}=t,r={};for(const s in n)(ct(n[s])||e.style&&ct(e.style[s])||gy(s,t))&&(r[s]=n[s]);return r}function jy(t,e){const n=yd(t,e);for(const r in t)if(ct(t[r])||ct(e[r])){const s=Ai.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=t[r]}return n}function vd(t,e,n,r={},s={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),e}function Py(t){const e=S.useRef(null);return e.current===null&&(e.current=t()),e.current}const Zo=t=>Array.isArray(t),jb=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Pb=t=>Zo(t)?t[t.length-1]||0:t;function Eo(t){const e=ct(t)?t.get():t;return jb(e)?e.toValue():e}function Cb({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,s,i){const o={latestValues:Nb(r,s,i,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const Cy=t=>(e,n)=>{const r=S.useContext(Na),s=S.useContext(Ra),i=()=>Cb(t,e,r,s);return n?i():Py(i)};function Nb(t,e,n,r){const s={},i=r(t,{});for(const f in i)s[f]=Eo(i[f]);let{initial:o,animate:a}=t;const l=La(t),u=py(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const c=d?a:o;return c&&typeof c!="boolean"&&!Aa(c)&&(Array.isArray(c)?c:[c]).forEach(p=>{const m=vd(t,p);if(!m)return;const{transitionEnd:v,transition:b,...w}=m;for(const g in w){let y=w[g];if(Array.isArray(y)){const x=d?y.length-1:0;y=y[x]}y!==null&&(s[g]=y)}for(const g in v)s[g]=v[g]}),s}const Pe=t=>t;class Xh{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function Rb(t){let e=new Xh,n=new Xh,r=0,s=!1,i=!1;const o=new WeakSet,a={schedule:(l,u=!1,d=!1)=>{const c=d&&s,f=c?e:n;return u&&o.add(l),f.add(l)&&c&&s&&(r=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(s){i=!0;return}if(s=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let u=0;u<r;u++){const d=e.order[u];d(l),o.has(d)&&(a.schedule(d),t())}s=!1,i&&(i=!1,a.process(l))}};return a}const ro=["prepare","read","update","preRender","render","postRender"],Ob=40;function Ab(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=ro.reduce((c,f)=>(c[f]=Rb(()=>n=!0),c),{}),o=c=>i[c].process(s),a=()=>{const c=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(c-s.timestamp,Ob),1),s.timestamp=c,s.isProcessing=!0,ro.forEach(o),s.isProcessing=!1,n&&e&&(r=!1,t(a))},l=()=>{n=!0,r=!0,s.isProcessing||t(a)};return{schedule:ro.reduce((c,f)=>{const p=i[f];return c[f]=(m,v=!1,b=!1)=>(n||l(),p.schedule(m,v,b)),c},{}),cancel:c=>ro.forEach(f=>i[f].cancel(c)),state:s,steps:i}}const{schedule:ce,cancel:cn,state:Je,steps:pl}=Ab(typeof requestAnimationFrame<"u"?requestAnimationFrame:Pe,!0),Lb={useVisualState:Cy({scrapeMotionValuesFromProps:jy,createRenderState:_y,onMount:(t,e,{renderState:n,latestValues:r})=>{ce.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),ce.render(()=>{md(n,r,{enableHardwareAcceleration:!1},gd(e.tagName),t.transformTemplate),Ty(e,n)})}})},Ib={useVisualState:Cy({scrapeMotionValuesFromProps:yd,createRenderState:pd})};function $b(t,{forwardMotionProps:e=!1},n,r){return{...hd(t)?Lb:Ib,preloadedFeatures:n,useRender:Tb(e),createVisualElement:r,Component:t}}function tn(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const Ny=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function $a(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const Db=t=>e=>Ny(e)&&t(e,$a(e));function rn(t,e,n,r){return tn(t,e,Db(n),r)}const Mb=(t,e)=>n=>e(t(n)),On=(...t)=>t.reduce(Mb);function Ry(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const Qh=Ry("dragHorizontal"),Zh=Ry("dragVertical");function Oy(t){let e=!1;if(t==="y")e=Zh();else if(t==="x")e=Qh();else{const n=Qh(),r=Zh();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function Ay(){const t=Oy(!0);return t?(t(),!1):!0}class Fn{constructor(e){this.isMounted=!1,this.node=e}update(){}}function ef(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||Ay())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&ce.update(()=>a[r](i,o))};return rn(t.current,n,s,{passive:!t.getProps()[r]})}class Ub extends Fn{mount(){this.unmount=On(ef(this.node,!0),ef(this.node,!1))}unmount(){}}class Vb extends Fn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=On(tn(this.node.current,"focus",()=>this.onFocus()),tn(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Ly=(t,e)=>e?t===e?!0:Ly(t,e.parentElement):!1;function ml(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,$a(n))}class Fb extends Fn{constructor(){super(...arguments),this.removeStartListeners=Pe,this.removeEndListeners=Pe,this.removeAccessibleListeners=Pe,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=rn(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:c}=this.node.getProps();ce.update(()=>{!c&&!Ly(this.node.current,a.target)?d&&d(a,l):u&&u(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=rn(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=On(i,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||ml("up",(l,u)=>{const{onTap:d}=this.node.getProps();d&&ce.update(()=>d(l,u))})};this.removeEndListeners(),this.removeEndListeners=tn(this.node.current,"keyup",o),ml("down",(a,l)=>{this.startPress(a,l)})},n=tn(this.node.current,"keydown",e),r=()=>{this.isPressing&&ml("cancel",(i,o)=>this.cancelPress(i,o))},s=tn(this.node.current,"blur",r);this.removeAccessibleListeners=On(n,s)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&ce.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Ay()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&ce.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=rn(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=tn(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=On(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const $u=new WeakMap,gl=new WeakMap,Bb=t=>{const e=$u.get(t.target);e&&e(t)},zb=t=>{t.forEach(Bb)};function Wb({root:t,...e}){const n=t||document;gl.has(n)||gl.set(n,{});const r=gl.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(zb,{root:t,...e})),r[s]}function Hb(t,e,n){const r=Wb(e);return $u.set(t,n),r.observe(t),()=>{$u.delete(t),r.unobserve(t)}}const Kb={some:0,all:1};class qb extends Fn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:Kb[s]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:c}=this.node.getProps(),f=u?d:c;f&&f(l)};return Hb(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Gb(e,n))&&this.startObserver()}unmount(){}}function Gb({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Jb={inView:{Feature:qb},tap:{Feature:Fb},focus:{Feature:Vb},hover:{Feature:Ub}};function Iy(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Yb(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function Xb(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function Da(t,e,n){const r=t.getProps();return vd(r,e,n!==void 0?n:r.custom,Yb(t),Xb(t))}let wd=Pe;const or=t=>t*1e3,sn=t=>t/1e3,Qb={current:!1},$y=t=>Array.isArray(t)&&typeof t[0]=="number";function Dy(t){return!!(!t||typeof t=="string"&&My[t]||$y(t)||Array.isArray(t)&&t.every(Dy))}const Is=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,My={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Is([0,.65,.55,1]),circOut:Is([.55,0,1,.45]),backIn:Is([.31,.01,.66,-.59]),backOut:Is([.33,1.53,.69,.99])};function Uy(t){if(t)return $y(t)?Is(t):Array.isArray(t)?t.map(Uy):My[t]}function Zb(t,e,n,{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:l}={}){const u={[e]:n};l&&(u.offset=l);const d=Uy(a);return Array.isArray(d)&&(u.easing=d),t.animate(u,{delay:r,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function eS(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const Vy=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,tS=1e-7,nS=12;function rS(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=Vy(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>tS&&++a<nS);return o}function $i(t,e,n,r){if(t===e&&n===r)return Pe;const s=i=>rS(i,0,1,t,n);return i=>i===0||i===1?i:Vy(s(i),e,r)}const sS=$i(.42,0,1,1),iS=$i(0,0,.58,1),Fy=$i(.42,0,.58,1),oS=t=>Array.isArray(t)&&typeof t[0]!="number",By=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,zy=t=>e=>1-t(1-e),xd=t=>1-Math.sin(Math.acos(t)),Wy=zy(xd),aS=By(xd),Hy=$i(.33,1.53,.69,.99),bd=zy(Hy),lS=By(bd),uS=t=>(t*=2)<1?.5*bd(t):.5*(2-Math.pow(2,-10*(t-1))),cS={linear:Pe,easeIn:sS,easeInOut:Fy,easeOut:iS,circIn:xd,circInOut:aS,circOut:Wy,backIn:bd,backInOut:lS,backOut:Hy,anticipate:uS},tf=t=>{if(Array.isArray(t)){wd(t.length===4);const[e,n,r,s]=t;return $i(e,n,r,s)}else if(typeof t=="string")return cS[t];return t},Sd=(t,e)=>n=>!!(Li(n)&&hb.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),Ky=(t,e,n)=>r=>{if(!Li(r))return r;const[s,i,o,a]=r.match(Ia);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},dS=t=>In(0,255,t),yl={...yr,transform:t=>Math.round(dS(t))},nr={test:Sd("rgb","red"),parse:Ky("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+yl.transform(t)+", "+yl.transform(e)+", "+yl.transform(n)+", "+qs(Ks.transform(r))+")"};function hS(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Du={test:Sd("#"),parse:hS,transform:nr.transform},Hr={test:Sd("hsl","hue"),parse:Ky("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+qt.transform(qs(e))+", "+qt.transform(qs(n))+", "+qs(Ks.transform(r))+")"},Ze={test:t=>nr.test(t)||Du.test(t)||Hr.test(t),parse:t=>nr.test(t)?nr.parse(t):Hr.test(t)?Hr.parse(t):Du.parse(t),transform:t=>Li(t)?t:t.hasOwnProperty("red")?nr.transform(t):Hr.transform(t)},ve=(t,e,n)=>-n*t+n*e+t;function vl(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function fS({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=vl(l,a,t+1/3),i=vl(l,a,t),o=vl(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const wl=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},pS=[Du,nr,Hr],mS=t=>pS.find(e=>e.test(t));function nf(t){const e=mS(t);let n=e.parse(t);return e===Hr&&(n=fS(n)),n}const qy=(t,e)=>{const n=nf(t),r=nf(e),s={...n};return i=>(s.red=wl(n.red,r.red,i),s.green=wl(n.green,r.green,i),s.blue=wl(n.blue,r.blue,i),s.alpha=ve(n.alpha,r.alpha,i),nr.transform(s))};function gS(t){var e,n;return isNaN(t)&&Li(t)&&(((e=t.match(Ia))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(wy))===null||n===void 0?void 0:n.length)||0)>0}const Gy={regex:cb,countKey:"Vars",token:"${v}",parse:Pe},Jy={regex:wy,countKey:"Colors",token:"${c}",parse:Ze.parse},Yy={regex:Ia,countKey:"Numbers",token:"${n}",parse:yr.parse};function xl(t,{regex:e,countKey:n,token:r,parse:s}){const i=t.tokenised.match(e);i&&(t["num"+n]=i.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...i.map(s)))}function ea(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&xl(n,Gy),xl(n,Jy),xl(n,Yy),n}function Xy(t){return ea(t).values}function Qy(t){const{values:e,numColors:n,numVars:r,tokenised:s}=ea(t),i=e.length;return o=>{let a=s;for(let l=0;l<i;l++)l<r?a=a.replace(Gy.token,o[l]):l<r+n?a=a.replace(Jy.token,Ze.transform(o[l])):a=a.replace(Yy.token,qs(o[l]));return a}}const yS=t=>typeof t=="number"?0:t;function vS(t){const e=Xy(t);return Qy(t)(e.map(yS))}const $n={test:gS,parse:Xy,createTransformer:Qy,getAnimatableNone:vS},Zy=(t,e)=>n=>`${n>0?e:t}`;function e0(t,e){return typeof t=="number"?n=>ve(t,e,n):Ze.test(t)?qy(t,e):t.startsWith("var(")?Zy(t,e):n0(t,e)}const t0=(t,e)=>{const n=[...t],r=n.length,s=t.map((i,o)=>e0(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}},wS=(t,e)=>{const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=e0(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}},n0=(t,e)=>{const n=$n.createTransformer(e),r=ea(t),s=ea(e);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?On(t0(r.values,s.values),n):Zy(t,e)},wi=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},rf=(t,e)=>n=>ve(t,e,n);function xS(t){return typeof t=="number"?rf:typeof t=="string"?Ze.test(t)?qy:n0:Array.isArray(t)?t0:typeof t=="object"?wS:rf}function bS(t,e,n){const r=[],s=n||xS(t[0]),i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Pe:e;a=On(l,a)}r.push(a)}return r}function r0(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(wd(i===e.length),i===1)return()=>e[0];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=bS(e,r,s),a=o.length,l=u=>{let d=0;if(a>1)for(;d<t.length-2&&!(u<t[d+1]);d++);const c=wi(t[d],t[d+1],u);return o[d](c)};return n?u=>l(In(t[0],t[i-1],u)):l}function SS(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=wi(0,e,r);t.push(ve(n,1,s))}}function _S(t){const e=[0];return SS(e,t.length-1),e}function kS(t,e){return t.map(n=>n*e)}function ES(t,e){return t.map(()=>e||Fy).splice(0,t.length-1)}function ta({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=oS(r)?r.map(tf):tf(r),i={done:!1,value:e[0]},o=kS(n&&n.length===e.length?n:_S(e),t),a=r0(o,e,{ease:Array.isArray(s)?s:ES(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}function s0(t,e){return e?t*(1e3/e):0}const TS=5;function i0(t,e,n){const r=Math.max(e-TS,0);return s0(n-t(r),e-r)}const bl=.001,jS=.01,PS=10,CS=.05,NS=1;function RS({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let s,i,o=1-e;o=In(CS,NS,o),t=In(jS,PS,sn(t)),o<1?(s=u=>{const d=u*o,c=d*t,f=d-n,p=Mu(u,o),m=Math.exp(-c);return bl-f/p*m},i=u=>{const c=u*o*t,f=c*n+n,p=Math.pow(o,2)*Math.pow(u,2)*t,m=Math.exp(-c),v=Mu(Math.pow(u,2),o);return(-s(u)+bl>0?-1:1)*((f-p)*m)/v}):(s=u=>{const d=Math.exp(-u*t),c=(u-n)*t+1;return-bl+d*c},i=u=>{const d=Math.exp(-u*t),c=(n-u)*(t*t);return d*c});const a=5/t,l=AS(s,i,a);if(t=or(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const OS=12;function AS(t,e,n){let r=n;for(let s=1;s<OS;s++)r=r-t(r)/e(r);return r}function Mu(t,e){return t*Math.sqrt(1-e*e)}const LS=["duration","bounce"],IS=["stiffness","damping","mass"];function sf(t,e){return e.some(n=>t[n]!==void 0)}function $S(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!sf(t,IS)&&sf(t,LS)){const n=RS(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function o0({keyframes:t,restDelta:e,restSpeed:n,...r}){const s=t[0],i=t[t.length-1],o={done:!1,value:s},{stiffness:a,damping:l,mass:u,duration:d,velocity:c,isResolvedFromDuration:f}=$S({...r,velocity:-sn(r.velocity||0)}),p=c||0,m=l/(2*Math.sqrt(a*u)),v=i-s,b=sn(Math.sqrt(a/u)),w=Math.abs(v)<5;n||(n=w?.01:2),e||(e=w?.005:.5);let g;if(m<1){const y=Mu(b,m);g=x=>{const E=Math.exp(-m*b*x);return i-E*((p+m*b*v)/y*Math.sin(y*x)+v*Math.cos(y*x))}}else if(m===1)g=y=>i-Math.exp(-b*y)*(v+(p+b*v)*y);else{const y=b*Math.sqrt(m*m-1);g=x=>{const E=Math.exp(-m*b*x),_=Math.min(y*x,300);return i-E*((p+m*b*v)*Math.sinh(_)+y*v*Math.cosh(_))/y}}return{calculatedDuration:f&&d||null,next:y=>{const x=g(y);if(f)o.done=y>=d;else{let E=p;y!==0&&(m<1?E=i0(g,y,x):E=0);const _=Math.abs(E)<=n,k=Math.abs(i-x)<=e;o.done=_&&k}return o.value=o.done?i:x,o}}}function of({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:d}){const c=t[0],f={done:!1,value:c},p=j=>a!==void 0&&j<a||l!==void 0&&j>l,m=j=>a===void 0?l:l===void 0||Math.abs(a-j)<Math.abs(l-j)?a:l;let v=n*e;const b=c+v,w=o===void 0?b:o(b);w!==b&&(v=w-c);const g=j=>-v*Math.exp(-j/r),y=j=>w+g(j),x=j=>{const T=g(j),N=y(j);f.done=Math.abs(T)<=u,f.value=f.done?w:N};let E,_;const k=j=>{p(f.value)&&(E=j,_=o0({keyframes:[f.value,m(f.value)],velocity:i0(y,j,f.value),damping:s,stiffness:i,restDelta:u,restSpeed:d}))};return k(0),{calculatedDuration:null,next:j=>{let T=!1;return!_&&E===void 0&&(T=!0,x(j),k(j)),E!==void 0&&j>E?_.next(j-E):(!T&&x(j),f)}}}const DS=t=>{const e=({timestamp:n})=>t(n);return{start:()=>ce.update(e,!0),stop:()=>cn(e),now:()=>Je.isProcessing?Je.timestamp:performance.now()}},af=2e4;function lf(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<af;)e+=n,r=t.next(e);return e>=af?1/0:e}const MS={decay:of,inertia:of,tween:ta,keyframes:ta,spring:o0};function na({autoplay:t=!0,delay:e=0,driver:n=DS,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:u,onComplete:d,onUpdate:c,...f}){let p=1,m=!1,v,b;const w=()=>{b=new Promise(A=>{v=A})};w();let g;const y=MS[s]||ta;let x;y!==ta&&typeof r[0]!="number"&&(x=r0([0,100],r,{clamp:!1}),r=[0,100]);const E=y({...f,keyframes:r});let _;a==="mirror"&&(_=y({...f,keyframes:[...r].reverse(),velocity:-(f.velocity||0)}));let k="idle",j=null,T=null,N=null;E.calculatedDuration===null&&i&&(E.calculatedDuration=lf(E));const{calculatedDuration:K}=E;let F=1/0,V=1/0;K!==null&&(F=K+o,V=F*(i+1)-o);let C=0;const M=A=>{if(T===null)return;p>0&&(T=Math.min(T,A)),p<0&&(T=Math.min(A-V/p,T)),j!==null?C=j:C=Math.round(A-T)*p;const q=C-e*(p>=0?1:-1),be=p>=0?q<0:q>V;C=Math.max(q,0),k==="finished"&&j===null&&(C=V);let Ce=C,Ae=E;if(i){const D=Math.min(C,V)/F;let L=Math.floor(D),W=D%1;!W&&D>=1&&(W=1),W===1&&L--,L=Math.min(L,i+1),!!(L%2)&&(a==="reverse"?(W=1-W,o&&(W-=o/F)):a==="mirror"&&(Ae=_)),Ce=In(0,1,W)*F}const ae=be?{done:!1,value:r[0]}:Ae.next(Ce);x&&(ae.value=x(ae.value));let{done:Ke}=ae;!be&&K!==null&&(Ke=p>=0?C>=V:C<=0);const Gt=j===null&&(k==="finished"||k==="running"&&Ke);return c&&c(ae.value),Gt&&R(),ae},I=()=>{g&&g.stop(),g=void 0},X=()=>{k="idle",I(),v(),w(),T=N=null},R=()=>{k="finished",d&&d(),I(),v()},$=()=>{if(m)return;g||(g=n(M));const A=g.now();l&&l(),j!==null?T=A-j:(!T||k==="finished")&&(T=A),k==="finished"&&w(),N=T,j=null,k="running",g.start()};t&&$();const H={then(A,q){return b.then(A,q)},get time(){return sn(C)},set time(A){A=or(A),C=A,j!==null||!g||p===0?j=A:T=g.now()-A/p},get duration(){const A=E.calculatedDuration===null?lf(E):E.calculatedDuration;return sn(A)},get speed(){return p},set speed(A){A===p||!g||(p=A,H.time=sn(C))},get state(){return k},play:$,pause:()=>{k="paused",j=C},stop:()=>{m=!0,k!=="idle"&&(k="idle",u&&u(),X())},cancel:()=>{N!==null&&M(N),X()},complete:()=>{k="finished"},sample:A=>(T=0,M(A))};return H}function US(t){let e;return()=>(e===void 0&&(e=t()),e)}const VS=US(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),FS=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),so=10,BS=2e4,zS=(t,e)=>e.type==="spring"||t==="backgroundColor"||!Dy(e.ease);function WS(t,e,{onUpdate:n,onComplete:r,...s}){if(!(VS()&&FS.has(e)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,l,u=!1;const d=()=>{l=new Promise(y=>{a=y})};d();let{keyframes:c,duration:f=300,ease:p,times:m}=s;if(zS(e,s)){const y=na({...s,repeat:0,delay:0});let x={done:!1,value:c[0]};const E=[];let _=0;for(;!x.done&&_<BS;)x=y.sample(_),E.push(x.value),_+=so;m=void 0,c=E,f=_-so,p="linear"}const v=Zb(t.owner.current,e,c,{...s,duration:f,ease:p,times:m}),b=()=>{u=!1,v.cancel()},w=()=>{u=!0,ce.update(b),a(),d()};return v.onfinish=()=>{u||(t.set(eS(c,s)),r&&r(),w())},{then(y,x){return l.then(y,x)},attachTimeline(y){return v.timeline=y,v.onfinish=null,Pe},get time(){return sn(v.currentTime||0)},set time(y){v.currentTime=or(y)},get speed(){return v.playbackRate},set speed(y){v.playbackRate=y},get duration(){return sn(f)},play:()=>{o||(v.play(),cn(b))},pause:()=>v.pause(),stop:()=>{if(o=!0,v.playState==="idle")return;const{currentTime:y}=v;if(y){const x=na({...s,autoplay:!1});t.setWithVelocity(x.sample(y-so).value,x.sample(y).value,so)}w()},complete:()=>{u||v.finish()},cancel:w}}function HS({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const s=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Pe,pause:Pe,stop:Pe,then:i=>(i(),Promise.resolve()),cancel:Pe,complete:Pe});return e?na({keyframes:[0,1],duration:0,delay:e,onComplete:s}):s()}const KS={type:"spring",stiffness:500,damping:25,restSpeed:10},qS=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),GS={type:"keyframes",duration:.8},JS={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},YS=(t,{keyframes:e})=>e.length>2?GS:gr.has(t)?t.startsWith("scale")?qS(e[1]):KS:JS,Uu=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&($n.test(e)||e==="0")&&!e.startsWith("url(")),XS=new Set(["brightness","contrast","saturate","opacity"]);function QS(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Ia)||[];if(!r)return t;const s=n.replace(r,"");let i=XS.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const ZS=/([a-z-]*)\(.*?\)/g,Vu={...$n,getAnimatableNone:t=>{const e=t.match(ZS);return e?e.map(QS).join(" "):t}},e1={...xy,color:Ze,backgroundColor:Ze,outlineColor:Ze,fill:Ze,stroke:Ze,borderColor:Ze,borderTopColor:Ze,borderRightColor:Ze,borderBottomColor:Ze,borderLeftColor:Ze,filter:Vu,WebkitFilter:Vu},_d=t=>e1[t];function a0(t,e){let n=_d(t);return n!==Vu&&(n=$n),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const l0=t=>/^0[^.\s]+$/.test(t);function t1(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||l0(t)}function n1(t,e,n,r){const s=Uu(e,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const l=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?o:i[u-1]),t1(i[u])&&l.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(a=i[u]);if(s&&l.length&&a)for(let u=0;u<l.length;u++){const d=l[u];i[d]=a0(e,a)}return i}function r1({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:u,...d}){return!!Object.keys(d).length}function kd(t,e){return t[e]||t.default||t}const s1={skipAnimations:!1},Ed=(t,e,n,r={})=>s=>{const i=kd(r,t)||{},o=i.delay||r.delay||0;let{elapsed:a=0}=r;a=a-or(o);const l=n1(e,t,n,i),u=l[0],d=l[l.length-1],c=Uu(t,u),f=Uu(t,d);let p={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:m=>{e.set(m),i.onUpdate&&i.onUpdate(m)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(r1(i)||(p={...p,...YS(t,p)}),p.duration&&(p.duration=or(p.duration)),p.repeatDelay&&(p.repeatDelay=or(p.repeatDelay)),!c||!f||Qb.current||i.type===!1||s1.skipAnimations)return HS(p);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const m=WS(e,t,p);if(m)return m}return na(p)};function ra(t){return!!(ct(t)&&t.add)}const u0=t=>/^\-?\d*\.?\d+$/.test(t);function Td(t,e){t.indexOf(e)===-1&&t.push(e)}function jd(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Pd{constructor(){this.subscriptions=[]}add(e){return Td(this.subscriptions,e),()=>jd(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const i1=t=>!isNaN(parseFloat(t));class o1{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=Je;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,ce.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>ce.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=i1(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Pd);const r=this.events[e].add(n);return e==="change"?()=>{r(),ce.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?s0(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function us(t,e){return new o1(t,e)}const c0=t=>e=>e.test(t),a1={test:t=>t==="auto",parse:t=>t},d0=[yr,Y,qt,pn,pb,fb,a1],Ts=t=>d0.find(c0(t)),l1=[...d0,Ze,$n],u1=t=>l1.find(c0(t));function c1(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,us(n))}function d1(t,e){const n=Da(t,e);let{transitionEnd:r={},transition:s={},...i}=n?t.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const o in i){const a=Pb(i[o]);c1(t,o,a)}}function h1(t,e,n){var r,s;const i=Object.keys(e).filter(a=>!t.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const l=i[a],u=e[l];let d=null;Array.isArray(u)&&(d=u[0]),d===null&&(d=(s=(r=n[l])!==null&&r!==void 0?r:t.readValue(l))!==null&&s!==void 0?s:e[l]),d!=null&&(typeof d=="string"&&(u0(d)||l0(d))?d=parseFloat(d):!u1(d)&&$n.test(u)&&(d=a0(l,u)),t.addValue(l,us(d,{owner:t})),n[l]===void 0&&(n[l]=d),d!==null&&t.setBaseTarget(l,d))}}function f1(t,e){return e?(e[t]||e.default||e).from:void 0}function p1(t,e,n){const r={};for(const s in t){const i=f1(s,e);if(i!==void 0)r[s]=i;else{const o=n.getValue(s);o&&(r[s]=o.get())}}return r}function m1({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function g1(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function h0(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");r&&(i=r);const u=[],d=s&&t.animationState&&t.animationState.getState()[s];for(const c in a){const f=t.getValue(c),p=a[c];if(!f||p===void 0||d&&m1(d,c))continue;const m={delay:n,elapsed:0,...kd(i||{},c)};if(window.HandoffAppearAnimations){const w=t.getProps()[fy];if(w){const g=window.HandoffAppearAnimations(w,c,f,ce);g!==null&&(m.elapsed=g,m.isHandoff=!0)}}let v=!m.isHandoff&&!g1(f,p);if(m.type==="spring"&&(f.getVelocity()||m.velocity)&&(v=!1),f.animation&&(v=!1),v)continue;f.start(Ed(c,f,p,t.shouldReduceMotion&&gr.has(c)?{type:!1}:m));const b=f.animation;ra(l)&&(l.add(c),b.then(()=>l.remove(c))),u.push(b)}return o&&Promise.all(u).then(()=>{o&&d1(t,o)}),u}function Fu(t,e,n={}){const r=Da(t,e,n.custom);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(h0(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:c}=s;return y1(t,e,u+l,d,c,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[l,u]=a==="beforeChildren"?[i,o]:[o,i];return l().then(()=>u())}else return Promise.all([i(),o(n.delay)])}function y1(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,l=s===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(t.variantChildren).sort(v1).forEach((u,d)=>{u.notify("AnimationStart",e),o.push(Fu(u,e,{...i,delay:n+l(d)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function v1(t,e){return t.sortNodePosition(e)}function w1(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>Fu(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=Fu(t,e,n);else{const s=typeof e=="function"?Da(t,e,n.custom):e;r=Promise.all(h0(t,s,n))}return r.then(()=>t.notify("AnimationComplete",e))}const x1=[...ud].reverse(),b1=ud.length;function S1(t){return e=>Promise.all(e.map(({animation:n,options:r})=>w1(t,n,r)))}function _1(t){let e=S1(t);const n=E1();let r=!0;const s=(l,u)=>{const d=Da(t,u);if(d){const{transition:c,transitionEnd:f,...p}=d;l={...l,...p,...f}}return l};function i(l){e=l(t)}function o(l,u){const d=t.getProps(),c=t.getVariantContext(!0)||{},f=[],p=new Set;let m={},v=1/0;for(let w=0;w<b1;w++){const g=x1[w],y=n[g],x=d[g]!==void 0?d[g]:c[g],E=yi(x),_=g===u?y.isActive:null;_===!1&&(v=w);let k=x===c[g]&&x!==d[g]&&E;if(k&&r&&t.manuallyAnimateOnMount&&(k=!1),y.protectedKeys={...m},!y.isActive&&_===null||!x&&!y.prevProp||Aa(x)||typeof x=="boolean")continue;let T=k1(y.prevProp,x)||g===u&&y.isActive&&!k&&E||w>v&&E,N=!1;const K=Array.isArray(x)?x:[x];let F=K.reduce(s,{});_===!1&&(F={});const{prevResolvedValues:V={}}=y,C={...V,...F},M=I=>{T=!0,p.has(I)&&(N=!0,p.delete(I)),y.needsAnimating[I]=!0};for(const I in C){const X=F[I],R=V[I];if(m.hasOwnProperty(I))continue;let $=!1;Zo(X)&&Zo(R)?$=!Iy(X,R):$=X!==R,$?X!==void 0?M(I):p.add(I):X!==void 0&&p.has(I)?M(I):y.protectedKeys[I]=!0}y.prevProp=x,y.prevResolvedValues=F,y.isActive&&(m={...m,...F}),r&&t.blockInitialAnimation&&(T=!1),T&&(!k||N)&&f.push(...K.map(I=>({animation:I,options:{type:g,...l}})))}if(p.size){const w={};p.forEach(g=>{const y=t.getBaseTarget(g);y!==void 0&&(w[g]=y)}),f.push({animation:w})}let b=!!f.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(b=!1),r=!1,b?e(f):Promise.resolve()}function a(l,u,d){var c;if(n[l].isActive===u)return Promise.resolve();(c=t.variantChildren)===null||c===void 0||c.forEach(p=>{var m;return(m=p.animationState)===null||m===void 0?void 0:m.setActive(l,u)}),n[l].isActive=u;const f=o(d,l);for(const p in n)n[p].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n}}function k1(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Iy(e,t):!1}function Bn(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function E1(){return{animate:Bn(!0),whileInView:Bn(),whileHover:Bn(),whileTap:Bn(),whileDrag:Bn(),whileFocus:Bn(),exit:Bn()}}class T1 extends Fn{constructor(e){super(e),e.animationState||(e.animationState=_1(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Aa(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let j1=0;class P1 extends Fn{constructor(){super(...arguments),this.id=j1++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const C1={animation:{Feature:T1},exit:{Feature:P1}},uf=(t,e)=>Math.abs(t-e);function N1(t,e){const n=uf(t.x,e.x),r=uf(t.y,e.y);return Math.sqrt(n**2+r**2)}class f0{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const c=_l(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=N1(c.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:m}=c,{timestamp:v}=Je;this.history.push({...m,timestamp:v});const{onStart:b,onMove:w}=this.handlers;f||(b&&b(this.lastMoveEvent,c),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,c)},this.handlePointerMove=(c,f)=>{this.lastMoveEvent=c,this.lastMoveEventInfo=Sl(f,this.transformPagePoint),ce.update(this.updatePoint,!0)},this.handlePointerUp=(c,f)=>{this.end();const{onEnd:p,onSessionEnd:m,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=_l(c.type==="pointercancel"?this.lastMoveEventInfo:Sl(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(c,b),m&&m(c,b)},!Ny(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=$a(e),a=Sl(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=Je;this.history=[{...l,timestamp:u}];const{onSessionStart:d}=n;d&&d(e,_l(a,this.history)),this.removeListeners=On(rn(this.contextWindow,"pointermove",this.handlePointerMove),rn(this.contextWindow,"pointerup",this.handlePointerUp),rn(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),cn(this.updatePoint)}}function Sl(t,e){return e?{point:e(t.point)}:t}function cf(t,e){return{x:t.x-e.x,y:t.y-e.y}}function _l({point:t},e){return{point:t,delta:cf(t,p0(e)),offset:cf(t,R1(e)),velocity:O1(e,.1)}}function R1(t){return t[0]}function p0(t){return t[t.length-1]}function O1(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=p0(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>or(e)));)n--;if(!r)return{x:0,y:0};const i=sn(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function wt(t){return t.max-t.min}function Bu(t,e=0,n=.01){return Math.abs(t-e)<=n}function df(t,e,n,r=.5){t.origin=r,t.originPoint=ve(e.min,e.max,t.origin),t.scale=wt(n)/wt(e),(Bu(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=ve(n.min,n.max,t.origin)-t.originPoint,(Bu(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Gs(t,e,n,r){df(t.x,e.x,n.x,r?r.originX:void 0),df(t.y,e.y,n.y,r?r.originY:void 0)}function hf(t,e,n){t.min=n.min+e.min,t.max=t.min+wt(e)}function A1(t,e,n){hf(t.x,e.x,n.x),hf(t.y,e.y,n.y)}function ff(t,e,n){t.min=e.min-n.min,t.max=t.min+wt(e)}function Js(t,e,n){ff(t.x,e.x,n.x),ff(t.y,e.y,n.y)}function L1(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?ve(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?ve(n,t,r.max):Math.min(t,n)),t}function pf(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function I1(t,{top:e,left:n,bottom:r,right:s}){return{x:pf(t.x,n,s),y:pf(t.y,e,r)}}function mf(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function $1(t,e){return{x:mf(t.x,e.x),y:mf(t.y,e.y)}}function D1(t,e){let n=.5;const r=wt(t),s=wt(e);return s>r?n=wi(e.min,e.max-r,t.min):r>s&&(n=wi(t.min,t.max-s,e.min)),In(0,1,n)}function M1(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const zu=.35;function U1(t=zu){return t===!1?t=0:t===!0&&(t=zu),{x:gf(t,"left","right"),y:gf(t,"top","bottom")}}function gf(t,e,n){return{min:yf(t,e),max:yf(t,n)}}function yf(t,e){return typeof t=="number"?t:t[e]||0}const vf=()=>({translate:0,scale:1,origin:0,originPoint:0}),Kr=()=>({x:vf(),y:vf()}),wf=()=>({min:0,max:0}),Ne=()=>({x:wf(),y:wf()});function _t(t){return[t("x"),t("y")]}function m0({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function V1({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function F1(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function kl(t){return t===void 0||t===1}function Wu({scale:t,scaleX:e,scaleY:n}){return!kl(t)||!kl(e)||!kl(n)}function qn(t){return Wu(t)||g0(t)||t.z||t.rotate||t.rotateX||t.rotateY}function g0(t){return xf(t.x)||xf(t.y)}function xf(t){return t&&t!=="0%"}function sa(t,e,n){const r=t-n,s=e*r;return n+s}function bf(t,e,n,r,s){return s!==void 0&&(t=sa(t,s,r)),sa(t,n,r)+e}function Hu(t,e=0,n=1,r,s){t.min=bf(t.min,e,n,r,s),t.max=bf(t.max,e,n,r,s)}function y0(t,{x:e,y:n}){Hu(t.x,e.translate,e.scale,e.originPoint),Hu(t.y,n.translate,n.scale,n.originPoint)}function B1(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const l=i.instance;l&&l.style&&l.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&qr(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,y0(t,o)),r&&qn(i.latestValues)&&qr(t,i.latestValues))}e.x=Sf(e.x),e.y=Sf(e.y)}function Sf(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function yn(t,e){t.min=t.min+e,t.max=t.max+e}function _f(t,e,[n,r,s]){const i=e[s]!==void 0?e[s]:.5,o=ve(t.min,t.max,i);Hu(t,e[n],e[r],o,e.scale)}const z1=["x","scaleX","originX"],W1=["y","scaleY","originY"];function qr(t,e){_f(t.x,e,z1),_f(t.y,e,W1)}function v0(t,e){return m0(F1(t.getBoundingClientRect(),e))}function H1(t,e,n){const r=v0(t,n),{scroll:s}=e;return s&&(yn(r.x,s.offset.x),yn(r.y,s.offset.y)),r}const w0=({current:t})=>t?t.ownerDocument.defaultView:null,K1=new WeakMap;class q1{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ne(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:c}=this.getProps();c?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor($a(d,"page").point)},i=(d,c)=>{const{drag:f,dragPropagation:p,onDragStart:m}=this.getProps();if(f&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Oy(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),_t(b=>{let w=this.getAxisMotionValue(b).get()||0;if(qt.test(w)){const{projection:g}=this.visualElement;if(g&&g.layout){const y=g.layout.layoutBox[b];y&&(w=wt(y)*(parseFloat(w)/100))}}this.originPoint[b]=w}),m&&ce.update(()=>m(d,c),!1,!0);const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(d,c)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:m,onDrag:v}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:b}=c;if(p&&this.currentDirection===null){this.currentDirection=G1(b),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",c.point,b),this.updateAxis("y",c.point,b),this.visualElement.render(),v&&v(d,c)},a=(d,c)=>this.stop(d,c),l=()=>_t(d=>{var c;return this.getAnimationState(d)==="paused"&&((c=this.getAxisMotionValue(d).animation)===null||c===void 0?void 0:c.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new f0(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:w0(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&ce.update(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!io(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=L1(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&Wr(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=I1(s.layoutBox,n):this.constraints=!1,this.elastic=U1(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&_t(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=M1(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Wr(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=H1(r,s.root,this.visualElement.getTransformPagePoint());let o=$1(s.layout.layoutBox,i);if(n){const a=n(V1(o));this.hasMutatedConstraints=!!a,a&&(o=m0(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=_t(d=>{if(!io(d,n,this.currentDirection))return;let c=l&&l[d]||{};o&&(c={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,m={type:"inertia",velocity:r?e[d]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...c};return this.startAxisValueAnimation(d,m)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(Ed(e,r,0,n))}stopAnimation(){_t(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){_t(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){_t(n=>{const{drag:r}=this.getProps();if(!io(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-ve(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Wr(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};_t(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();s[o]=D1({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),_t(o=>{if(!io(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(ve(l,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;K1.set(this.visualElement,this);const e=this.visualElement.current,n=rn(e,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Wr(l)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const o=tn(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(_t(d=>{const c=this.getAxisMotionValue(d);c&&(this.originPoint[d]+=l[d].translate,c.set(c.get()+l[d].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=zu,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function io(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function G1(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class J1 extends Fn{constructor(e){super(e),this.removeGroupControls=Pe,this.removeListeners=Pe,this.controls=new q1(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Pe}unmount(){this.removeGroupControls(),this.removeListeners()}}const kf=t=>(e,n)=>{t&&ce.update(()=>t(e,n))};class Y1 extends Fn{constructor(){super(...arguments),this.removePointerDownListener=Pe}onPointerDown(e){this.session=new f0(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:w0(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:kf(e),onStart:kf(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&ce.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=rn(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function X1(){const t=S.useContext(Ra);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,s=S.useId();return S.useEffect(()=>r(s),[]),!e&&n?[!1,()=>n&&n(s)]:[!0]}const To={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ef(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const js={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Y.test(t))t=parseFloat(t);else return t;const n=Ef(t,e.target.x),r=Ef(t,e.target.y);return`${n}% ${r}%`}},Q1={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=$n.parse(t);if(s.length>5)return r;const i=$n.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const u=ve(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};class Z1 extends pa.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;ob(e_),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),To.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||ce.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function x0(t){const[e,n]=X1(),r=S.useContext(dd);return pa.createElement(Z1,{...t,layoutGroup:r,switchLayoutGroup:S.useContext(my),isPresent:e,safeToRemove:n})}const e_={borderRadius:{...js,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:js,borderTopRightRadius:js,borderBottomLeftRadius:js,borderBottomRightRadius:js,boxShadow:Q1},b0=["TopLeft","TopRight","BottomLeft","BottomRight"],t_=b0.length,Tf=t=>typeof t=="string"?parseFloat(t):t,jf=t=>typeof t=="number"||Y.test(t);function n_(t,e,n,r,s,i){s?(t.opacity=ve(0,n.opacity!==void 0?n.opacity:1,r_(r)),t.opacityExit=ve(e.opacity!==void 0?e.opacity:1,0,s_(r))):i&&(t.opacity=ve(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<t_;o++){const a=`border${b0[o]}Radius`;let l=Pf(e,a),u=Pf(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||jf(l)===jf(u)?(t[a]=Math.max(ve(Tf(l),Tf(u),r),0),(qt.test(u)||qt.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=ve(e.rotate||0,n.rotate||0,r))}function Pf(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const r_=S0(0,.5,Wy),s_=S0(.5,.95,Pe);function S0(t,e,n){return r=>r<t?0:r>e?1:n(wi(t,e,r))}function Cf(t,e){t.min=e.min,t.max=e.max}function St(t,e){Cf(t.x,e.x),Cf(t.y,e.y)}function Nf(t,e,n,r,s){return t-=e,t=sa(t,1/n,r),s!==void 0&&(t=sa(t,1/s,r)),t}function i_(t,e=0,n=1,r=.5,s,i=t,o=t){if(qt.test(e)&&(e=parseFloat(e),e=ve(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=ve(i.min,i.max,r);t===i&&(a-=e),t.min=Nf(t.min,e,n,a,s),t.max=Nf(t.max,e,n,a,s)}function Rf(t,e,[n,r,s],i,o){i_(t,e[n],e[r],e[s],e.scale,i,o)}const o_=["x","scaleX","originX"],a_=["y","scaleY","originY"];function Of(t,e,n,r){Rf(t.x,e,o_,n?n.x:void 0,r?r.x:void 0),Rf(t.y,e,a_,n?n.y:void 0,r?r.y:void 0)}function Af(t){return t.translate===0&&t.scale===1}function _0(t){return Af(t.x)&&Af(t.y)}function l_(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function k0(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function Lf(t){return wt(t.x)/wt(t.y)}class u_{constructor(){this.members=[]}add(e){Td(this.members,e),e.scheduleRender()}remove(e){if(jd(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function If(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:u,rotateY:d}=n;l&&(r+=`rotate(${l}deg) `),u&&(r+=`rotateX(${u}deg) `),d&&(r+=`rotateY(${d}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const c_=(t,e)=>t.depth-e.depth;class d_{constructor(){this.children=[],this.isDirty=!1}add(e){Td(this.children,e),this.isDirty=!0}remove(e){jd(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(c_),this.isDirty=!1,this.children.forEach(e)}}function h_(t,e){const n=performance.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(cn(r),t(i-e))};return ce.read(r,!0),()=>cn(r)}function f_(t){window.MotionDebug&&window.MotionDebug.record(t)}function p_(t){return t instanceof SVGElement&&t.tagName!=="svg"}function m_(t,e,n){const r=ct(t)?t:us(t);return r.start(Ed("",r,e,n)),r.animation}const $f=["","X","Y","Z"],g_={visibility:"hidden"},Df=1e3;let y_=0;const Gn={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function E0({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=y_++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Gn.totalNodes=Gn.resolvedTargetDeltas=Gn.recalculatedProjection=0,this.nodes.forEach(x_),this.nodes.forEach(E_),this.nodes.forEach(T_),this.nodes.forEach(b_),f_(Gn)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new d_)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Pd),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=p_(o),this.instance=o;const{layoutId:l,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),t){let c;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,c&&c(),c=h_(f,250),To.hasAnimatedSinceResize&&(To.hasAnimatedSinceResize=!1,this.nodes.forEach(Uf))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||u)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:f,hasRelativeTargetChanged:p,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||d.getDefaultTransition()||R_,{onLayoutAnimationStart:b,onLayoutAnimationComplete:w}=d.getProps(),g=!this.targetLayout||!k0(this.targetLayout,m)||p,y=!f&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||y||f&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(c,y);const x={...kd(v,"layout"),onPlay:b,onComplete:w};(d.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x)}else f||Uf(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(j_),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const c=this.path[d];c.shouldResetTransform=!0,c.updateScroll("snapshot"),c.options.layoutRoot&&c.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Mf);return}this.isUpdating||this.nodes.forEach(__),this.isUpdating=!1,this.nodes.forEach(k_),this.nodes.forEach(v_),this.nodes.forEach(w_),this.clearAllSnapshots();const a=performance.now();Je.delta=In(0,1e3/60,a-Je.timestamp),Je.timestamp=a,Je.isProcessing=!0,pl.update.process(Je),pl.preRender.process(Je),pl.render.process(Je),Je.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(S_),this.sharedNodes.forEach(P_)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ce.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ce.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ne(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!_0(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&(a||qn(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),O_(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Ne();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(yn(a.x,l.offset.x),yn(a.y,l.offset.y)),a}removeElementScroll(o){const a=Ne();St(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:d,options:c}=u;if(u!==this.root&&d&&c.layoutScroll){if(d.isRoot){St(a,o);const{scroll:f}=this.root;f&&(yn(a.x,-f.offset.x),yn(a.y,-f.offset.y))}yn(a.x,d.offset.x),yn(a.y,d.offset.y)}}return a}applyTransform(o,a=!1){const l=Ne();St(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&qr(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),qn(d.latestValues)&&qr(l,d.latestValues)}return qn(this.latestValues)&&qr(l,this.latestValues),l}removeTransform(o){const a=Ne();St(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!qn(u.latestValues))continue;Wu(u.latestValues)&&u.updateSnapshot();const d=Ne(),c=u.measurePageBox();St(d,c),Of(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return qn(this.latestValues)&&Of(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Je.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:c,layoutId:f}=this.options;if(!(!this.layout||!(c||f))){if(this.resolvedRelativeTargetAt=Je.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ne(),this.relativeTargetOrigin=Ne(),Js(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),St(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ne(),this.targetWithTransforms=Ne()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),A1(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):St(this.target,this.layout.layoutBox),y0(this.target,this.targetDelta)):St(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ne(),this.relativeTargetOrigin=Ne(),Js(this.relativeTargetOrigin,this.target,p.target),St(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Gn.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Wu(this.parent.latestValues)||g0(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Je.timestamp&&(u=!1),u)return;const{layout:d,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||c))return;St(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;B1(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:m}=a;if(!m){this.projectionTransform&&(this.projectionDelta=Kr(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Kr(),this.projectionDeltaWithTransform=Kr());const v=this.projectionTransform;Gs(this.projectionDelta,this.layoutCorrected,m,this.latestValues),this.projectionTransform=If(this.projectionDelta,this.treeScale),(this.projectionTransform!==v||this.treeScale.x!==f||this.treeScale.y!==p)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m)),Gn.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},d={...this.latestValues},c=Kr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=Ne(),p=l?l.source:void 0,m=this.layout?this.layout.source:void 0,v=p!==m,b=this.getStack(),w=!b||b.members.length<=1,g=!!(v&&!w&&this.options.crossfade===!0&&!this.path.some(N_));this.animationProgress=0;let y;this.mixTargetDelta=x=>{const E=x/1e3;Vf(c.x,o.x,E),Vf(c.y,o.y,E),this.setTargetDelta(c),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Js(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),C_(this.relativeTarget,this.relativeTargetOrigin,f,E),y&&l_(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=Ne()),St(y,this.relativeTarget)),v&&(this.animationValues=d,n_(d,u,this.latestValues,E,g,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ce.update(()=>{To.hasAnimatedSinceResize=!0,this.currentAnimation=m_(0,Df,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Df),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:d}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&T0(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Ne();const c=wt(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+c;const f=wt(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}St(a,l),qr(a,d),Gs(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new u_),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const u={};for(let d=0;d<$f.length;d++){const c="rotate"+$f[d];l[c]&&(u[c]=l[c],o.setStaticValue(c,0))}o.render();for(const d in u)o.setStaticValue(d,u[d]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return g_;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Eo(o==null?void 0:o.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=Eo(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!qn(this.latestValues)&&(v.transform=d?d({},""):"none",this.hasProjected=!1),v}const f=c.animationValues||c.latestValues;this.applyTransformsToTarget(),u.transform=If(this.projectionDeltaWithTransform,this.treeScale,f),d&&(u.transform=d(f,u.transform));const{x:p,y:m}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${m.origin*100}% 0`,c.animationValues?u.opacity=c===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=c===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const v in Xo){if(f[v]===void 0)continue;const{correct:b,applyTo:w}=Xo[v],g=u.transform==="none"?f[v]:b(f[v],c);if(w){const y=w.length;for(let x=0;x<y;x++)u[w[x]]=g}else u[v]=g}return this.options.layoutId&&(u.pointerEvents=c===this?Eo(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Mf),this.root.sharedNodes.clear()}}}function v_(t){t.updateLayout()}function w_(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?_t(c=>{const f=o?n.measuredBox[c]:n.layoutBox[c],p=wt(f);f.min=r[c].min,f.max=f.min+p}):T0(i,n.layoutBox,r)&&_t(c=>{const f=o?n.measuredBox[c]:n.layoutBox[c],p=wt(r[c]);f.max=f.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[c].max=t.relativeTarget[c].min+p)});const a=Kr();Gs(a,r,n.layoutBox);const l=Kr();o?Gs(l,t.applyTransform(s,!0),n.measuredBox):Gs(l,r,n.layoutBox);const u=!_0(a);let d=!1;if(!t.resumeFrom){const c=t.getClosestProjectingParent();if(c&&!c.resumeFrom){const{snapshot:f,layout:p}=c;if(f&&p){const m=Ne();Js(m,n.layoutBox,f.layoutBox);const v=Ne();Js(v,r,p.layoutBox),k0(m,v)||(d=!0),c.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=m,t.relativeParent=c)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function x_(t){Gn.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function b_(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function S_(t){t.clearSnapshot()}function Mf(t){t.clearMeasurements()}function __(t){t.isLayoutDirty=!1}function k_(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Uf(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function E_(t){t.resolveTargetDelta()}function T_(t){t.calcProjection()}function j_(t){t.resetRotation()}function P_(t){t.removeLeadSnapshot()}function Vf(t,e,n){t.translate=ve(e.translate,0,n),t.scale=ve(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Ff(t,e,n,r){t.min=ve(e.min,n.min,r),t.max=ve(e.max,n.max,r)}function C_(t,e,n,r){Ff(t.x,e.x,n.x,r),Ff(t.y,e.y,n.y,r)}function N_(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const R_={duration:.45,ease:[.4,0,.1,1]},Bf=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),zf=Bf("applewebkit/")&&!Bf("chrome/")?Math.round:Pe;function Wf(t){t.min=zf(t.min),t.max=zf(t.max)}function O_(t){Wf(t.x),Wf(t.y)}function T0(t,e,n){return t==="position"||t==="preserve-aspect"&&!Bu(Lf(e),Lf(n),.2)}const A_=E0({attachResizeListener:(t,e)=>tn(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),El={current:void 0},j0=E0({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!El.current){const t=new A_({});t.mount(window),t.setOptions({layoutScroll:!0}),El.current=t}return El.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),L_={pan:{Feature:Y1},drag:{Feature:J1,ProjectionNode:j0,MeasureLayout:x0}},I_=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function $_(t){const e=I_.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function Ku(t,e,n=1){const[r,s]=$_(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return u0(o)?parseFloat(o):o}else return Iu(s)?Ku(s,e,n+1):s}function D_(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(s=>{const i=s.get();if(!Iu(i))return;const o=Ku(i,r);o&&s.set(o)});for(const s in e){const i=e[s];if(!Iu(i))continue;const o=Ku(i,r);o&&(e[s]=o,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:e,transitionEnd:n}}const M_=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),P0=t=>M_.has(t),U_=t=>Object.keys(t).some(P0),Hf=t=>t===yr||t===Y,Kf=(t,e)=>parseFloat(t.split(", ")[e]),qf=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return Kf(s[1],e);{const i=r.match(/^matrix\((.+)\)$/);return i?Kf(i[1],t):0}},V_=new Set(["x","y","z"]),F_=Ai.filter(t=>!V_.has(t));function B_(t){const e=[];return F_.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const cs={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:qf(4,13),y:qf(5,14)};cs.translateX=cs.x;cs.translateY=cs.y;const z_=(t,e,n)=>{const r=e.measureViewportBox(),s=e.current,i=getComputedStyle(s),{display:o}=i,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(u=>{a[u]=cs[u](r,i)}),e.render();const l=e.measureViewportBox();return n.forEach(u=>{const d=e.getValue(u);d&&d.jump(a[u]),t[u]=cs[u](l,i)}),t},W_=(t,e,n={},r={})=>{e={...e},r={...r};const s=Object.keys(e).filter(P0);let i=[],o=!1;const a=[];if(s.forEach(l=>{const u=t.getValue(l);if(!t.hasValue(l))return;let d=n[l],c=Ts(d);const f=e[l];let p;if(Zo(f)){const m=f.length,v=f[0]===null?1:0;d=f[v],c=Ts(d);for(let b=v;b<m&&f[b]!==null;b++)p?wd(Ts(f[b])===p):p=Ts(f[b])}else p=Ts(f);if(c!==p)if(Hf(c)&&Hf(p)){const m=u.get();typeof m=="string"&&u.set(parseFloat(m)),typeof f=="string"?e[l]=parseFloat(f):Array.isArray(f)&&p===Y&&(e[l]=f.map(parseFloat))}else c!=null&&c.transform&&(p!=null&&p.transform)&&(d===0||f===0)?d===0?u.set(p.transform(d)):e[l]=c.transform(f):(o||(i=B_(t),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],u.jump(f))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,u=z_(e,t,a);return i.length&&i.forEach(([d,c])=>{t.getValue(d).set(c)}),t.render(),Oa&&l!==null&&window.scrollTo({top:l}),{target:u,transitionEnd:r}}else return{target:e,transitionEnd:r}};function H_(t,e,n,r){return U_(e)?W_(t,e,n,r):{target:e,transitionEnd:r}}const K_=(t,e,n,r)=>{const s=D_(t,e,r);return e=s.target,r=s.transitionEnd,H_(t,e,n,r)},qu={current:null},C0={current:!1};function q_(){if(C0.current=!0,!!Oa)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>qu.current=t.matches;t.addListener(e),e()}else qu.current=!1}function G_(t,e,n){const{willChange:r}=e;for(const s in e){const i=e[s],o=n[s];if(ct(i))t.addValue(s,i),ra(r)&&r.add(s);else if(ct(o))t.addValue(s,us(i,{owner:t})),ra(r)&&r.remove(s);else if(o!==i)if(t.hasValue(s)){const a=t.getValue(s);!a.hasAnimated&&a.set(i)}else{const a=t.getStaticValue(s);t.addValue(s,us(a!==void 0?a:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const Gf=new WeakMap,N0=Object.keys(vi),J_=N0.length,Jf=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Y_=cd.length;class X_{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ce.render(this.render,!1,!0);const{latestValues:a,renderState:l}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=La(n),this.isVariantNode=py(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{});for(const c in d){const f=d[c];a[c]!==void 0&&ct(f)&&(f.set(a[c],!1),ra(u)&&u.add(c))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,Gf.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),C0.current||q_(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:qu.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Gf.delete(this.current),this.projection&&this.projection.unmount(),cn(this.notifyUpdate),cn(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=gr.has(e),s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ce.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,s,i){let o,a;for(let l=0;l<J_;l++){const u=N0[l],{isEnabled:d,Feature:c,ProjectionNode:f,MeasureLayout:p}=vi[u];f&&(o=f),d(n)&&(!this.features[u]&&c&&(this.features[u]=new c(this)),p&&(a=p))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:u,drag:d,dragConstraints:c,layoutScroll:f,layoutRoot:p}=n;this.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!d||c&&Wr(c),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:p})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ne()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Jf.length;r++){const s=Jf[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=e["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=G_(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<Y_;r++){const s=cd[r],i=this.props[s];(yi(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=us(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=vd(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!ct(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Pd),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class R0 extends X_{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:s},i){let o=p1(r,e||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),o&&(o=s(o))),i){h1(this,r,o);const a=K_(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function Q_(t){return window.getComputedStyle(t)}class Z_ extends R0{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(gr.has(n)){const r=_d(n);return r&&r.default||0}else{const r=Q_(e),s=(vy(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return v0(e,n)}build(e,n,r,s){fd(e,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(e,n){return yd(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ct(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,s){ky(e,n,r,s)}}class ek extends R0{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(gr.has(n)){const r=_d(n);return r&&r.default||0}return n=Ey.has(n)?n:ld(n),e.getAttribute(n)}measureInstanceViewportBox(){return Ne()}scrapeMotionValuesFromProps(e,n){return jy(e,n)}build(e,n,r,s){md(e,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(e,n,r,s){Ty(e,n,r,s)}mount(e){this.isSVGTag=gd(e.tagName),super.mount(e)}}const tk=(t,e)=>hd(t)?new ek(e,{enableHardwareAcceleration:!1}):new Z_(e,{enableHardwareAcceleration:!0}),nk={layout:{ProjectionNode:j0,MeasureLayout:x0}},rk={...C1,...Jb,...L_,...nk},P=sb((t,e)=>$b(t,e,rk,tk));function O0(){const t=S.useRef(!1);return ad(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function sk(){const t=O0(),[e,n]=S.useState(0),r=S.useCallback(()=>{t.current&&n(e+1)},[e]);return[S.useCallback(()=>ce.postRender(r),[r]),e]}class ik extends S.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function ok({children:t,isPresent:e}){const n=S.useId(),r=S.useRef(null),s=S.useRef({width:0,height:0,top:0,left:0});return S.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:l}=s.current;if(e||!r.current||!i||!o)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),S.createElement(ik,{isPresent:e,childRef:r,sizeRef:s},S.cloneElement(t,{ref:r}))}const Tl=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=Py(ak),l=S.useId(),u=S.useMemo(()=>({id:l,initial:e,isPresent:n,custom:s,onExitComplete:d=>{a.set(d,!0);for(const c of a.values())if(!c)return;r&&r()},register:d=>(a.set(d,!1),()=>a.delete(d))}),i?void 0:[n]);return S.useMemo(()=>{a.forEach((d,c)=>a.set(c,!1))},[n]),S.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=S.createElement(ok,{isPresent:n},t)),S.createElement(Ra.Provider,{value:u},t)};function ak(){return new Map}function lk(t){return S.useEffect(()=>()=>t(),[])}const Jn=t=>t.key||"";function uk(t,e){t.forEach(n=>{const r=Jn(n);e.set(r,n)})}function ck(t){const e=[];return S.Children.forEach(t,n=>{S.isValidElement(n)&&e.push(n)}),e}const Pt=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=S.useContext(dd).forceRender||sk()[0],l=O0(),u=ck(t);let d=u;const c=S.useRef(new Map).current,f=S.useRef(d),p=S.useRef(new Map).current,m=S.useRef(!0);if(ad(()=>{m.current=!1,uk(u,p),f.current=d}),lk(()=>{m.current=!0,p.clear(),c.clear()}),m.current)return S.createElement(S.Fragment,null,d.map(g=>S.createElement(Tl,{key:Jn(g),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},g)));d=[...d];const v=f.current.map(Jn),b=u.map(Jn),w=v.length;for(let g=0;g<w;g++){const y=v[g];b.indexOf(y)===-1&&!c.has(y)&&c.set(y,void 0)}return o==="wait"&&c.size&&(d=[]),c.forEach((g,y)=>{if(b.indexOf(y)!==-1)return;const x=p.get(y);if(!x)return;const E=v.indexOf(y);let _=g;if(!_){const k=()=>{c.delete(y);const j=Array.from(p.keys()).filter(T=>!b.includes(T));if(j.forEach(T=>p.delete(T)),f.current=u.filter(T=>{const N=Jn(T);return N===y||j.includes(N)}),!c.size){if(l.current===!1)return;a(),r&&r()}};_=S.createElement(Tl,{key:Jn(x),isPresent:!1,onExitComplete:k,custom:e,presenceAffectsLayout:i,mode:o},x),c.set(y,_)}d.splice(E,0,_)}),d=d.map(g=>{const y=g.key;return c.has(y)?g:S.createElement(Tl,{key:Jn(g),isPresent:!0,presenceAffectsLayout:i,mode:o},g)}),S.createElement(S.Fragment,null,c.size?d:d.map(g=>S.cloneElement(g)))};function Ma(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function dk(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(c){o(c)}}function l(d){try{u(r.throw(d))}catch(c){o(c)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})}const hk=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Cd extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class fk extends Cd{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Yf extends Cd{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Xf extends Cd{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Gu;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Gu||(Gu={}));class pk{constructor(e,{headers:n={},customFetch:r,region:s=Gu.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=hk(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return dk(this,arguments,void 0,function*(n,r={}){var s;let i,o;try{const{headers:a,method:l,body:u,signal:d,timeout:c}=r;let f={},{region:p}=r;p||(p=this.region);const m=new URL(`${this.url}/${n}`);p&&p!=="any"&&(f["x-region"]=p,m.searchParams.set("forceFunctionRegion",p));let v;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",v=u):typeof u=="string"?(f["Content-Type"]="text/plain",v=u):typeof FormData<"u"&&u instanceof FormData?v=u:(f["Content-Type"]="application/json",v=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?v=JSON.stringify(u):v=u;let b=d;c&&(o=new AbortController,i=setTimeout(()=>o.abort(),c),d?(b=o.signal,d.addEventListener("abort",()=>o.abort())):b=o.signal);const w=yield this.fetch(m.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:v,signal:b}).catch(E=>{throw new fk(E)}),g=w.headers.get("x-relay-error");if(g&&g==="true")throw new Yf(w);if(!w.ok)throw new Xf(w);let y=((s=w.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),x;return y==="application/json"?x=yield w.json():y==="application/octet-stream"||y==="application/pdf"?x=yield w.blob():y==="text/event-stream"?x=w:y==="multipart/form-data"?x=yield w.formData():x=yield w.text(),{data:x,error:null,response:w}}catch(a){return{data:null,error:a,response:a instanceof Xf||a instanceof Yf?a.context:void 0}}finally{i&&clearTimeout(i)}})}}var mk=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},gk=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,a=null,l=null,u=i.status,d=i.statusText;if(i.ok){var c,f;if(n.method!=="HEAD"){var p;const w=await i.text();w===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((p=n.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?a=w:a=JSON.parse(w))}const v=(c=n.headers.get("Prefer"))===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),b=(f=i.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");v&&b&&b.length>1&&(l=parseInt(b[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,u=406,d="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var m;const v=await i.text();try{o=JSON.parse(v),Array.isArray(o)&&i.status===404&&(a=[],o=null,u=200,d="OK")}catch{i.status===404&&v===""?(u=204,d="No Content"):o={message:v}}if(o&&n.isMaybeSingle&&(!(o==null||(m=o.details)===null||m===void 0)&&m.includes("0 rows"))&&(o=null,u=200,d="OK"),o&&n.shouldThrowOnError)throw new mk(o)}return{error:o,data:a,count:l,status:u,statusText:d}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let a="";const l=i==null?void 0:i.cause;if(l){var u,d,c,f;const m=(u=l==null?void 0:l.message)!==null&&u!==void 0?u:"",v=(d=l==null?void 0:l.code)!==null&&d!==void 0?d:"";a=`${(c=i==null?void 0:i.name)!==null&&c!==void 0?c:"FetchError"}: ${i==null?void 0:i.message}`,a+=`

Caused by: ${(f=l==null?void 0:l.name)!==null&&f!==void 0?f:"Error"}: ${m}`,v&&(a+=` (${v})`),l!=null&&l.stack&&(a+=`
${l.stack}`)}else{var p;a=(p=i==null?void 0:i.stack)!==null&&p!==void 0?p:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(t,e)}returns(){return this}overrideTypes(){return this}},yk=class extends gk{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(i,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:i="text"}={}){var o;const a=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${a};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const Qf=new RegExp("[,()]");var Cr=class extends yk{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&Qf.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&Qf.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${s}fts${i}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},vk=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:n=!1,count:r}=e??{},s=n?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join(""),{url:a,headers:l}=this.cloneRequestState();return a.searchParams.set("select",o),r&&l.append("Prefer",`count=${r}`),new Cr({method:s,url:a,headers:l,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const s="POST",{url:i,headers:o}=this.cloneRequestState();if(e&&o.append("Prefer",`count=${e}`),n||o.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(a.length>0){const l=[...new Set(a)].map(u=>`"${u}"`);i.searchParams.set("columns",l.join(","))}}return new Cr({method:s,url:i,headers:o,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){var i;const o="POST",{url:a,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&a.searchParams.set("on_conflict",e),r&&l.append("Prefer",`count=${r}`),s||l.append("Prefer","missing=default"),Array.isArray(t)){const u=t.reduce((d,c)=>d.concat(Object.keys(c)),[]);if(u.length>0){const d=[...new Set(u)].map(c=>`"${c}"`);a.searchParams.set("columns",d.join(","))}}return new Cr({method:o,url:a,headers:l,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(t,{count:e}={}){var n;const r="PATCH",{url:s,headers:i}=this.cloneRequestState();return e&&i.append("Prefer",`count=${e}`),new Cr({method:r,url:s,headers:i,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE",{url:r,headers:s}=this.cloneRequestState();return t&&s.append("Prefer",`count=${t}`),new Cr({method:n,url:r,headers:s,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},wk=class A0{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new vk(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new A0(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let u;const d=p=>p!==null&&typeof p=="object"&&(!Array.isArray(p)||p.some(d)),c=r&&Object.values(n).some(d);c?(a="POST",u=n):r||s?(a=r?"HEAD":"GET",Object.entries(n).filter(([p,m])=>m!==void 0).map(([p,m])=>[p,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([p,m])=>{l.searchParams.append(p,m)})):(a="POST",u=n);const f=new Headers(this.headers);return c?f.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&f.set("Prefer",`count=${i}`),new Cr({method:a,url:l,headers:f,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class xk{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const s=r.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const bk="2.91.0",Sk=`realtime-js/${bk}`,_k="1.0.0",L0="2.0.0",Zf=L0,Ju=1e4,kk=1e3,Ek=100;var vn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(vn||(vn={}));var Le;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Le||(Le={}));var $t;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})($t||($t={}));var Yu;(function(t){t.websocket="websocket"})(Yu||(Yu={}));var Xn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Xn||(Xn={}));class Tk{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,n,r){var s,i;const o=e.topic,a=(s=e.ref)!==null&&s!==void 0?s:"",l=(i=e.join_ref)!==null&&i!==void 0?i:"",u=e.payload.event,d=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},c=Object.keys(d).length===0?"":JSON.stringify(d);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`metadata length ${c.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+u.length+c.length,p=new ArrayBuffer(this.HEADER_LENGTH+f);let m=new DataView(p),v=0;m.setUint8(v++,this.KINDS.userBroadcastPush),m.setUint8(v++,l.length),m.setUint8(v++,a.length),m.setUint8(v++,o.length),m.setUint8(v++,u.length),m.setUint8(v++,c.length),m.setUint8(v++,n),Array.from(l,w=>m.setUint8(v++,w.charCodeAt(0))),Array.from(a,w=>m.setUint8(v++,w.charCodeAt(0))),Array.from(o,w=>m.setUint8(v++,w.charCodeAt(0))),Array.from(u,w=>m.setUint8(v++,w.charCodeAt(0))),Array.from(c,w=>m.setUint8(v++,w.charCodeAt(0)));var b=new Uint8Array(p.byteLength+r.byteLength);return b.set(new Uint8Array(p),0),b.set(new Uint8Array(r),p.byteLength),b.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[s,i,o,a,l]=r;return n({join_ref:s,ref:i,topic:o,event:a,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,s)}}_decodeUserBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2),o=n.getUint8(3),a=n.getUint8(4);let l=this.HEADER_LENGTH+4;const u=r.decode(e.slice(l,l+s));l=l+s;const d=r.decode(e.slice(l,l+i));l=l+i;const c=r.decode(e.slice(l,l+o));l=l+o;const f=e.slice(l,e.byteLength),p=a===this.JSON_ENCODING?JSON.parse(r.decode(f)):f,m={type:this.BROADCAST_EVENT,event:d,payload:p};return o>0&&(m.meta=JSON.parse(c)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:m}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class I0{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var le;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(le||(le={}));const ep=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=jk(o,t,e,s),i),{}):{}},jk=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?$0(i,o):Xu(o)},$0=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Rk(e,n)}switch(t){case le.bool:return Pk(e);case le.float4:case le.float8:case le.int2:case le.int4:case le.int8:case le.numeric:case le.oid:return Ck(e);case le.json:case le.jsonb:return Nk(e);case le.timestamp:return Ok(e);case le.abstime:case le.date:case le.daterange:case le.int4range:case le.int8range:case le.money:case le.reltime:case le.text:case le.time:case le.timestamptz:case le.timetz:case le.tsrange:case le.tstzrange:return Xu(e);default:return Xu(e)}},Xu=t=>t,Pk=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Ck=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Nk=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},Rk=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>$0(e,a))}return t},Ok=t=>typeof t=="string"?t.replace(" ","T"):t,D0=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class jl{constructor(e,n,r={},s=Ju){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var tp;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(tp||(tp={}));class Ys{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ys.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Ys.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ys.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(i,(u,d)=>{o[u]||(l[u]=d)}),this.map(o,(u,d)=>{const c=i[u];if(c){const f=d.map(b=>b.presence_ref),p=c.map(b=>b.presence_ref),m=d.filter(b=>p.indexOf(b.presence_ref)<0),v=c.filter(b=>f.indexOf(b.presence_ref)<0);m.length>0&&(a[u]=m),v.length>0&&(l[u]=v)}else a[u]=d}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var u;const d=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),d.length>0){const c=e[a].map(p=>p.presence_ref),f=d.filter(p=>c.indexOf(p.presence_ref)<0);e[a].unshift(...f)}r(a,d,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const d=l.map(c=>c.presence_ref);u=u.filter(c=>d.indexOf(c.presence_ref)<0),e[a]=u,s(a,u,l),u.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var np;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(np||(np={}));var Xs;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Xs||(Xs={}));var Xt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Xt||(Xt={}));class Gr{constructor(e,n={config:{}},r){var s,i;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Le.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new jl(this,$t.join,this.params,this.timeout),this.rejoinTimer=new I0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Le.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Le.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Le.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Le.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Le.errored,this.rejoinTimer.scheduleTimeout())}),this._on($t.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Ys(this),this.broadcastEndpointURL=D0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Le.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Xs.PRESENCE]&&this.bindings[Xs.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,c={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(Xt.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(Xt.CLOSED)),this.updateJoinPayload(Object.assign({config:f},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var m;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){e==null||e(Xt.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,b=(m=v==null?void 0:v.length)!==null&&m!==void 0?m:0,w=[];for(let g=0;g<b;g++){const y=v[g],{filter:{event:x,schema:E,table:_,filter:k}}=y,j=p&&p[g];if(j&&j.event===x&&Gr.isFilterValueEqual(j.schema,E)&&Gr.isFilterValueEqual(j.table,_)&&Gr.isFilterValueEqual(j.filter,k))w.push(Object.assign(Object.assign({},y),{id:j.id}));else{this.unsubscribe(),this.state=Le.errored,e==null||e(Xt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(Xt.SUBSCRIBED);return}}).receive("error",p=>{this.state=Le.errored,e==null||e(Xt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Xt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Le.joined&&e===Xs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const u=await a.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Le.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger($t.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new jl(this,$t.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Le.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new jl(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Ek){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:d}=$t;if(r&&[a,l,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var m,v,b;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((b=(v=p.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(p=>p.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var m,v,b,w,g,y,x,E;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const _=p.id,k=(m=p.filter)===null||m===void 0?void 0:m.event;return _&&((v=n.ids)===null||v===void 0?void 0:v.includes(_))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))&&(!(!((w=p.filter)===null||w===void 0)&&w.table)||p.filter.table===((g=n.data)===null||g===void 0?void 0:g.table))}else{const _=(x=(y=p==null?void 0:p.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return _==="*"||_===((E=n==null?void 0:n.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:v,table:b,commit_timestamp:w,type:g,errors:y}=m;f=Object.assign(Object.assign({},{schema:v,table:b,commit_timestamp:w,eventType:g,new:{},old:{},errors:y}),this._getPayloadRecords(m))}p.callback(f,r)})}_isClosed(){return this.state===Le.closed}_isJoined(){return this.state===Le.joined}_isJoining(){return this.state===Le.joining}_isLeaving(){return this.state===Le.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Gr.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on($t.close,{},e)}_onError(e){this._on($t.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Le.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=ep(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=ep(e.columns,e.old_record)),n}}const Pl=()=>{},oo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Ak=[1e3,2e3,5e3,1e4],Lk=1e4,Ik=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class $k{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ju,this.transport=null,this.heartbeatIntervalMs=oo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Pl,this.ref=0,this.reconnectTimer=null,this.vsn=Zf,this.logger=Pl,this.conn=null,this.sendBuffer=[],this.serializer=new Tk,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Yu.websocket}`,this.httpEndpoint=D0(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=xk.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case vn.connecting:return Xn.Connecting;case vn.open:return Xn.Open;case vn.closing:return Xn.Closing;default:return Xn.Closed}}isConnected(){return this.connectionState()===Xn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Gr(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(kk,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},oo.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",u)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:s,payload:i,ref:o}=n,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${s} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===vn.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===vn.open||this.conn.readyState===vn.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger($t.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Ik],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const i={access_token:n,version:Sk};n&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push($t.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new I0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},oo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,i,o,a,l,u,d,c,f,p;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Ju,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:oo.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:Pl,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:Zf,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:m=>Ak[m-1]||Lk,this.vsn){case _k:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(m,v)=>v(JSON.stringify(m)),this.decode=(c=e==null?void 0:e.decode)!==null&&c!==void 0?c:(m,v)=>v(JSON.parse(m));break;case L0:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var xi=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Dk(t,e,n){const r=new URL(e,t);if(n)for(const[s,i]of Object.entries(n))i!==void 0&&r.searchParams.set(s,i);return r.toString()}async function Mk(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function Uk(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:i,headers:o}){const a=Dk(t.baseUrl,r,s),l=await Mk(t.auth),u=await e(a,{method:n,headers:{...i?{"Content-Type":"application/json"}:{},...l,...o},body:i?JSON.stringify(i):void 0}),d=await u.text(),c=(u.headers.get("content-type")||"").includes("application/json"),f=c&&d?JSON.parse(d):d;if(!u.ok){const p=c?f:void 0,m=p==null?void 0:p.error;throw new xi((m==null?void 0:m.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:m==null?void 0:m.type,icebergCode:m==null?void 0:m.code,details:p})}return{status:u.status,headers:u.headers,data:f}}}}function ao(t){return t.join("")}var Vk=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:ao(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ao(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ao(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ao(t.namespace)}`}),!0}catch(e){if(e instanceof xi&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof xi&&n.status===409)return;throw n}}};function xr(t){return t.join("")}var Fk=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${xr(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${xr(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${xr(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${xr(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${xr(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${xr(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof xi&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof xi&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},Bk=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=Uk({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new Vk(this.client,e),this.tableOps=new Fk(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Ua=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function ge(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var zk=class extends Ua{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Qu=class extends Ua{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const Nd=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Wk=()=>Response,Zu=t=>{if(Array.isArray(t))return t.map(n=>Zu(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Zu(r)}),e},Hk=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Kk=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function bi(t){"@babel/helpers - typeof";return bi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bi(t)}function qk(t,e){if(bi(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gk(t){var e=qk(t,"string");return bi(e)=="symbol"?e:e+""}function Jk(t,e,n){return(e=Gk(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function J(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rp(Object(n),!0).forEach(function(r){Jk(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rp(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const Cl=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},Yk=async(t,e,n)=>{t instanceof await Wk()&&!(n!=null&&n.noResolveJson)?t.json().then(r=>{const s=t.status||500,i=(r==null?void 0:r.statusCode)||s+"";e(new zk(Cl(r),s,i))}).catch(r=>{e(new Qu(Cl(r),r))}):e(new Qu(Cl(t),t))},Xk=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(Hk(r)?(s.headers=J({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),J(J({},s),n))};async function Di(t,e,n,r,s,i){return new Promise((o,a)=>{t(n,Xk(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Yk(l,a,r))})}async function Si(t,e,n,r){return Di(t,"GET",e,n,r)}async function Lt(t,e,n,r,s){return Di(t,"POST",e,r,s,n)}async function ec(t,e,n,r,s){return Di(t,"PUT",e,r,s,n)}async function Qk(t,e,n,r){return Di(t,"HEAD",e,J(J({},n),{},{noResolveJson:!0}),r)}async function Rd(t,e,n,r,s){return Di(t,"DELETE",e,r,s,n)}var Zk=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(ge(e))return{data:null,error:e};throw e}}};let M0;M0=Symbol.toStringTag;var eE=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[M0]="BlobDownloadBuilder",this.promise=null}asStream(){return new Zk(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(ge(e))return{data:null,error:e};throw e}}};const tE={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},sp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var nE=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=Nd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,r){var s=this;try{let i;const o=J(J({},sp),r);let a=J(J({},s.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",s.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(l))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=s.toBase64(s.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),r!=null&&r.headers&&(a=J(J({},a),r.headers));const u=s._removeEmptyFolders(e),d=s._getFinalPath(u),c=await(t=="PUT"?ec:Lt)(s.fetch,`${s.url}/object/${d}`,i,J({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:c.Id,fullPath:c.Key},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(ge(i))return{data:null,error:i};throw i}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var s=this;const i=s._removeEmptyFolders(t),o=s._getFinalPath(i),a=new URL(s.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let l;const u=J({upsert:sp.upsert},r),d=J(J({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{data:{path:i,fullPath:(await ec(s.fetch,a.toString(),l,{headers:d})).Key},error:null}}catch(l){if(s.shouldThrowOnError)throw l;if(ge(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(t,e){var n=this;try{let r=n._getFinalPath(t);const s=J({},n.headers);e!=null&&e.upsert&&(s["x-upsert"]="true");const i=await Lt(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(n.url+i.url),a=o.searchParams.get("token");if(!a)throw new Ua("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ge(r))return{data:null,error:r};throw r}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;try{return{data:await Lt(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ge(s))return{data:null,error:s};throw s}}async copy(t,e,n){var r=this;try{return{data:{path:(await Lt(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ge(s))return{data:null,error:s};throw s}}async createSignedUrl(t,e,n){var r=this;try{let s=r._getFinalPath(t),i=await Lt(r.fetch,`${r.url}/object/sign/${s}`,J({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${r.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ge(s))return{data:null,error:s};throw s}}async createSignedUrls(t,e,n){var r=this;try{const s=await Lt(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>J(J({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ge(s))return{data:null,error:s};throw s}}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),s=r?`?${r}`:"",i=this._getFinalPath(t),o=()=>Si(this.fetch,`${this.url}/${n}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new eE(o,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:Zu(await Si(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(ge(r))return{data:null,error:r};throw r}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await Qk(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(ge(r)&&r instanceof Qu){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],s=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&r.push(s);const i=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});o!==""&&r.push(o);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${a}`)}}}async remove(t){var e=this;try{return{data:await Rd(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ge(n))return{data:null,error:n};throw n}}async list(t,e,n){var r=this;try{const s=J(J(J({},tE),e),{},{prefix:t||""});return{data:await Lt(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},n),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ge(s))return{data:null,error:s};throw s}}async listV2(t,e){var n=this;try{const r=J({},t);return{data:await Lt(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ge(r))return{data:null,error:r};throw r}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const U0="2.91.0",V0={"X-Client-Info":`storage-js/${U0}`};var rE=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1;const s=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=J(J({},V0),e),this.fetch=Nd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await Si(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ge(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await Si(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ge(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await Lt(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ge(r))return{data:null,error:r};throw r}}async updateBucket(t,e){var n=this;try{return{data:await ec(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ge(r))return{data:null,error:r};throw r}}async emptyBucket(t){var e=this;try{return{data:await Lt(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ge(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await Rd(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ge(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},sE=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=J(J({},V0),e),this.fetch=Nd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Lt(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ge(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),s=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await Si(e.fetch,s,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ge(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await Rd(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ge(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!Kk(t))throw new Ua("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new Bk({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(s,a),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}};const Od={"X-Client-Info":`storage-js/${U0}`,"Content-Type":"application/json"};var F0=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function pt(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var Nl=class extends F0{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},iE=class extends F0{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const Ad=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),oE=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},ip=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),aE=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const r=t.status||500,s=t;if(typeof s.json=="function")s.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||r+"";e(new Nl(ip(i),r,o))}).catch(()=>{const i=r+"";e(new Nl(s.statusText||`HTTP ${r} error`,r,i))});else{const i=r+"";e(new Nl(s.statusText||`HTTP ${r} error`,r,i))}}else e(new iE(ip(t),t))},lE=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(oE(r)?(s.headers=J({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,J(J({},s),n)):s};async function uE(t,e,n,r,s,i){return new Promise((o,a)=>{t(n,lE(e,r,s,i)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const u=l.headers.get("content-type");return!u||!u.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>aE(l,a,r))})}async function mt(t,e,n,r,s){return uE(t,"POST",e,r,s,n)}var cE=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=J(J({},Od),e),this.fetch=Ad(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await mt(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await mt(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(pt(r))return{data:null,error:r};throw r}}async listIndexes(t){var e=this;try{return{data:await mt(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await mt(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(pt(r))return{data:null,error:r};throw r}}},dE=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=J(J({},Od),e),this.fetch=Ad(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await mt(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await mt(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await mt(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await mt(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await mt(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}},hE=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=J(J({},Od),e),this.fetch=Ad(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await mt(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await mt(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await mt(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await mt(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(pt(n))return{data:null,error:n};throw n}}},fE=class extends hE{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new pE(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},pE=class extends cE{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,J(J({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,J(J({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new mE(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},mE=class extends dE{constructor(t,e,n,r,s){super(t,e,s),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,J(J({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,J(J({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,J(J({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,J(J({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,J(J({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},gE=class extends rE{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new nE(this.url,this.headers,t,this.fetch)}get vectors(){return new fE(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new sE(this.url+"/iceberg",this.headers,this.fetch)}};const B0="2.91.0",Nr=30*1e3,tc=3,Rl=tc*Nr,yE="http://localhost:9999",vE="supabase.auth.token",wE={"X-Client-Info":`gotrue-js/${B0}`},nc="X-Supabase-Api-Version",z0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},xE=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,bE=10*60*1e3;class _i extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function z(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class SE extends _i{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function _E(t){return z(t)&&t.name==="AuthApiError"}class Qn extends _i{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class hn extends _i{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class ht extends hn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function kE(t){return z(t)&&t.name==="AuthSessionMissingError"}class br extends hn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class lo extends hn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class uo extends hn{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function EE(t){return z(t)&&t.name==="AuthImplicitGrantRedirectError"}class op extends hn{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class TE extends hn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class rc extends hn{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Ol(t){return z(t)&&t.name==="AuthRetryableFetchError"}class ap extends hn{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class sc extends hn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ia="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),lp=` 	
\r=`.split(""),jE=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<lp.length;e+=1)t[lp[e].charCodeAt(0)]=-2;for(let e=0;e<ia.length;e+=1)t[ia[e].charCodeAt(0)]=e;return t})();function up(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(ia[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(ia[r]),e.queuedBits-=6}}function W0(t,e,n){const r=jE[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function cp(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{NE(o,r,n)};for(let o=0;o<t.length;o+=1)W0(t.charCodeAt(o),s,i);return e.join("")}function PE(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function CE(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}PE(r,e)}}function NE(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function ts(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)W0(t.charCodeAt(s),n,r);return new Uint8Array(e)}function RE(t){const e=[];return CE(t,n=>e.push(n)),new Uint8Array(e)}function rr(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>up(s,n,r)),up(null,n,r),e.join("")}function OE(t){return Math.round(Date.now()/1e3)+t}function AE(){return Symbol("auth-callback")}const Fe=()=>typeof window<"u"&&typeof document<"u",zn={tested:!1,writable:!1},H0=()=>{if(!Fe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(zn.tested)return zn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),zn.tested=!0,zn.writable=!0}catch{zn.tested=!0,zn.writable=!1}return zn.writable};function LE(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const K0=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),IE=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Rr=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Wn=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ve=async(t,e)=>{await t.removeItem(e)};class Va{constructor(){this.promise=new Va.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Va.promiseConstructor=Promise;function Al(t){const e=t.split(".");if(e.length!==3)throw new sc("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!xE.test(e[r]))throw new sc("JWT not in base64url format");return{header:JSON.parse(cp(e[0])),payload:JSON.parse(cp(e[1])),signature:ts(e[2]),raw:{header:e[0],payload:e[1]}}}async function $E(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function DE(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function ME(t){return("0"+t.toString(16)).substr(-2)}function UE(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,ME).join("")}async function VE(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function FE(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await VE(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Sr(t,e,n=!1){const r=UE();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Rr(t,`${e}-code-verifier`,s);const i=await FE(r);return[i,r===i?"plain":"s256"]}const BE=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function zE(t){const e=t.headers.get(nc);if(!e||!e.match(BE))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function WE(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function HE(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const KE=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function _r(t){if(!KE.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ll(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function qE(t,e){return new Proxy(t,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,s)}})}function dp(t){return JSON.parse(JSON.stringify(t))}const Yn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),GE=[502,503,504];async function hp(t){var e;if(!IE(t))throw new rc(Yn(t),0);if(GE.includes(t.status))throw new rc(Yn(t),t.status);let n;try{n=await t.json()}catch(i){throw new Qn(Yn(i),i)}let r;const s=zE(t);if(s&&s.getTime()>=z0["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new ap(Yn(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new ht}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new ap(Yn(n),t.status,n.weak_password.reasons);throw new SE(Yn(n),t.status||500,r)}const JE=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function G(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[nc]||(i[nc]=z0["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await YE(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function YE(t,e,n,r,s,i){const o=JE(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new rc(Yn(l),0)}if(a.ok||await hp(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await hp(l)}}function Ot(t){var e;let n=null;ZE(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=OE(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function fp(t){const e=Ot(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function bn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function XE(t){return{data:t,error:null}}function QE(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=Ma(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function pp(t){return t}function ZE(t){return t.access_token&&t.refresh_token&&t.expires_in}const Il=["global","local","others"];class eT{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=K0(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Il[0]){if(Il.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Il.join(", ")}`);try{return await G(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(z(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await G(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:bn})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Ma(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await G(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:QE,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(z(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await G(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:bn})}catch(n){if(z(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},d=await G(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:pp});if(d.error)throw d.error;const c=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const v=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(m.split(";")[1].split("=")[1]);u[`${b}Page`]=v}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},c),u),error:null}}catch(u){if(z(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){_r(e);try{return await G(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:bn})}catch(n){if(z(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){_r(e);try{return await G(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:bn})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){_r(e);try{return await G(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:bn})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){_r(e.userId);try{const{data:n,error:r}=await G(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(z(n))return{data:null,error:n};throw n}}async _deleteFactor(e){_r(e.userId),_r(e.id);try{return{data:await G(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(z(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},d=await G(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:pp});if(d.error)throw d.error;const c=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const v=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(m.split(";")[1].split("=")[1]);u[`${b}Page`]=v}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},c),u),error:null}}catch(u){if(z(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await G(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(z(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await G(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(z(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await G(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(z(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await G(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(z(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await G(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(z(n))return{data:null,error:n};throw n}}}function mp(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const kr={debug:!!(globalThis&&H0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class q0 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class tT extends q0{}async function nT(t,e,n){kr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),kr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){kr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{kr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw kr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new tT(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(kr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function rT(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function G0(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function sT(t){return parseInt(t,16)}function iT(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function oT(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:u,scheme:d,uri:c,version:f}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!c)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=G0(t.address),m=d?`${d}://${r}`:r,v=t.statement?`${t.statement}
`:"",b=`${m} wants you to sign in with your Ethereum account:
${p}

${v}`;let w=`URI: ${c}
Version: ${f}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(w+=`
Expiration Time: ${s.toISOString()}`),a&&(w+=`
Not Before: ${a.toISOString()}`),l&&(w+=`
Request ID: ${l}`),u){let g=`
Resources:`;for(const y of u){if(!y||typeof y!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${y}`);g+=`
- ${y}`}w+=g}return`${b}
${w}`}class Re extends Error{constructor({message:e,code:n,cause:r,name:s}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class oa extends Re{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function aT({error:t,options:e}){var n,r,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Re({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Re({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Re({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Re({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Re({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Re({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Re({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Re({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(J0(o)){if(i.rp.id!==o)return new Re({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Re({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Re({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Re({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Re({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function lT({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Re({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Re({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(J0(r)){if(n.rpId!==r)return new Re({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Re({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Re({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Re({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class uT{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const cT=new uT;function dT(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,s=Ma(t,["challenge","user","excludeCredentials"]),i=ts(e).buffer,o=Object.assign(Object.assign({},n),{id:ts(n.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:ts(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function hT(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Ma(t,["challenge","allowCredentials"]),s=ts(e).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:ts(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function fT(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:rr(new Uint8Array(t.response.attestationObject)),clientDataJSON:rr(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function pT(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:rr(new Uint8Array(s.authenticatorData)),clientDataJSON:rr(new Uint8Array(s.clientDataJSON)),signature:rr(new Uint8Array(s.signature)),userHandle:s.userHandle?rr(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function J0(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function gp(){var t,e;return!!(Fe()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function mT(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new oa("Browser returned unexpected credential type",e)}:{data:null,error:new oa("Empty credential response",e)}}catch(e){return{data:null,error:aT({error:e,options:t})}}}async function gT(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new oa("Browser returned unexpected credential type",e)}:{data:null,error:new oa("Empty credential response",e)}}catch(e){return{data:null,error:lT({error:e,options:t})}}}const yT={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},vT={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function aa(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of t)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(n(o))r[i]=o;else if(e(o)){const a=r[i];e(a)?r[i]=aa(a,o):r[i]=aa(o)}else r[i]=o}return r}function wT(t,e){return aa(yT,t,e||{})}function xT(t,e){return aa(vT,t,e||{})}class bT{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!o)return{data:null,error:a};const l=s??cT.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=wT(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:c}=await mT({publicKey:u,signal:l});return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:c}}case"request":{const u=xT(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:c}=await gT(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:l}));return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:c}}}}catch(o){return z(o)?{data:null,error:o}:{data:null,error:new Qn("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new _i("rpId is required for WebAuthn authentication")};try{if(!gp())return{data:null,error:new Qn("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return z(o)?{data:null,error:o}:{data:null,error:new Qn("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new _i("rpId is required for WebAuthn registration")};try{if(!gp())return{data:null,error:new Qn("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(d=>{var c;return(c=d.data)===null||c===void 0?void 0:c.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:a};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return z(o)?{data:null,error:o}:{data:null,error:new Qn("Unexpected error in register",o)}}}}rT();const ST={url:yE,storageKey:vE,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:wE,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function yp(t,e,n){return await n()}const Er={};class ki{get jwks(){var e,n;return(n=(e=Er[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Er[this.storageKey]=Object.assign(Object.assign({},Er[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Er[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Er[this.storageKey]=Object.assign(Object.assign({},Er[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},ST),e);if(this.storageKey=i.storageKey,this.instanceID=(n=ki.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,ki.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Fe()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new eT({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=K0(i.fetch),this.lock=i.lock||yp,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&Fe()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=nT:this.lock=yp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new bT(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:H0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=mp(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=mp(this.memoryStorage)),Fe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${B0}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Fe()&&(n=LE(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Fe()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),EE(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return z(n)?this._returnResult({error:n}):this._returnResult({error:new Qn("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ot}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(z(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:d,password:c,options:f}=e;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await Sr(this.storage,this.storageKey)),i=await G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:c,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:m},xform:Ot})}else if("phone"in e){const{phone:d,password:c,options:f}=e;i=await G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:c,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Ot})}else throw new lo("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return await Ve(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(await Ve(this.storage,`${this.storageKey}-code-verifier`),z(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await G(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:fp})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await G(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:fp})}else throw new lo("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const i=new br;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(z(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,s,i,o,a,l,u,d,c,f;let p,m;if("message"in e)p=e.message,m=e.signature;else{const{chain:v,wallet:b,statement:w,options:g}=e;let y;if(Fe())if(typeof b=="object")y=b;else{const T=window;if("ethereum"in T&&typeof T.ethereum=="object"&&"request"in T.ethereum&&typeof T.ethereum.request=="function")y=T.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=b}const x=new URL((n=g==null?void 0:g.url)!==null&&n!==void 0?n:window.location.href),E=await y.request({method:"eth_requestAccounts"}).then(T=>T).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!E||E.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const _=G0(E[0]);let k=(r=g==null?void 0:g.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!k){const T=await y.request({method:"eth_chainId"});k=sT(T)}const j={domain:x.host,address:_,statement:w,uri:x.href,version:"1",chainId:k,nonce:(s=g==null?void 0:g.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=g==null?void 0:g.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=g==null?void 0:g.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=g==null?void 0:g.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=g==null?void 0:g.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=g==null?void 0:g.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=oT(j),m=await y.request({method:"personal_sign",params:[iT(p),_]})}try{const{data:v,error:b}=await G(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:m},!((c=e.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Ot});if(b)throw b;if(!v||!v.session||!v.user){const w=new br;return this._returnResult({data:{user:null,session:null},error:w})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:b})}catch(v){if(z(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(e){var n,r,s,i,o,a,l,u,d,c,f,p;let m,v;if("message"in e)m=e.message,v=e.signature;else{const{chain:b,wallet:w,statement:g,options:y}=e;let x;if(Fe())if(typeof w=="object")x=w;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))x=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=w}const E=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in x&&x.signIn){const _=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),g?{statement:g}:null));let k;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")k=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)k=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)m=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),v=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${E.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(s=(r=y==null?void 0:y.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((a=y==null?void 0:y.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((c=(d=y==null?void 0:y.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||c===void 0)&&c.length?["Resources",...y.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const _=await x.signMessage(new TextEncoder().encode(m),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=_}}try{const{data:b,error:w}=await G(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:rr(v)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Ot});if(w)throw w;if(!b||!b.session||!b.user){const g=new br;return this._returnResult({data:{user:null,session:null},error:g})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:w})}catch(b){if(z(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(e){const n=await Wn(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new TE;const{data:i,error:o}=await G(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Ot});if(await Ve(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new br;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),setTimeout(async()=>{await this._notifyAllSubscribers("SIGNED_IN",i.session)},0)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await Ve(this.storage,`${this.storageKey}-code-verifier`),z(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await G(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ot}),{data:l,error:u}=a;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const d=new br;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(n){if(z(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Sr(this.storage,this.storageKey));const{error:c}=await G(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:d}=await G(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new lo("You must provide either an email or phone number.")}catch(a){if(await Ve(this.storage,`${this.storageKey}-code-verifier`),z(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await G(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Ot});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(z(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var n,r,s,i,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await Sr(this.storage,this.storageKey));const u=await G(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:XE});return!((i=u.data)===null||i===void 0)&&i.url&&Fe()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(a){if(await Ve(this.storage,`${this.storageKey}-code-verifier`),z(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new ht;const{error:s}=await G(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(z(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await G(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await G(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new lo("You must provide either an email or phone number and a type")}catch(n){if(z(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Wn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Rl:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Wn(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Ll()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=qE(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await G(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:bn}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ht}:await G(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:bn})})}catch(n){if(z(n))return kE(n)&&(await this._removeSession(),await Ve(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new ht;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Sr(this.storage,this.storageKey));const{data:u,error:d}=await G(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:bn});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await Ve(this.storage,`${this.storageKey}-code-verifier`),z(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ht;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=Al(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(n){if(z(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new ht;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(z(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Fe())throw new uo("No browser detected.");if(e.error||e.error_description||e.error_code)throw new uo(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new op("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new uo("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new op("No code detected.");const{data:g,error:y}=await this._exchangeCodeForSession(e.code);if(y)throw y;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!i||!a||!o||!u)throw new uo("No session defined in URL");const d=Math.round(Date.now()/1e3),c=parseInt(a);let f=d+c;l&&(f=parseInt(l));const p=f-d;p*1e3<=Nr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${c}s`);const m=f-c;d-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,d);const{data:v,error:b}=await this._getUser(i);if(b)throw b;const w={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:c,expires_at:f,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:w,redirectType:e.type},error:null})}catch(r){if(z(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Wn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({error:i});const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(_E(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await Ve(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=AE(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Sr(this.storage,this.storageKey,!0));try{return await G(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(await Ve(this.storage,`${this.storageKey}-code-verifier`),z(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(z(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,u,d;const{data:c,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await G(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=c.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Fe()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(z(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:o,provider:a,token:l,access_token:u,nonce:d}=e,c=await G(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Ot}),{data:f,error:p}=c;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new br}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(s){if(await Ve(this.storage,`${this.storageKey}-code-verifier`),z(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await G(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(z(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await DE(async s=>(s>0&&await $E(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await G(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ot})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Ol(i)&&Date.now()+o-r<Nr})}catch(r){if(this._debug(n,"error",r),z(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Fe()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Wn(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Wn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Rr(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Ll()}else if(s&&!s.user&&!s.user){const o=await Wn(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Ve(this.storage,this.storageKey+"-user"),await Rr(this.storage,this.storageKey,s)):s.user=Ll()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Rl;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Rl}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Ol(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new ht;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Va;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new ht;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),z(i)){const o={data:null,error:i};return Ol(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Ve(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Rr(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=dp(s);await Rr(this.storage,this.storageKey,i)}else{const s=dp(n);await Rr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ve(this.storage,this.storageKey),await Ve(this.storage,this.storageKey+"-code-verifier"),await Ve(this.storage,this.storageKey+"-user"),this.userStorage&&await Ve(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Fe()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Nr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Nr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Nr}ms, refresh threshold is ${tc} ticks`),s<=tc&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof q0)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Fe()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Sr(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?this._returnResult({data:null,error:i}):await G(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(z(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:u}=await G(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(z(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?fT(e.webauthn.credential_response):pT(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await G(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(n){if(z(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=await G(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:dT(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:hT(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(z(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Al(r.access_token);let o=null;i.aal&&(o=i.aal);let a=o;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(a="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await G(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new ht})})}catch(n){if(z(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new ht});const o=await G(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Fe()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(z(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new ht});const o=await G(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Fe()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(z(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await G(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new ht})})}catch(e){if(z(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await G(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new ht})})}catch(n){if(z(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+bE>s)return r;const{data:i,error:o}=await G(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:p,error:m}=await this.getSession();if(m||!p.session)return this._returnResult({data:null,error:m});r=p.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=Al(r);n!=null&&n.allowExpired||WE(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:s,signature:o},error:null}}const d=HE(s.alg),c=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,c,o,RE(`${a}.${l}`)))throw new sc("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(z(r))return this._returnResult({data:null,error:r});throw r}}}ki.nextInstanceID={};const _T=ki,kT="2.91.0";let $s="";typeof Deno<"u"?$s="deno":typeof document<"u"?$s="web":typeof navigator<"u"&&navigator.product==="ReactNative"?$s="react-native":$s="node";const ET={"X-Client-Info":`supabase-js-${$s}/${kT}`},TT={headers:ET},jT={schema:"public"},PT={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},CT={};function Ei(t){"@babel/helpers - typeof";return Ei=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ei(t)}function NT(t,e){if(Ei(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ei(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function RT(t){var e=NT(t,"string");return Ei(e)=="symbol"?e:e+""}function OT(t,e,n){return(e=RT(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function _e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vp(Object(n),!0).forEach(function(r){OT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vp(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const AT=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),LT=()=>Headers,IT=(t,e,n)=>{const r=AT(n),s=LT();return async(i,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,_e(_e({},o),{},{headers:u}))}};function $T(t){return t.endsWith("/")?t:t+"/"}function DT(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:l,auth:u,realtime:d,global:c}=e,f={db:_e(_e({},l),s),auth:_e(_e({},u),i),realtime:_e(_e({},d),o),storage:{},global:_e(_e(_e({},c),a),{},{headers:_e(_e({},(n=c==null?void 0:c.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function MT(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL($T(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var UT=class extends _T{constructor(t){super(t)}},VT=class{constructor(t,e,n){var r,s;this.supabaseUrl=t,this.supabaseKey=e;const i=MT(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,a={db:jT,realtime:CT,auth:_e(_e({},PT),{},{storageKey:o}),global:TT},l=DT(n??{},a);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=l.global.headers)!==null&&s!==void 0?s:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(d,c)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(c)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=l.auth)!==null&&u!==void 0?u:{},this.headers,l.global.fetch)}this.fetch=IT(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(_e({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new wk(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new gE(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new pk(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:i,flowType:o,lock:a,debug:l,throwOnError:u},d,c){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new UT({url:this.authUrl.href,headers:_e(_e({},f),d),storageKey:i,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:s,flowType:o,lock:a,debug:l,throwOnError:u,fetch:c,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new $k(this.realtimeUrl.href,_e(_e({},t),{},{params:_e(_e({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const FT=(t,e,n)=>new VT(t,e,n);function BT(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}BT()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const zT="https://kjsbpejwcyakpkherdaf.supabase.co",wp="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imtqc2JwZWp3Y3lha3BraGVyZGFmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5NDU4MjUsImV4cCI6MjA4NDUyMTgyNX0.W8G3-GB0lwxF6EypVOW_Q69-2Q4vUM4RdHX_iwJoqXs",ne=FT(zT,wp,{auth:{persistSession:!0,autoRefreshToken:!0},global:{headers:{apikey:wp}}}),WT=Object.freeze(Object.defineProperty({__proto__:null,supabase:ne},Symbol.toStringTag,{value:"Module"})),Ps={async signUp(t,e){try{const{data:n,error:r}=await ne.auth.signUp({email:t,password:e});if(r)throw r;return{data:n,error:null}}catch(n){return{data:null,error:n}}},async signIn(t,e){try{const{data:n,error:r}=await ne.auth.signInWithPassword({email:t,password:e});if(r)throw r;return{data:n,error:null}}catch(n){return{data:null,error:n}}},async signOut(){try{const{error:t}=await ne.auth.signOut();if(t)throw t;return{error:null}}catch(t){return{error:t}}},async getCurrentUser(){try{const{data:{user:t},error:e}=await ne.auth.getUser();if(e)throw e;return{user:t,error:null}}catch(t){return{user:null,error:t}}},onAuthStateChange(t){return ne.auth.onAuthStateChange(t)}},ze={async upsertUserProfile(t,e){try{if(!t||!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t))return console.error("[databaseService]  userId:",t),{data:null,error:new Error(" ID")};const r=["email","display_name","avatar_url"],s={};e.displayName!==void 0&&(s.display_name=e.displayName),e.email!==void 0&&(s.email=e.email),e.avatar_url!==void 0&&(s.avatar_url=e.avatar_url),r.forEach(l=>{e[l]!==void 0&&!s[l]&&(s[l]=e[l])});const i={id:t,...s};console.log("[databaseService]  upsert user_profiles:",{id:i.id,fields:Object.keys(s)});const{data:o,error:a}=await ne.from("user_profiles").upsert(i,{onConflict:"id"});if(a)throw console.error("[databaseService] upsert user_profiles :",{error:a.message,code:a.code,details:a.details,hint:a.hint,payload:{...i,id:i.id}}),a;return{data:o,error:null}}catch(n){return console.error("[databaseService] upsertUserProfile :",n),{data:null,error:n}}},async getUserProfile(t){try{const{data:e,error:n}=await ne.from("user_profiles").select("*").eq("id",t).single();if(n)throw n;return{data:e,error:null}}catch(e){return{data:null,error:e}}},async saveSearchHistory(t,e){try{const{data:n,error:r}=await ne.from("search_history").insert({user_id:t,search_criteria:e,timestamp:new Date().toISOString()});if(r)throw r;return{data:n,error:null}}catch(n){return{data:null,error:n}}},async getUserSearchHistory(t,e=30){try{const{data:n,error:r}=await ne.from("search_history").select("*").eq("user_id",t).order("timestamp",{ascending:!1}).limit(e);if(r)throw r;return{data:n,error:null}}catch(n){return{data:null,error:n}}},async saveViewHistory(t,e){try{const{data:n,error:r}=await ne.from("view_history").insert({user_id:t,restaurant_name:e.restaurant_name,category:e.category,address:e.address,rating:e.rating,distance:e.distance,viewed_at:new Date().toISOString()});if(r)throw r;return{data:n,error:null}}catch(n){return{data:null,error:n}}},async getUserViewHistory(t,e=50){try{let n=ne.from("view_history").select("*").eq("user_id",t).order("viewed_at",{ascending:!1});e!=null&&(n=n.limit(e));const{data:r,error:s}=await n;if(s)throw s;return{data:r,error:null}}catch(n){return{data:null,error:n}}},async saveSelectionResult(t,e){try{const n={user_id:t,restaurant_name:e.restaurant_name,restaurant_category:e.category||null,timestamp:new Date().toISOString()};e.address&&(n.address=e.address),e.rating&&(n.rating=e.rating),console.log(" :",n);const{data:r,error:s}=await ne.from("selection_results").insert(n).select();if(s)throw console.error(" Supabase :",s),s;return console.log("  Supabase:",r),{data:r,error:null}}catch(n){return console.error(" :",n),{data:null,error:n}}},async getUserSelectionHistory(t,e=null){try{let n=ne.from("selection_results").select("*").eq("user_id",t).order("timestamp",{ascending:!1});e!=null&&(n=n.limit(e));const{data:r,error:s}=await n;if(s)throw s;return{data:(r||[]).map(o=>({...o,category:o.restaurant_category||o.category||null})),error:null}}catch(n){return{data:null,error:n}}},async getUserStats(t){var e;try{const n=new Date;n.setDate(n.getDate()-7);const{data:r,error:s}=await ne.from("search_history").select("*").eq("user_id",t).gte("timestamp",n.toISOString());if(s)throw s;const{data:i,error:o}=await ne.from("selection_results").select("restaurant_category, category").eq("user_id",t);if(o)throw o;const a={};i==null||i.forEach(u=>{const d=u.restaurant_category||u.category;d&&(a[d]=(a[d]||0)+1)});const l=((e=Object.entries(a).sort(([,u],[,d])=>d-u)[0])==null?void 0:e[0])||"";return{data:{weeklySearches:(r==null?void 0:r.length)||0,topCategory:l,totalSearches:(r==null?void 0:r.length)||0,totalSelections:(i==null?void 0:i.length)||0},error:null}}catch(n){return{data:null,error:n}}}},Y0=S.createContext(null);function HT({children:t}){const[e,n]=S.useState(null),[r,s]=S.useState(!1),[i,o]=S.useState(!0);S.useEffect(()=>{try{localStorage.getItem("wte_guest_mode")==="1"&&s(!0)}catch{}Ps.getCurrentUser().then(({user:f})=>{n(f),o(!1)});const{data:{subscription:c}}=Ps.onAuthStateChange((f,p)=>{if(n((p==null?void 0:p.user)??null),p!=null&&p.user){s(!1);try{localStorage.removeItem("wte_guest_mode")}catch{}}p!=null&&p.user&&ze.upsertUserProfile(p.user.id,{email:p.user.email})});return()=>{c==null||c.unsubscribe()}},[]);const a=async(c,f)=>{const{data:p,error:m}=await Ps.signUp(c,f);if(m)throw m;return p},l=async(c,f)=>{const{data:p,error:m}=await Ps.signIn(c,f);if(m)throw m;return p},u=async()=>{const{error:c}=await Ps.signOut();if(c)throw c},d=()=>{s(!0);try{localStorage.setItem("wte_guest_mode","1")}catch{}};return h.jsx(Y0.Provider,{value:{user:e,guestMode:r,loading:i,signUp:a,signIn:l,signOut:u,enterGuestMode:d},children:t})}function vr(){const t=S.useContext(Y0);if(!t)throw new Error("useAuth must be used within AuthProvider");return t}const Q=t=>typeof t=="string",Cs=()=>{let t,e;const n=new Promise((r,s)=>{t=r,e=s});return n.resolve=t,n.reject=e,n},xp=t=>t==null?"":""+t,KT=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},qT=/###/g,bp=t=>t&&t.indexOf("###")>-1?t.replace(qT,"."):t,Sp=t=>!t||Q(t),Qs=(t,e,n)=>{const r=Q(e)?e.split("."):e;let s=0;for(;s<r.length-1;){if(Sp(t))return{};const i=bp(r[s]);!t[i]&&n&&(t[i]=new n),Object.prototype.hasOwnProperty.call(t,i)?t=t[i]:t={},++s}return Sp(t)?{}:{obj:t,k:bp(r[s])}},_p=(t,e,n)=>{const{obj:r,k:s}=Qs(t,e,Object);if(r!==void 0||e.length===1){r[s]=n;return}let i=e[e.length-1],o=e.slice(0,e.length-1),a=Qs(t,o,Object);for(;a.obj===void 0&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),a=Qs(t,o,Object),a!=null&&a.obj&&typeof a.obj[`${a.k}.${i}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${i}`]=n},GT=(t,e,n,r)=>{const{obj:s,k:i}=Qs(t,e,Object);s[i]=s[i]||[],s[i].push(n)},la=(t,e)=>{const{obj:n,k:r}=Qs(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},JT=(t,e,n)=>{const r=la(t,n);return r!==void 0?r:la(e,n)},X0=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?Q(t[r])||t[r]instanceof String||Q(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):X0(t[r],e[r],n):t[r]=e[r]);return t},Tr=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var YT={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const XT=t=>Q(t)?t.replace(/[&<>"'\/]/g,e=>YT[e]):t;class QT{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const ZT=[" ",",","?","!",";"],ej=new QT(20),tj=(t,e,n)=>{e=e||"",n=n||"";const r=ZT.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const s=ej.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let i=!s.test(t);if(!i){const o=t.indexOf(n);o>0&&!s.test(t.substring(0,o))&&(i=!0)}return i},ic=(t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const r=e.split(n);let s=t;for(let i=0;i<r.length;){if(!s||typeof s!="object")return;let o,a="";for(let l=i;l<r.length;++l)if(l!==i&&(a+=n),a+=r[l],o=s[a],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<r.length-1)continue;i+=l-i+1;break}s=o}return s},Ti=t=>t==null?void 0:t.replace("_","-"),nj={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var n,r;(r=(n=console==null?void 0:console[t])==null?void 0:n.apply)==null||r.call(n,console,e)}};class ua{constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||nj,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,s){return s&&!this.debug?null:(Q(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new ua(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new ua(this.logger,e)}}var Wt=new ua;class Fa{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const s=this.observers[r].get(n)||0;this.observers[r].set(n,s+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([s,i])=>{for(let o=0;o<i;o++)s(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([s,i])=>{for(let o=0;o<i;o++)s.apply(s,[e,...n])})}}class kp extends Fa{constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r,s={}){var u,d;const i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,o=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,n],r&&(Array.isArray(r)?a.push(...r):Q(r)&&i?a.push(...r.split(i)):a.push(r)));const l=la(this.data,a);return!l&&!n&&!r&&e.indexOf(".")>-1&&(e=a[0],n=a[1],r=a.slice(2).join(".")),l||!o||!Q(r)?l:ic((d=(u=this.data)==null?void 0:u[e])==null?void 0:d[n],r,i)}addResource(e,n,r,s,i={silent:!1}){const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let a=[e,n];r&&(a=a.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(a=e.split("."),s=n,n=a[1]),this.addNamespaces(n),_p(this.data,a,s),i.silent||this.emit("added",e,n,r,s)}addResources(e,n,r,s={silent:!1}){for(const i in r)(Q(r[i])||Array.isArray(r[i]))&&this.addResource(e,n,i,r[i],{silent:!0});s.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,s,i,o={silent:!1,skipCopy:!1}){let a=[e,n];e.indexOf(".")>-1&&(a=e.split("."),s=r,r=n,n=a[1]),this.addNamespaces(n);let l=la(this.data,a)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),s?X0(l,r,i):l={...l,...r},_p(this.data,a,l),o.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(s=>n[s]&&Object.keys(n[s]).length>0)}toJSON(){return this.data}}var Q0={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,s){return t.forEach(i=>{var o;e=((o=this.processors[i])==null?void 0:o.process(e,n,r,s))??e}),e}};const Z0=Symbol("i18next/PATH_KEY");function rj(){const t=[],e=Object.create(null);let n;return e.get=(r,s)=>{var i;return(i=n==null?void 0:n.revoke)==null||i.call(n),s===Z0?t:(t.push(s),n=Proxy.revocable(r,e),n.proxy)},Proxy.revocable(Object.create(null),e).proxy}function oc(t,e){const{[Z0]:n}=t(rj());return n.join((e==null?void 0:e.keySeparator)??".")}const Ep={},$l=t=>!Q(t)&&typeof t!="boolean"&&typeof t!="number";class ca extends Fa{constructor(e,n={}){super(),KT(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Wt.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){const r={...n};if(e==null)return!1;const s=this.resolve(e,r);if((s==null?void 0:s.res)===void 0)return!1;const i=$l(s.res);return!(r.returnObjects===!1&&i)}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let i=n.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!tj(e,r,s);if(o&&!a){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:Q(i)?[i]:i};const u=e.split(r);(r!==s||r===s&&this.options.ns.indexOf(u[0])>-1)&&(i=u.shift()),e=u.join(s)}return{key:e,namespaces:Q(i)?[i]:i}}translate(e,n,r){let s=typeof n=="object"?{...n}:n;if(typeof s!="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),typeof s=="object"&&(s={...s}),s||(s={}),e==null)return"";typeof e=="function"&&(e=oc(e,{...this.options,...s})),Array.isArray(e)||(e=[String(e)]);const i=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,{key:a,namespaces:l}=this.extractFromKey(e[e.length-1],s),u=l[l.length-1];let d=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;d===void 0&&(d=":");const c=s.lng||this.language,f=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((c==null?void 0:c.toLowerCase())==="cimode")return f?i?{res:`${u}${d}${a}`,usedKey:a,exactUsedKey:a,usedLng:c,usedNS:u,usedParams:this.getUsedParamsDetails(s)}:`${u}${d}${a}`:i?{res:a,usedKey:a,exactUsedKey:a,usedLng:c,usedNS:u,usedParams:this.getUsedParamsDetails(s)}:a;const p=this.resolve(e,s);let m=p==null?void 0:p.res;const v=(p==null?void 0:p.usedKey)||a,b=(p==null?void 0:p.exactUsedKey)||a,w=["[object Number]","[object Function]","[object RegExp]"],g=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject,x=s.count!==void 0&&!Q(s.count),E=ca.hasDefaultValue(s),_=x?this.pluralResolver.getSuffix(c,s.count,s):"",k=s.ordinal&&x?this.pluralResolver.getSuffix(c,s.count,{ordinal:!1}):"",j=x&&!s.ordinal&&s.count===0,T=j&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${_}`]||s[`defaultValue${k}`]||s.defaultValue;let N=m;y&&!m&&E&&(N=T);const K=$l(N),F=Object.prototype.toString.apply(N);if(y&&N&&K&&w.indexOf(F)<0&&!(Q(g)&&Array.isArray(N))){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const V=this.options.returnedObjectHandler?this.options.returnedObjectHandler(v,N,{...s,ns:l}):`key '${a} (${this.language})' returned an object instead of string.`;return i?(p.res=V,p.usedParams=this.getUsedParamsDetails(s),p):V}if(o){const V=Array.isArray(N),C=V?[]:{},M=V?b:v;for(const I in N)if(Object.prototype.hasOwnProperty.call(N,I)){const X=`${M}${o}${I}`;E&&!m?C[I]=this.translate(X,{...s,defaultValue:$l(T)?T[I]:void 0,joinArrays:!1,ns:l}):C[I]=this.translate(X,{...s,joinArrays:!1,ns:l}),C[I]===X&&(C[I]=N[I])}m=C}}else if(y&&Q(g)&&Array.isArray(m))m=m.join(g),m&&(m=this.extendTranslation(m,e,s,r));else{let V=!1,C=!1;!this.isValidLookup(m)&&E&&(V=!0,m=T),this.isValidLookup(m)||(C=!0,m=a);const I=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&C?void 0:m,X=E&&T!==m&&this.options.updateMissing;if(C||V||X){if(this.logger.log(X?"updateKey":"missingKey",c,u,a,X?T:m),o){const A=this.resolve(a,{...s,keySeparator:!1});A&&A.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let R=[];const $=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&$&&$[0])for(let A=0;A<$.length;A++)R.push($[A]);else this.options.saveMissingTo==="all"?R=this.languageUtils.toResolveHierarchy(s.lng||this.language):R.push(s.lng||this.language);const H=(A,q,be)=>{var Ae;const Ce=E&&be!==m?be:I;this.options.missingKeyHandler?this.options.missingKeyHandler(A,u,q,Ce,X,s):(Ae=this.backendConnector)!=null&&Ae.saveMissing&&this.backendConnector.saveMissing(A,u,q,Ce,X,s),this.emit("missingKey",A,u,q,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&x?R.forEach(A=>{const q=this.pluralResolver.getSuffixes(A,s);j&&s[`defaultValue${this.options.pluralSeparator}zero`]&&q.indexOf(`${this.options.pluralSeparator}zero`)<0&&q.push(`${this.options.pluralSeparator}zero`),q.forEach(be=>{H([A],a+be,s[`defaultValue${be}`]||T)})}):H(R,a,T))}m=this.extendTranslation(m,e,s,p,r),C&&m===a&&this.options.appendNamespaceToMissingKey&&(m=`${u}${d}${a}`),(C||V)&&this.options.parseMissingKeyHandler&&(m=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}${d}${a}`:a,V?m:void 0,s))}return i?(p.res=m,p.usedParams=this.getUsedParamsDetails(s),p):m}extendTranslation(e,n,r,s,i){var l,u;if((l=this.i18nFormat)!=null&&l.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const d=Q(e)&&(((u=r==null?void 0:r.interpolation)==null?void 0:u.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let c;if(d){const p=e.match(this.interpolator.nestingRegexp);c=p&&p.length}let f=r.replace&&!Q(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),e=this.interpolator.interpolate(e,f,r.lng||this.language||s.usedLng,r),d){const p=e.match(this.interpolator.nestingRegexp),m=p&&p.length;c<m&&(r.nest=!1)}!r.lng&&s&&s.res&&(r.lng=this.language||s.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...p)=>(i==null?void 0:i[0])===p[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${p[0]} in key: ${n[0]}`),null):this.translate(...p,n),r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,a=Q(o)?[o]:o;return e!=null&&(a!=null&&a.length)&&r.applyPostProcessor!==!1&&(e=Q0.handle(a,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,n={}){let r,s,i,o,a;return Q(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(l,n),d=u.key;s=d;let c=u.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const f=n.count!==void 0&&!Q(n.count),p=f&&!n.ordinal&&n.count===0,m=n.context!==void 0&&(Q(n.context)||typeof n.context=="number")&&n.context!=="",v=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);c.forEach(b=>{var w,g;this.isValidLookup(r)||(a=b,!Ep[`${v[0]}-${b}`]&&((w=this.utils)!=null&&w.hasLoadedNamespace)&&!((g=this.utils)!=null&&g.hasLoadedNamespace(a))&&(Ep[`${v[0]}-${b}`]=!0,this.logger.warn(`key "${s}" for languages "${v.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),v.forEach(y=>{var _;if(this.isValidLookup(r))return;o=y;const x=[d];if((_=this.i18nFormat)!=null&&_.addLookupKeys)this.i18nFormat.addLookupKeys(x,d,y,b,n);else{let k;f&&(k=this.pluralResolver.getSuffix(y,n.count,n));const j=`${this.options.pluralSeparator}zero`,T=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(f&&(n.ordinal&&k.indexOf(T)===0&&x.push(d+k.replace(T,this.options.pluralSeparator)),x.push(d+k),p&&x.push(d+j)),m){const N=`${d}${this.options.contextSeparator||"_"}${n.context}`;x.push(N),f&&(n.ordinal&&k.indexOf(T)===0&&x.push(N+k.replace(T,this.options.pluralSeparator)),x.push(N+k),p&&x.push(N+j))}}let E;for(;E=x.pop();)this.isValidLookup(r)||(i=E,r=this.getResource(y,b,E,n))}))})}),{res:r,usedKey:s,exactUsedKey:i,usedLng:o,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r,s={}){var i;return(i=this.i18nFormat)!=null&&i.getResource?this.i18nFormat.getResource(e,n,r,s):this.resourceStore.getResource(e,n,r,s)}getUsedParamsDetails(e={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!Q(e.replace);let s=r?e.replace:e;if(r&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!r){s={...s};for(const i of n)delete s[i]}return s}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}class Tp{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Wt.create("languageUtils")}getScriptPartFromCode(e){if(e=Ti(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=Ti(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(Q(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const s=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(s))&&(n=s)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const s=this.getScriptPartFromCode(r);if(this.isSupportedCode(s))return n=s;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(o=>{if(o===i)return o;if(!(o.indexOf("-")<0&&i.indexOf("-")<0)&&(o.indexOf("-")>0&&i.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===i||o.indexOf(i)===0&&i.length>1))return o})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),Q(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),s=[],i=o=>{o&&(this.isSupportedCode(o)?s.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return Q(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):Q(e)&&i(this.formatLanguageCode(e)),r.forEach(o=>{s.indexOf(o)<0&&i(this.formatLanguageCode(o))}),s}}const jp={zero:0,one:1,two:2,few:3,many:4,other:5},Pp={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class sj{constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=Wt.create("pluralResolver"),this.pluralRulesCache={}}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){const r=Ti(e==="dev"?"en":e),s=n.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:r,type:s});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let o;try{o=new Intl.PluralRules(r,{type:s})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Pp;if(!e.match(/-|_/))return Pp;const l=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(l,n)}return this.pluralRulesCache[i]=o,o}needsPlural(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,n,r={}){return this.getSuffixes(e,r).map(s=>`${n}${s}`)}getSuffixes(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((s,i)=>jp[s]-jp[i]).map(s=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s}`):[]}getSuffix(e,n,r={}){const s=this.getRule(e,r);return s?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${s.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,r))}}const Cp=(t,e,n,r=".",s=!0)=>{let i=JT(t,e,n);return!i&&s&&Q(n)&&(i=ic(t,n,r),i===void 0&&(i=ic(e,n,r))),i},Dl=t=>t.replace(/\$/g,"$$$$");class Np{constructor(e={}){var n;this.logger=Wt.create("interpolator"),this.options=e,this.format=((n=e==null?void 0:e.interpolation)==null?void 0:n.format)||(r=>r),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:s,prefix:i,prefixEscaped:o,suffix:a,suffixEscaped:l,formatSeparator:u,unescapeSuffix:d,unescapePrefix:c,nestingPrefix:f,nestingPrefixEscaped:p,nestingSuffix:m,nestingSuffixEscaped:v,nestingOptionsSeparator:b,maxReplaces:w,alwaysFormat:g}=e.interpolation;this.escape=n!==void 0?n:XT,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=i?Tr(i):o||"{{",this.suffix=a?Tr(a):l||"}}",this.formatSeparator=u||",",this.unescapePrefix=d?"":c||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=f?Tr(f):p||Tr("$t("),this.nestingSuffix=m?Tr(m):v||Tr(")"),this.nestingOptionsSeparator=b||",",this.maxReplaces=w||1e3,this.alwaysFormat=g!==void 0?g:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>(n==null?void 0:n.source)===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,n,r,s){var p;let i,o,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=m=>{if(m.indexOf(this.formatSeparator)<0){const g=Cp(n,l,m,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(g,void 0,r,{...s,...n,interpolationkey:m}):g}const v=m.split(this.formatSeparator),b=v.shift().trim(),w=v.join(this.formatSeparator).trim();return this.format(Cp(n,l,b,this.options.keySeparator,this.options.ignoreJSONStructure),w,r,{...s,...n,interpolationkey:b})};this.resetRegExp();const d=(s==null?void 0:s.missingInterpolationHandler)||this.options.missingInterpolationHandler,c=((p=s==null?void 0:s.interpolation)==null?void 0:p.skipOnVariables)!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:m=>Dl(m)},{regex:this.regexp,safeValue:m=>this.escapeValue?Dl(this.escape(m)):Dl(m)}].forEach(m=>{for(a=0;i=m.regex.exec(e);){const v=i[1].trim();if(o=u(v),o===void 0)if(typeof d=="function"){const w=d(e,i,s);o=Q(w)?w:""}else if(s&&Object.prototype.hasOwnProperty.call(s,v))o="";else if(c){o=i[0];continue}else this.logger.warn(`missed to pass in variable ${v} for interpolating ${e}`),o="";else!Q(o)&&!this.useRawValueToEscape&&(o=xp(o));const b=m.safeValue(o);if(e=e.replace(i[0],b),c?(m.regex.lastIndex+=o.length,m.regex.lastIndex-=i[0].length):m.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,n,r={}){let s,i,o;const a=(l,u)=>{const d=this.nestingOptionsSeparator;if(l.indexOf(d)<0)return l;const c=l.split(new RegExp(`${d}[ ]*{`));let f=`{${c[1]}`;l=c[0],f=this.interpolate(f,o);const p=f.match(/'/g),m=f.match(/"/g);(((p==null?void 0:p.length)??0)%2===0&&!m||m.length%2!==0)&&(f=f.replace(/'/g,'"'));try{o=JSON.parse(f),u&&(o={...u,...o})}catch(v){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,v),`${l}${d}${f}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,l};for(;s=this.nestingRegexp.exec(e);){let l=[];o={...r},o=o.replace&&!Q(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const u=/{.*}/.test(s[1])?s[1].lastIndexOf("}")+1:s[1].indexOf(this.formatSeparator);if(u!==-1&&(l=s[1].slice(u).split(this.formatSeparator).map(d=>d.trim()).filter(Boolean),s[1]=s[1].slice(0,u)),i=n(a.call(this,s[1].trim(),o),o),i&&s[0]===e&&!Q(i))return i;Q(i)||(i=xp(i)),i||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),i=""),l.length&&(i=l.reduce((d,c)=>this.format(d,c,r.lng,{...r,interpolationkey:s[1].trim()}),i.trim())),e=e.replace(s[0],i),this.regexp.lastIndex=0}return e}}const ij=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const s=r[1].substring(0,r[1].length-1);e==="currency"&&s.indexOf(":")<0?n.currency||(n.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?n.range||(n.range=s.trim()):s.split(";").forEach(o=>{if(o){const[a,...l]=o.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,""),d=a.trim();n[d]||(n[d]=u),u==="false"&&(n[d]=!1),u==="true"&&(n[d]=!0),isNaN(u)||(n[d]=parseInt(u,10))}})}return{formatName:e,formatOptions:n}},Rp=t=>{const e={};return(n,r,s)=>{let i=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(i={...i,[s.interpolationkey]:void 0});const o=r+JSON.stringify(i);let a=e[o];return a||(a=t(Ti(r),s),e[o]=a),a(n)}},oj=t=>(e,n,r)=>t(Ti(n),r)(e);class aj{constructor(e={}){this.logger=Wt.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const r=n.cacheInBuiltFormats?Rp:oj;this.formats={number:r((s,i)=>{const o=new Intl.NumberFormat(s,{...i});return a=>o.format(a)}),currency:r((s,i)=>{const o=new Intl.NumberFormat(s,{...i,style:"currency"});return a=>o.format(a)}),datetime:r((s,i)=>{const o=new Intl.DateTimeFormat(s,{...i});return a=>o.format(a)}),relativetime:r((s,i)=>{const o=new Intl.RelativeTimeFormat(s,{...i});return a=>o.format(a,i.range||"day")}),list:r((s,i)=>{const o=new Intl.ListFormat(s,{...i});return a=>o.format(a)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=Rp(n)}format(e,n,r,s={}){const i=n.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(a=>a.indexOf(")")>-1)){const a=i.findIndex(l=>l.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,a)].join(this.formatSeparator)}return i.reduce((a,l)=>{var c;const{formatName:u,formatOptions:d}=ij(l);if(this.formats[u]){let f=a;try{const p=((c=s==null?void 0:s.formatParams)==null?void 0:c[s.interpolationkey])||{},m=p.locale||p.lng||s.locale||s.lng||r;f=this.formats[u](a,m,{...d,...s,...p})}catch(p){this.logger.warn(p)}return f}else this.logger.warn(`there was no format function for ${u}`);return a},e)}}const lj=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class uj extends Fa{constructor(e,n,r,s={}){var i,o;super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=s,this.logger=Wt.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],(o=(i=this.backend)==null?void 0:i.init)==null||o.call(i,r,s.backend,s)}queueLoad(e,n,r,s){const i={},o={},a={},l={};return e.forEach(u=>{let d=!0;n.forEach(c=>{const f=`${u}|${c}`;!r.reload&&this.store.hasResourceBundle(u,c)?this.state[f]=2:this.state[f]<0||(this.state[f]===1?o[f]===void 0&&(o[f]=!0):(this.state[f]=1,d=!1,o[f]===void 0&&(o[f]=!0),i[f]===void 0&&(i[f]=!0),l[c]===void 0&&(l[c]=!0)))}),d||(a[u]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}loaded(e,n,r){const s=e.split("|"),i=s[0],o=s[1];n&&this.emit("failedLoading",i,o,n),!n&&r&&this.store.addResourceBundle(i,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const a={};this.queue.forEach(l=>{GT(l.loaded,[i],o),lj(l,e),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{a[u]||(a[u]={});const d=l.loaded[u];d.length&&d.forEach(c=>{a[u][c]===void 0&&(a[u][c]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(l=>!l.done)}read(e,n,r,s=0,i=this.retryTimeout,o){if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:s,wait:i,callback:o});return}this.readingCalls++;const a=(u,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const c=this.waitingReads.shift();this.read(c.lng,c.ns,c.fcName,c.tried,c.wait,c.callback)}if(u&&d&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,s+1,i*2,o)},i);return}o(u,d)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const u=l(e,n);u&&typeof u.then=="function"?u.then(d=>a(null,d)).catch(a):a(null,u)}catch(u){a(u)}return}return l(e,n,a)}prepareLoading(e,n,r={},s){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();Q(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Q(n)&&(n=[n]);const i=this.queueLoad(e,n,r,s);if(!i.toLoad.length)return i.pending.length||s(),null;i.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e,n=""){const r=e.split("|"),s=r[0],i=r[1];this.read(s,i,"read",void 0,void 0,(o,a)=>{o&&this.logger.warn(`${n}loading namespace ${i} for language ${s} failed`,o),!o&&a&&this.logger.log(`${n}loaded namespace ${i} for language ${s}`,a),this.loaded(e,o,a)})}saveMissing(e,n,r,s,i,o={},a=()=>{}){var l,u,d,c,f;if((u=(l=this.services)==null?void 0:l.utils)!=null&&u.hasLoadedNamespace&&!((c=(d=this.services)==null?void 0:d.utils)!=null&&c.hasLoadedNamespace(n))){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((f=this.backend)!=null&&f.create){const p={...o,isUpdate:i},m=this.backend.create.bind(this.backend);if(m.length<6)try{let v;m.length===5?v=m(e,n,r,s,p):v=m(e,n,r,s),v&&typeof v.then=="function"?v.then(b=>a(null,b)).catch(a):a(null,v)}catch(v){a(v)}else m(e,n,r,s,a,p)}!e||!e[0]||this.store.addResource(e[0],n,r,s)}}}const Ml=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),Q(t[1])&&(e.defaultValue=t[1]),Q(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Op=t=>{var e,n;return Q(t.ns)&&(t.ns=[t.ns]),Q(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),Q(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((n=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:n.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},co=()=>{},cj=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class Zs extends Fa{constructor(e={},n){if(super(),this.options=Op(e),this.services={},this.logger=Wt,this.modules={external:[]},cj(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(Q(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=Ml();this.options={...r,...this.options,...Op(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=r.overloadTranslationOptionHandler),this.options.debug===!0&&typeof console<"u"&&console.warn("i18next is maintained with support from locize.com  consider powering your project with managed localization (AI, CDN, integrations): https://locize.com");const s=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?Wt.init(s(this.modules.logger),this.options):Wt.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=aj;const d=new Tp(this.options);this.store=new kp(this.options.resources,this.options);const c=this.services;c.logger=Wt,c.resourceStore=this.store,c.languageUtils=d,c.pluralResolver=new sj(d,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),u&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(c.formatter=s(u),c.formatter.init&&c.formatter.init(c,this.options),this.options.interpolation.format=c.formatter.format.bind(c.formatter)),c.interpolator=new Np(this.options),c.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},c.backendConnector=new uj(s(this.modules.backend),c.resourceStore,c,this.options),c.backendConnector.on("*",(p,...m)=>{this.emit(p,...m)}),this.modules.languageDetector&&(c.languageDetector=s(this.modules.languageDetector),c.languageDetector.init&&c.languageDetector.init(c,this.options.detection,this.options)),this.modules.i18nFormat&&(c.i18nFormat=s(this.modules.i18nFormat),c.i18nFormat.init&&c.i18nFormat.init(this)),this.translator=new ca(this.services,this.options),this.translator.on("*",(p,...m)=>{this.emit(p,...m)}),this.modules.external.forEach(p=>{p.init&&p.init(this)})}if(this.format=this.options.interpolation.format,n||(n=co),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=(...d)=>this.store[u](...d)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=(...d)=>(this.store[u](...d),this)});const a=Cs(),l=()=>{const u=(d,c)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(c),n(d,c)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?l():setTimeout(l,0),a}loadResources(e,n=co){var i,o;let r=n;const s=Q(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((s==null?void 0:s.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const a=[],l=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(c=>{c!=="cimode"&&a.indexOf(c)<0&&a.push(c)})};s?l(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>l(d)),(o=(i=this.options.preload)==null?void 0:i.forEach)==null||o.call(i,u=>l(u)),this.services.backendConnector.load(a,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(u)})}else r(null)}reloadResources(e,n,r){const s=Cs();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=co),this.services.backendConnector.reload(e,n,i=>{s.resolve(),r(i)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Q0.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;const r=Cs();this.emit("languageChanging",e);const s=a=>{this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.resolvedLanguage=void 0,this.setResolvedLanguage(a)},i=(a,l)=>{l?this.isLanguageChangingTo===e&&(s(l),this.translator.changeLanguage(l),this.isLanguageChangingTo=void 0,this.emit("languageChanged",l),this.logger.log("languageChanged",l)):this.isLanguageChangingTo=void 0,r.resolve((...u)=>this.t(...u)),n&&n(a,(...u)=>this.t(...u))},o=a=>{var d,c;!e&&!a&&this.services.languageDetector&&(a=[]);const l=Q(a)?a:a&&a[0],u=this.store.hasLanguageSomeTranslations(l)?l:this.services.languageUtils.getBestMatchFromCodes(Q(a)?[a]:a);u&&(this.language||s(u),this.translator.language||this.translator.changeLanguage(u),(c=(d=this.services.languageDetector)==null?void 0:d.cacheUserLanguage)==null||c.call(d,u)),this.loadResources(u,f=>{i(f,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),r}getFixedT(e,n,r){const s=(i,o,...a)=>{let l;typeof o!="object"?l=this.options.overloadTranslationOptionHandler([i,o].concat(a)):l={...o},l.lng=l.lng||s.lng,l.lngs=l.lngs||s.lngs,l.ns=l.ns||s.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||r||s.keyPrefix);const u=this.options.keySeparator||".";let d;return l.keyPrefix&&Array.isArray(i)?d=i.map(c=>(typeof c=="function"&&(c=oc(c,{...this.options,...o})),`${l.keyPrefix}${u}${c}`)):(typeof i=="function"&&(i=oc(i,{...this.options,...o})),d=l.keyPrefix?`${l.keyPrefix}${u}${i}`:i),this.t(d,l)};return Q(e)?s.lng=e:s.lngs=e,s.ns=n,s.keyPrefix=r,s}t(...e){var n;return(n=this.translator)==null?void 0:n.translate(...e)}exists(...e){var n;return(n=this.translator)==null?void 0:n.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,l)=>{const u=this.services.backendConnector.state[`${a}|${l}`];return u===-1||u===0||u===2};if(n.precheck){const a=n.precheck(this,o);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!s||o(i,e)))}loadNamespaces(e,n){const r=Cs();return this.options.ns?(Q(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{r.resolve(),n&&n(s)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Cs();Q(e)&&(e=[e]);const s=this.options.preload||[],i=e.filter(o=>s.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return i.length?(this.options.preload=s.concat(i),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(e){var s,i;if(e||(e=this.resolvedLanguage||(((s=this.languages)==null?void 0:s.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const o=new Intl.Locale(e);if(o&&o.getTextInfo){const a=o.getTextInfo();if(a&&a.direction)return a.direction}}catch{}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((i=this.services)==null?void 0:i.languageUtils)||new Tp(Ml());return e.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){const r=new Zs(e,n);return r.createInstance=Zs.createInstance,r}cloneInstance(e={},n=co){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},i=new Zs(s);if((e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(a=>{i[a]=this[a]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r){const a=Object.keys(this.store.data).reduce((l,u)=>(l[u]={...this.store.data[u]},l[u]=Object.keys(l[u]).reduce((d,c)=>(d[c]={...l[u][c]},d),l[u]),l),{});i.store=new kp(a,s),i.services.resourceStore=i.store}if(e.interpolation){const l={...Ml().interpolation,...this.options.interpolation,...e.interpolation},u={...s,interpolation:l};i.services.interpolator=new Np(u)}return i.translator=new ca(i.services,s),i.translator.on("*",(a,...l)=>{i.emit(a,...l)}),i.init(s,n),i.translator.options=s,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ie=Zs.createInstance();ie.createInstance;ie.dir;ie.init;ie.loadResources;ie.reloadResources;ie.use;ie.changeLanguage;ie.getFixedT;ie.t;ie.exists;ie.setDefaultNamespace;ie.hasLoadedNamespace;ie.loadNamespaces;ie.loadLanguages;const dj=(t,e,n,r)=>{var i,o,a,l;const s=[n,{code:e,...r||{}}];if((o=(i=t==null?void 0:t.services)==null?void 0:i.logger)!=null&&o.forward)return t.services.logger.forward(s,"warn","react-i18next::",!0);hr(s[0])&&(s[0]=`react-i18next:: ${s[0]}`),(l=(a=t==null?void 0:t.services)==null?void 0:a.logger)!=null&&l.warn?t.services.logger.warn(...s):console!=null&&console.warn&&console.warn(...s)},Ap={},ev=(t,e,n,r)=>{hr(n)&&Ap[n]||(hr(n)&&(Ap[n]=new Date),dj(t,e,n,r))},tv=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},ac=(t,e,n)=>{t.loadNamespaces(e,tv(t,n))},Lp=(t,e,n,r)=>{if(hr(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return ac(t,n,r);n.forEach(s=>{t.options.ns.indexOf(s)<0&&t.options.ns.push(s)}),t.loadLanguages(e,tv(t,r))},hj=(t,e,n={})=>!e.languages||!e.languages.length?(ev(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,s)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!s(r.isLanguageChangingTo,t))return!1}}),hr=t=>typeof t=="string",fj=t=>typeof t=="object"&&t!==null,pj=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,mj={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},gj=t=>mj[t],yj=t=>t.replace(pj,gj);let lc={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:yj,transDefaultProps:void 0};const vj=(t={})=>{lc={...lc,...t}},wj=()=>lc;let nv;const xj=t=>{nv=t},bj=()=>nv,Sj={type:"3rdParty",init(t){vj(t.options.react),xj(t)}},_j=S.createContext();class kj{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var rv={exports:{}},sv={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ds=S;function Ej(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Tj=typeof Object.is=="function"?Object.is:Ej,jj=ds.useState,Pj=ds.useEffect,Cj=ds.useLayoutEffect,Nj=ds.useDebugValue;function Rj(t,e){var n=e(),r=jj({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return Cj(function(){s.value=n,s.getSnapshot=e,Ul(s)&&i({inst:s})},[t,n,e]),Pj(function(){return Ul(s)&&i({inst:s}),t(function(){Ul(s)&&i({inst:s})})},[t]),Nj(n),n}function Ul(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Tj(t,n)}catch{return!0}}function Oj(t,e){return e()}var Aj=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Oj:Rj;sv.useSyncExternalStore=ds.useSyncExternalStore!==void 0?ds.useSyncExternalStore:Aj;rv.exports=sv;var Lj=rv.exports;const Ij=(t,e)=>hr(e)?e:fj(e)&&hr(e.defaultValue)?e.defaultValue:Array.isArray(t)?t[t.length-1]:t,$j={t:Ij,ready:!1},Dj=()=>()=>{},Qe=(t,e={})=>{var T,N,K;const{i18n:n}=e,{i18n:r,defaultNS:s}=S.useContext(_j)||{},i=n||r||bj();i&&!i.reportNamespaces&&(i.reportNamespaces=new kj),i||ev(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const o=S.useMemo(()=>{var F;return{...wj(),...(F=i==null?void 0:i.options)==null?void 0:F.react,...e}},[i,e]),{useSuspense:a,keyPrefix:l}=o,u=s||((T=i==null?void 0:i.options)==null?void 0:T.defaultNS),d=hr(u)?[u]:u||["translation"],c=S.useMemo(()=>d,d);(K=(N=i==null?void 0:i.reportNamespaces)==null?void 0:N.addUsedNamespaces)==null||K.call(N,c);const f=S.useRef(0),p=S.useCallback(F=>{if(!i)return Dj;const{bindI18n:V,bindI18nStore:C}=o,M=()=>{f.current+=1,F()};return V&&i.on(V,M),C&&i.store.on(C,M),()=>{V&&V.split(" ").forEach(I=>i.off(I,M)),C&&C.split(" ").forEach(I=>i.store.off(I,M))}},[i,o]),m=S.useRef(),v=S.useCallback(()=>{if(!i)return $j;const F=!!(i.isInitialized||i.initializedStoreOnce)&&c.every(R=>hj(R,i,o)),V=e.lng||i.language,C=f.current,M=m.current;if(M&&M.ready===F&&M.lng===V&&M.keyPrefix===l&&M.revision===C)return M;const X={t:i.getFixedT(V,o.nsMode==="fallback"?c:c[0],l),ready:F,lng:V,keyPrefix:l,revision:C};return m.current=X,X},[i,c,l,o,e.lng]),[b,w]=S.useState(0),{t:g,ready:y}=Lj.useSyncExternalStore(p,v,v);S.useEffect(()=>{if(i&&!y&&!a){const F=()=>w(V=>V+1);e.lng?Lp(i,e.lng,c,F):ac(i,c,F)}},[i,e.lng,c,y,a,b]);const x=i||{},E=S.useRef(null),_=S.useRef(),k=F=>{const V=Object.getOwnPropertyDescriptors(F);V.__original&&delete V.__original;const C=Object.create(Object.getPrototypeOf(F),V);if(!Object.prototype.hasOwnProperty.call(C,"__original"))try{Object.defineProperty(C,"__original",{value:F,writable:!1,enumerable:!1,configurable:!1})}catch{}return C},j=S.useMemo(()=>{const F=x,V=F==null?void 0:F.language;let C=F;F&&(E.current&&E.current.__original===F?_.current!==V?(C=k(F),E.current=C,_.current=V):C=E.current:(C=k(F),E.current=C,_.current=V));const M=[g,C,y];return M.t=g,M.i18n=C,M.ready=y,M},[g,x,y,x.resolvedLanguage,x.language,x.languages]);if(i&&a&&!y)throw new Promise(F=>{const V=()=>F();e.lng?Lp(i,e.lng,c,V):ac(i,c,V)});return j};function Ip(){const[t,e]=S.useState(!0),[n,r]=S.useState(""),[s,i]=S.useState(""),[o,a]=S.useState(""),[l,u]=S.useState(!1),{signIn:d,signUp:c,enterGuestMode:f}=vr(),{t:p}=Qe(),m=async v=>{v.preventDefault(),a(""),u(!0);try{t?await d(n,s):(await c(n,s),e(!0),a(p("auth.signupSuccess")))}catch(b){a(b.message||p("auth.failed"))}finally{u(!1)}};return h.jsxs("div",{className:"safe-area-container bg-apple-bg flex items-center justify-center px-4 relative overflow-hidden",children:[h.jsx("div",{className:"fixed inset-0 -z-10",children:h.jsx(P.div,{className:"absolute inset-0 opacity-30",animate:{background:["radial-gradient(circle at 20% 50%, rgba(147, 197, 253, 0.1) 0%, transparent 50%)","radial-gradient(circle at 80% 80%, rgba(196, 181, 253, 0.1) 0%, transparent 50%)","radial-gradient(circle at 40% 20%, rgba(253, 224, 71, 0.08) 0%, transparent 50%)","radial-gradient(circle at 20% 50%, rgba(147, 197, 253, 0.1) 0%, transparent 50%)"]},transition:{duration:20,repeat:1/0,ease:"easeInOut"}})}),h.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"w-full max-w-md",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx(P.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"text-5xl font-semibold text-apple-text mb-3",children:p("app.name")}),h.jsx(P.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:"text-gray-600 text-lg",children:p("app.tagline")})]}),h.jsxs(P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.2},className:"bg-white rounded-[28px] p-8 shadow-lg",children:[h.jsxs("div",{className:"flex mb-6 bg-gray-100 rounded-[20px] p-1",children:[h.jsx(P.button,{onClick:()=>{e(!0),a("")},className:`flex-1 py-3 rounded-[16px] font-medium text-base transition-all ${t?"bg-white text-apple-text shadow-sm":"text-gray-600"}`,whileTap:{scale:.98},children:p("auth.login")}),h.jsx(P.button,{onClick:()=>{e(!1),a("")},className:`flex-1 py-3 rounded-[16px] font-medium text-base transition-all ${t?"text-gray-600":"bg-white text-apple-text shadow-sm"}`,whileTap:{scale:.98},children:p("auth.signup")})]}),h.jsx(Pt,{mode:"wait",children:h.jsxs(P.form,{initial:{opacity:0,x:t?-20:20},animate:{opacity:1,x:0},exit:{opacity:0,x:t?20:-20},transition:{duration:.3},onSubmit:m,children:[h.jsx("div",{className:"mb-4",children:h.jsx("input",{type:"email",placeholder:p("auth.email"),value:n,onChange:v=>r(v.target.value),required:!0,className:"w-full px-5 py-4 bg-gray-50 rounded-[20px] border-0 text-base focus:outline-none focus:ring-2 focus:ring-apple-text focus:ring-opacity-20 transition-all"})}),h.jsx("div",{className:"mb-6",children:h.jsx("input",{type:"password",placeholder:p("auth.password"),value:s,onChange:v=>i(v.target.value),required:!0,minLength:6,className:"w-full px-5 py-4 bg-gray-50 rounded-[20px] border-0 text-base focus:outline-none focus:ring-2 focus:ring-apple-text focus:ring-opacity-20 transition-all"})}),o&&h.jsx(P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`mb-4 px-4 py-3 rounded-[16px] text-sm ${o.includes("")?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:o}),h.jsx(P.button,{type:"submit",disabled:l,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full py-4 bg-apple-text text-white rounded-[20px] font-medium text-base shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:p(l?"auth.processing":t?"auth.login":"auth.signup")})]},t?"login":"signup")})]}),h.jsxs(P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.4},className:"mt-6 text-center text-gray-500 text-sm",children:[h.jsx("p",{children:p("auth.guestOr")}),h.jsx("p",{className:"mt-1 text-xs",children:p("auth.guestNote")}),h.jsx(P.button,{type:"button",onClick:f,whileTap:{scale:.98},className:"mt-3 inline-flex items-center justify-center min-h-[44px] px-5 py-3 rounded-[18px] bg-white/70 hover:bg-white text-apple-text shadow-sm border border-white/40 backdrop-blur-sm transition-transform active:scale-95 touch-manipulation",children:p("auth.continueGuest")})]})]})]})}const{slice:Mj,forEach:Uj}=[];function Vj(t){return Uj.call(Mj.call(arguments,1),e=>{if(e)for(const n in e)t[n]===void 0&&(t[n]=e[n])}),t}function Fj(t){return typeof t!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(n=>n.test(t))}const $p=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Bj=function(t,e){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},s=encodeURIComponent(e);let i=`${t}=${s}`;if(r.maxAge>0){const o=r.maxAge-0;if(Number.isNaN(o))throw new Error("maxAge should be a Number");i+=`; Max-Age=${Math.floor(o)}`}if(r.domain){if(!$p.test(r.domain))throw new TypeError("option domain is invalid");i+=`; Domain=${r.domain}`}if(r.path){if(!$p.test(r.path))throw new TypeError("option path is invalid");i+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(i+="; HttpOnly"),r.secure&&(i+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r.partitioned&&(i+="; Partitioned"),i},Dp={create(t,e,n,r){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+n*60*1e3)),r&&(s.domain=r),document.cookie=Bj(t,e,s)},read(t){const e=`${t}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let s=n[r];for(;s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(e)===0)return s.substring(e.length,s.length)}return null},remove(t,e){this.create(t,"",-1,e)}};var zj={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return Dp.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:n,cookieMinutes:r,cookieDomain:s,cookieOptions:i}=e;n&&typeof document<"u"&&Dp.create(n,t,r,s,i)}},Wj={name:"querystring",lookup(t){var r;let{lookupQuerystring:e}=t,n;if(typeof window<"u"){let{search:s}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(s=window.location.hash.substring(window.location.hash.indexOf("?")));const o=s.substring(1).split("&");for(let a=0;a<o.length;a++){const l=o[a].indexOf("=");l>0&&o[a].substring(0,l)===e&&(n=o[a].substring(l+1))}}return n}},Hj={name:"hash",lookup(t){var s;let{lookupHash:e,lookupFromHashIndex:n}=t,r;if(typeof window<"u"){const{hash:i}=window.location;if(i&&i.length>2){const o=i.substring(1);if(e){const a=o.split("&");for(let l=0;l<a.length;l++){const u=a[l].indexOf("=");u>0&&a[l].substring(0,u)===e&&(r=a[l].substring(u+1))}}if(r)return r;if(!r&&n>-1){const a=i.match(/\/([a-zA-Z-]*)/g);return Array.isArray(a)?(s=a[typeof n=="number"?n:0])==null?void 0:s.replace("/",""):void 0}}}return r}};let jr=null;const Mp=()=>{if(jr!==null)return jr;try{if(jr=typeof window<"u"&&window.localStorage!==null,!jr)return!1;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{jr=!1}return jr};var Kj={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&Mp())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:n}=e;n&&Mp()&&window.localStorage.setItem(n,t)}};let Pr=null;const Up=()=>{if(Pr!==null)return Pr;try{if(Pr=typeof window<"u"&&window.sessionStorage!==null,!Pr)return!1;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{Pr=!1}return Pr};var qj={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&Up())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:n}=e;n&&Up()&&window.sessionStorage.setItem(n,t)}},Gj={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:n,userLanguage:r,language:s}=navigator;if(n)for(let i=0;i<n.length;i++)e.push(n[i]);r&&e.push(r),s&&e.push(s)}return e.length>0?e:void 0}},Jj={name:"htmlTag",lookup(t){let{htmlTag:e}=t,n;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},Yj={name:"path",lookup(t){var s;let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(s=n[typeof e=="number"?e:0])==null?void 0:s.replace("/",""):void 0}},Xj={name:"subdomain",lookup(t){var s,i;let{lookupFromSubdomainIndex:e}=t;const n=typeof e=="number"?e+1:1,r=typeof window<"u"&&((i=(s=window.location)==null?void 0:s.hostname)==null?void 0:i.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[n]}};let iv=!1;try{document.cookie,iv=!0}catch{}const ov=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];iv||ov.splice(1,1);const Qj=()=>({order:ov,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t});class av{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,n)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=Vj(n,this.options||{},Qj()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=s=>s.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(zj),this.addDetector(Wj),this.addDetector(Kj),this.addDetector(qj),this.addDetector(Gj),this.addDetector(Jj),this.addDetector(Yj),this.addDetector(Xj),this.addDetector(Hj)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,n=[];return e.forEach(r=>{if(this.detectors[r]){let s=this.detectors[r].lookup(this.options);s&&typeof s=="string"&&(s=[s]),s&&(n=n.concat(s))}}),n=n.filter(r=>r!=null&&!Fj(r)).map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||n.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}av.type="languageDetector";function uc(t){"@babel/helpers - typeof";return uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uc(t)}function lv(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":uc(XMLHttpRequest))==="object"}function Zj(t){return!!t&&typeof t.then=="function"}function eP(t){return Zj(t)?t:Promise.resolve(t)}const tP="modulepreload",nP=function(t){return"/"+t},Vp={},uv=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=nP(l),l in Vp)return;Vp[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const c=document.createElement("link");if(c.rel=u?"stylesheet":tP,u||(c.as="script"),c.crossOrigin="",c.href=l,a&&c.setAttribute("nonce",a),document.head.appendChild(c),u)return new Promise((f,p)=>{c.addEventListener("load",f),c.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};function Fp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Bp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Fp(Object(n),!0).forEach(function(r){rP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fp(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rP(t,e,n){return(e=sP(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sP(t){var e=iP(t,"string");return fr(e)=="symbol"?e:e+""}function iP(t,e){if(fr(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(fr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fr(t){"@babel/helpers - typeof";return fr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fr(t)}var Dn=typeof fetch=="function"?fetch:void 0;typeof global<"u"&&global.fetch?Dn=global.fetch:typeof window<"u"&&window.fetch&&(Dn=window.fetch);var ji;lv()&&(typeof global<"u"&&global.XMLHttpRequest?ji=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(ji=window.XMLHttpRequest));var da;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?da=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(da=window.ActiveXObject));typeof Dn!="function"&&(Dn=void 0);if(!Dn&&!ji&&!da)try{uv(()=>import("./browser-ponyfill-BuIFGEpV.js").then(t=>t.b),[]).then(function(t){Dn=t.default}).catch(function(){})}catch{}var cc=function(e,n){if(n&&fr(n)==="object"){var r="";for(var s in n)r+="&"+encodeURIComponent(s)+"="+encodeURIComponent(n[s]);if(!r)return e;e=e+(e.indexOf("?")!==-1?"&":"?")+r.slice(1)}return e},zp=function(e,n,r,s){var i=function(l){if(!l.ok)return r(l.statusText||"Error",{status:l.status});l.text().then(function(u){r(null,{status:l.status,data:u})}).catch(r)};if(s){var o=s(e,n);if(o instanceof Promise){o.then(i).catch(r);return}}typeof fetch=="function"?fetch(e,n).then(i).catch(r):Dn(e,n).then(i).catch(r)},Wp=!1,oP=function(e,n,r,s){e.queryStringParams&&(n=cc(n,e.queryStringParams));var i=Bp({},typeof e.customHeaders=="function"?e.customHeaders():e.customHeaders);typeof window>"u"&&typeof global<"u"&&typeof global.process<"u"&&global.process.versions&&global.process.versions.node&&(i["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),r&&(i["Content-Type"]="application/json");var o=typeof e.requestOptions=="function"?e.requestOptions(r):e.requestOptions,a=Bp({method:r?"POST":"GET",body:r?e.stringify(r):void 0,headers:i},Wp?{}:o),l=typeof e.alternateFetch=="function"&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{zp(n,a,s,l)}catch(u){if(!o||Object.keys(o).length===0||!u.message||u.message.indexOf("not implemented")<0)return s(u);try{Object.keys(o).forEach(function(d){delete a[d]}),zp(n,a,s,l),Wp=!0}catch(d){s(d)}}},aP=function(e,n,r,s){r&&fr(r)==="object"&&(r=cc("",r).slice(1)),e.queryStringParams&&(n=cc(n,e.queryStringParams));try{var i=ji?new ji:new da("MSXML2.XMLHTTP.3.0");i.open(r?"POST":"GET",n,1),e.crossDomain||i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.withCredentials=!!e.withCredentials,r&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.overrideMimeType&&i.overrideMimeType("application/json");var o=e.customHeaders;if(o=typeof o=="function"?o():o,o)for(var a in o)i.setRequestHeader(a,o[a]);i.onreadystatechange=function(){i.readyState>3&&s(i.status>=400?i.statusText:null,{status:i.status,data:i.responseText})},i.send(r)}catch(l){console&&console.log(l)}},lP=function(e,n,r,s){if(typeof r=="function"&&(s=r,r=void 0),s=s||function(){},Dn&&n.indexOf("file:")!==0)return oP(e,n,r,s);if(lv()||typeof ActiveXObject=="function")return aP(e,n,r,s);s(new Error("No fetch and no xhr implementation found!"))};function hs(t){"@babel/helpers - typeof";return hs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hs(t)}function Hp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Vl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Hp(Object(n),!0).forEach(function(r){cv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hp(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uP(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dv(r.key),r)}}function dP(t,e,n){return e&&cP(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function cv(t,e,n){return(e=dv(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dv(t){var e=hP(t,"string");return hs(e)=="symbol"?e:e+""}function hP(t,e){if(hs(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var fP=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(n){return JSON.parse(n)},stringify:JSON.stringify,parsePayload:function(n,r,s){return cv({},r,s||"")},parseLoadPayload:function(n,r){},request:lP,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},hv=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};uP(this,t),this.services=e,this.options=n,this.allOptions=r,this.type="backend",this.init(e,n,r)}return dP(t,[{key:"init",value:function(n){var r=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.services=n,this.options=Vl(Vl(Vl({},fP()),this.options||{}),s),this.allOptions=i,this.services&&this.options.reloadInterval){var o=setInterval(function(){return r.reload()},this.options.reloadInterval);hs(o)==="object"&&typeof o.unref=="function"&&o.unref()}}},{key:"readMulti",value:function(n,r,s){this._readAny(n,n,r,r,s)}},{key:"read",value:function(n,r,s){this._readAny([n],n,[r],r,s)}},{key:"_readAny",value:function(n,r,s,i,o){var a=this,l=this.options.loadPath;typeof this.options.loadPath=="function"&&(l=this.options.loadPath(n,s)),l=eP(l),l.then(function(u){if(!u)return o(null,{});var d=a.services.interpolator.interpolate(u,{lng:n.join("+"),ns:s.join("+")});a.loadUrl(d,o,r,i)})}},{key:"loadUrl",value:function(n,r,s,i){var o=this,a=typeof s=="string"?[s]:s,l=typeof i=="string"?[i]:i,u=this.options.parseLoadPayload(a,l);this.options.request(this.options,n,u,function(d,c){if(c&&(c.status>=500&&c.status<600||!c.status))return r("failed loading "+n+"; status code: "+c.status,!0);if(c&&c.status>=400&&c.status<500)return r("failed loading "+n+"; status code: "+c.status,!1);if(!c&&d&&d.message){var f=d.message.toLowerCase(),p=["failed","fetch","network","load"].find(function(b){return f.indexOf(b)>-1});if(p)return r("failed loading "+n+": "+d.message,!0)}if(d)return r(d,!1);var m,v;try{typeof c.data=="string"?m=o.options.parse(c.data,s,i):m=c.data}catch{v="failed parsing "+n+" to json"}if(v)return r(v,!1);r(null,m)})}},{key:"create",value:function(n,r,s,i,o){var a=this;if(this.options.addPath){typeof n=="string"&&(n=[n]);var l=this.options.parsePayload(r,s,i),u=0,d=[],c=[];n.forEach(function(f){var p=a.options.addPath;typeof a.options.addPath=="function"&&(p=a.options.addPath(f,r));var m=a.services.interpolator.interpolate(p,{lng:f,ns:r});a.options.request(a.options,m,l,function(v,b){u+=1,d.push(v),c.push(b),u===n.length&&typeof o=="function"&&o(d,c)})})}}},{key:"reload",value:function(){var n=this,r=this.services,s=r.backendConnector,i=r.languageUtils,o=r.logger,a=s.language;if(!(a&&a.toLowerCase()==="cimode")){var l=[],u=function(c){var f=i.toResolveHierarchy(c);f.forEach(function(p){l.indexOf(p)<0&&l.push(p)})};u(a),this.allOptions.preload&&this.allOptions.preload.forEach(function(d){return u(d)}),l.forEach(function(d){n.allOptions.ns.forEach(function(c){s.read(d,c,"read",null,null,function(f,p){f&&o.warn("loading namespace ".concat(c," for language ").concat(d," failed"),f),!f&&p&&o.log("loaded namespace ".concat(c," for language ").concat(d),p),s.loaded("".concat(d,"|").concat(c),f,p)})})})}}}])}();hv.type="backend";const pP=["zh","en"];function Ld(t){if(!t)return"zh";const e=String(t).toLowerCase();return e.startsWith("zh")?"zh":e.startsWith("en")?"en":"zh"}ie.use(hv).use(av).use(Sj).init({fallbackLng:"zh",supportedLngs:pP,load:"languageOnly",ns:["translation"],defaultNS:"translation",backend:{loadPath:"/locales/{{lng}}/translation.json"},detection:{order:["localStorage","navigator","htmlTag"],caches:["localStorage"],lookupLocalStorage:"whattoeat_lang"},interpolation:{escapeValue:!1},react:{useSuspense:!1}});ie.on("languageChanged",t=>{const e=Ld(t);document.documentElement.lang=e==="zh"?"zh-CN":"en",document.documentElement.dataset.lang=e});document.documentElement.lang=Ld(ie.resolvedLanguage)==="zh"?"zh-CN":"en";document.documentElement.dataset.lang=Ld(ie.resolvedLanguage);const ho="sk-4309d4ad184d40e398086b1c1cd00e45",mP="https://api.deepseek.com/".replace(/\/+$/,""),Kp=`${mP}/v1/chat/completions`;function qp(t){if(!t)return"zh";const e=String(t).toLowerCase();return e.startsWith("zh")?"zh":e.startsWith("en")?"en":"zh"}function gP(t,e){const n=JSON.stringify(t,null,2);return e==="en"?{system:`You are a professional, witty food critic.
You MUST write the persona report strictly in English.
The title MUST be in English as well.
Return strict JSON only (no Markdown, no extra explanations).`,user:`Analyze the user's recent final dining decisions (selection_results) and produce structured content for a high-design modal:
- title (<= 10 words)
- report (~150 words, funny but not mean)
- 6-8 short taste tags
- loves (3-5)
- avoids (2-4)
- signature dishes (3-6)
- one actionable tip (1 sentence, <= 20 words)

Recent selections (10-20, newest first):
${n}

Output MUST be strict JSON:
{
  "title": "short title",
  "report": "about 150 words",
  "tags": ["tag1", "tag2"],
  "loves": ["love1", "love2"],
  "avoids": ["avoid1", "avoid2"],
  "signature_dishes": ["dish1", "dish2"],
  "next_try": "one actionable tip"
}`}:{system:`

 JSON Markdown`,user:`selection_results
- 10
- 150
- 6-8 
- 3-5
- 2-4
- 3-6
- 1<=35

10-20
${n}

 JSON Markdown
{
  "title": "10",
  "report": "150",
  "tags": ["1", "2"],
  "loves": ["1", "2"],
  "avoids": ["1", "2"],
  "signature_dishes": ["1", "2"],
  "next_try": ""
}`}}function yP(t,e,n){var i,o;const r=JSON.stringify(((i=t==null?void 0:t.slice)==null?void 0:i.call(t,0,30))||[],null,2),s=JSON.stringify(((o=e==null?void 0:e.slice)==null?void 0:o.call(e,0,20))||[],null,2);return n==="en"?{system:`You are a warm, supportive food companion who knows when people need to eat or grab milk tea.
Use only English.
Return STRICT JSON only (no Markdown, no chatter).`,user:`Based on the user's recent confirmed restaurants (selection_history) and recent searches (search_history), craft concise daily picks for three time slots: lunch, afternoon_tea (milk tea / coffee / desserts), and dinner.

Return STRICT JSON:
{
  "summary": "One-line headline for the day",
  "slots": [
    {
      "slot": "lunch" | "afternoon_tea" | "dinner",
      "title": "short idea (<= 12 words)",
      "why": "1-2 warm sentences why this fits today",
      "keywords": ["search keyword1", "keyword2"],
      "tags": ["spicy", "light", "milk tea", "..."],
      "drink_focus": "milk tea / coffee / none",
      "cta": "short call to action (<= 15 words)"
    }
  ]
}

selection_history (newest first, include category/address if any):
${r}

search_history (newest first):
${s}

Rules:
- Keep JSON minimal.
- Afternoon_tea slot MUST lean to drinks/desserts (milk tea preferred if the history shows it).
- Keywords should be directly usable in a nearby search app.
- If history is empty, propose mainstream, safe choices.
- Tone: gentle, caring, and encouraging (no pressure).`}:{system:`/
 JSON Markdown`,user:` selection_history  search_history 3 (lunch)(afternoon_tea//)(dinner)

 JSON
{
  "summary": "",
  "slots": [
    {
      "slot": "lunch" | "afternoon_tea" | "dinner",
      "title": "12",
      "why": "1-2 ",
      "keywords": ["1", "2"],
      "tags": ["", "", "", "..."],
      "drink_focus": "//",
      "cta": "15"
    }
  ]
}

selection_history/
${r}

search_history
${s}


-  JSON
- afternoon_tea /
- keywords 
- 
- `}}const ha={async generateUserPersona(t){var e,n;try{const r=Array.isArray(t)?t.slice(0,20):[],s=qp(ie.resolvedLanguage||ie.language),{system:i,user:o}=gP(r,s),a=await fetch(Kp,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ho}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest"},mode:"cors",credentials:"omit",body:JSON.stringify({model:"deepseek-chat",messages:[{role:"system",content:i},{role:"user",content:o}],temperature:.7,max_tokens:1e3})});if(!a.ok)throw new Error(`DeepSeek API : ${a.status}`);const u=((n=(e=(await a.json()).choices[0])==null?void 0:e.message)==null?void 0:n.content)||"";try{const d=u.match(/\{[\s\S]*\}/);if(d){const c=JSON.parse(d[0]);return{data:{title:c.title||"",report:c.report||u,tags:Array.isArray(c.tags)?c.tags:[],loves:Array.isArray(c.loves)?c.loves:[],avoids:Array.isArray(c.avoids)?c.avoids:[],signature_dishes:Array.isArray(c.signature_dishes)?c.signature_dishes:[],next_try:c.next_try||""},error:null}}}catch{}return{data:{title:"",report:u,tags:[],loves:[],avoids:[],signature_dishes:[],next_try:""},error:null}}catch(r){return console.error("DeepSeek API :",r),{data:null,error:r.message||""}}},async generateDailyRecommendations(t={}){var r,s,i;const{selectionHistory:e=[],searchHistory:n=[]}=t;try{const o=qp(ie.resolvedLanguage||ie.language),{system:a,user:l}=yP(e,n,o),u=await fetch(Kp,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ho}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest"},mode:"cors",credentials:"omit",body:JSON.stringify({model:"deepseek-chat",messages:[{role:"system",content:a},{role:"user",content:l}],temperature:.65,max_tokens:1e3})});if(!u.ok)throw new Error(`DeepSeek API : ${u.status}`);const c=((i=(s=(r=(await u.json()).choices)==null?void 0:r[0])==null?void 0:s.message)==null?void 0:i.content)||"";try{const f=c.match(/\{[\s\S]*\}/);if(f){const p=JSON.parse(f[0]),m=Array.isArray(p.slots)?p.slots:[];return{data:{summary:p.summary||"",slots:m.map(v=>({slot:v.slot||"lunch",title:v.title||"",why:v.why||"",keywords:Array.isArray(v.keywords)?v.keywords:[],tags:Array.isArray(v.tags)?v.tags:[],drink_focus:v.drink_focus||"",cta:v.cta||""}))},error:null}}}catch{}return{data:{summary:"",slots:[]},error:null}}catch(o){return console.error("DeepSeek API :",o),{data:null,error:o.message||""}}}};function vP({isOpen:t,persona:e,onClose:n,onRegenerate:r}){if(!t)return null;const{t:s}=Qe(),i=Array.isArray(e==null?void 0:e.tags)?e.tags:[],o=Array.isArray(e==null?void 0:e.loves)?e.loves:[],a=Array.isArray(e==null?void 0:e.avoids)?e.avoids:[],l=Array.isArray(e==null?void 0:e.signature_dishes)?e.signature_dishes:[];return h.jsx(Pt,{children:t&&h.jsxs(h.Fragment,{children:[h.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n,className:"fixed inset-0 bg-black bg-opacity-30 backdrop-blur-sm z-40"}),h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6",children:h.jsx(P.div,{initial:{opacity:0,scale:.92,y:18},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.92,y:18},transition:{type:"spring",damping:25,stiffness:300},className:"max-w-md w-full relative max-h-[90vh] overflow-y-auto",onClick:u=>u.stopPropagation(),children:h.jsxs("div",{className:"apple-card p-6 sm:p-8 relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 right-0 w-44 h-44 bg-gradient-to-br from-[#c2d3ff]/45 via-[#b8e1ff]/25 to-transparent rounded-full blur-2xl -translate-y-24 translate-x-20"}),h.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-gradient-to-tr from-[#d9d9ff]/30 via-white/20 to-transparent rounded-full blur-xl translate-y-16 -translate-x-16"}),h.jsx("button",{onClick:n,className:"absolute top-4 right-4 min-w-[44px] min-h-[44px] w-11 h-11 flex items-center justify-center rounded-full bg-white/70 backdrop-blur-sm hover:bg-white/90 active:bg-white transition-colors z-10 touch-manipulation border border-white/60",children:h.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),h.jsxs("div",{className:"relative z-10",children:[h.jsxs("div",{className:"text-center",children:[h.jsx(P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.12},className:"text-5xl mb-3 select-none",children:""}),h.jsx("div",{className:"text-sm text-gray-600",children:s("persona.title")}),h.jsx("div",{className:"mt-2 text-2xl font-semibold text-apple-text break-words tracking-tight",children:(e==null?void 0:e.title)||s("persona.fallbackTitle")})]}),i.length>0&&h.jsx("div",{className:"mt-5 flex flex-wrap gap-2 justify-center",children:i.slice(0,8).map(u=>h.jsx("span",{className:"px-3 py-1.5 rounded-full text-xs font-medium bg-white/70 border border-white/70 text-apple-text",children:u},u))}),h.jsxs("div",{className:"mt-6 apple-subcard p-4",children:[h.jsx("div",{className:"text-xs text-gray-500 mb-2",children:s("persona.commentTitle")}),h.jsx("div",{className:"text-sm text-gray-800 leading-relaxed whitespace-pre-wrap",children:(e==null?void 0:e.report)||s("persona.noReport")})]}),h.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[h.jsxs("div",{className:"apple-subcard p-4",children:[h.jsx("div",{className:"text-sm font-semibold text-apple-text mb-2",children:s("persona.loves")}),h.jsx("div",{className:"space-y-1",children:(o.length?o:[""]).slice(0,4).map((u,d)=>h.jsxs("div",{className:"text-xs text-gray-700",children:[" ",u]},`${u}-${d}`))})]}),h.jsxs("div",{className:"apple-subcard p-4",children:[h.jsx("div",{className:"text-sm font-semibold text-apple-text mb-2",children:s("persona.avoids")}),h.jsx("div",{className:"space-y-1",children:(a.length?a:[""]).slice(0,4).map((u,d)=>h.jsxs("div",{className:"text-xs text-gray-700",children:[" ",u]},`${u}-${d}`))})]})]}),l.length>0&&h.jsxs("div",{className:"mt-3 apple-subcard p-4",children:[h.jsx("div",{className:"text-sm font-semibold text-apple-text mb-2",children:s("persona.signature")}),h.jsx("div",{className:"flex flex-wrap gap-2",children:l.slice(0,6).map(u=>h.jsx("span",{className:"px-2.5 py-1 rounded-full text-xs bg-white/70 text-apple-text border border-white/70",children:u},u))})]}),(e==null?void 0:e.next_try)&&h.jsxs("div",{className:"mt-3 apple-accent p-4 shadow-sm",children:[h.jsx("div",{className:"text-xs text-gray-600 mb-1",children:s("persona.nextTry")}),h.jsx("div",{className:"text-sm font-semibold leading-relaxed",children:e.next_try})]}),h.jsxs("div",{className:"mt-5 flex gap-3",children:[h.jsx(P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:n,className:"flex-1 min-h-[44px] py-3 px-4 apple-btn-soft font-medium shadow-sm touch-manipulation hover:bg-white/95 active:scale-95 transition-transform",children:s("actions.close")}),r&&h.jsx(P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:r,className:"flex-1 min-h-[44px] py-3 px-4 apple-btn-primary font-medium touch-manipulation hover:opacity-90 active:scale-95 transition-transform",children:s("persona.regenerate")})]})]})]})})})]})})}function wP({onBack:t}){var Ae,ae,Ke,Gt;const{user:e,signOut:n}=vr(),{t:r,i18n:s}=Qe(),[i,o]=S.useState(null),[a,l]=S.useState([]),[u,d]=S.useState([]),[c,f]=S.useState([]),[p,m]=S.useState(null),[v,b]=S.useState(!1),[w,g]=S.useState(!1),[y,x]=S.useState(!0),[E,_]=S.useState(!1),[k,j]=S.useState(""),[T,N]=S.useState(""),[K,F]=S.useState(!1),[V,C]=S.useState(!1),M=S.useRef(null),I=(s.resolvedLanguage||s.language||"zh").startsWith("en")?"en-US":"zh-CN",X=D=>{try{return new Intl.DateTimeFormat(I,{dateStyle:"medium",timeStyle:"short"}).format(new Date(D))}catch{return new Date(D).toLocaleString(I)}};S.useEffect(()=>{R()},[e]),S.useEffect(()=>{const D=()=>{document.visibilityState==="visible"&&e&&(console.log(" "),R())};document.addEventListener("visibilitychange",D);const L=W=>{console.log(" :",W.detail),e&&setTimeout(()=>{R()},500)};return window.addEventListener("selectionSaved",L),()=>{document.removeEventListener("visibilitychange",D),window.removeEventListener("selectionSaved",L)}},[e]);const R=async()=>{if(e){x(!0);try{const{data:D}=await ze.getUserProfile(e.id);D&&(j(D.display_name||""),N(D.avatar_url||""));const{data:L}=await ze.getUserStats(e.id);o(L);const{data:W}=await ze.getUserSearchHistory(e.id,30);l(W||[]);const{data:U}=await ze.getUserViewHistory(e.id,50),{data:Z}=await ze.getUserSelectionHistory(e.id);f(Z||[]);const se=te=>te?String(te).toLowerCase().trim().replace(/\s+/g,"").replace(/[]/g,"").replace(/[,.\-!?;:]/g,""):"",Ee=new Set((Z||[]).map(te=>se(te.restaurant_name)).filter(Boolean));console.log(" :",(Z==null?void 0:Z.length)||0),console.log(" :",(U==null?void 0:U.length)||0),console.log(" :",(Z||[]).map(te=>te.restaurant_name)),console.log(" :",(U||[]).map(te=>te.restaurant_name)),console.log(" :",Array.from(Ee));const fe=(U||[]).filter(te=>{const Se=se(te.restaurant_name),Te=Ee.has(Se);return console.log(Te?` : "${te.restaurant_name}" (: "${Se}")`:` : "${te.restaurant_name}" (: "${Se}")`),!Te});console.log(" :",fe.length),console.log(" ",(Z==null?void 0:Z.length)||0,"",fe.length,""),d(fe)}catch(D){console.error(":",D)}finally{x(!1)}}},$=async()=>{g(!0);try{const D=(c||[]).slice(0,20),{data:L,error:W}=await ha.generateUserPersona(D);W?alert(r("profile.generateFailed",{error:W})):(m(L),b(!0))}catch(D){alert(r("profile.generateFailed",{error:D.message}))}finally{g(!1)}},H=()=>{const D=Ce(e,i,p,c),L=new Blob([D],{type:"text/html"}),W=URL.createObjectURL(L),U=document.createElement("a");U.href=W,U.download=r("profile.exportFile",{date:new Date().toISOString().split("T")[0]}),document.body.appendChild(U),U.click(),document.body.removeChild(U),URL.revokeObjectURL(W)},A=async()=>{F(!0);try{const{error:D}=await ze.upsertUserProfile(e.id,{email:e.email,display_name:(k==null?void 0:k.trim())||null,avatar_url:(T==null?void 0:T.trim())||null});if(D)throw D;alert(r("profile.saveSuccess"))}catch(D){alert(r("profile.saveFailed",{error:D.message||"error"}))}finally{F(!1)}},q=(D,L=200,W=200,U=.8)=>new Promise((Z,se)=>{const Ee=new FileReader;Ee.onload=fe=>{const te=new Image;te.onload=()=>{const Se=document.createElement("canvas");let Te=te.width,De=te.height;Te>De?Te>L&&(De=De*L/Te,Te=L):De>W&&(Te=Te*W/De,De=W),Se.width=Te,Se.height=De,Se.getContext("2d").drawImage(te,0,0,Te,De),Se.toBlob(pe=>{pe?Z(pe):se(new Error("Canvas to Blob failed"))},D.type,U)},te.onerror=se,te.src=fe.target.result},Ee.onerror=se,Ee.readAsDataURL(D)}),be=async D=>{var W;const L=(W=D.target.files)==null?void 0:W[0];if(L){if(!L.type.startsWith("image/")){alert(r("profile.invalidFileType"));return}if(L.size>2*1024*1024){alert(r("profile.fileTooLarge"));return}C(!0);try{const U=await q(L),Z=L.name.split(".").pop(),se=`${e.id}/avatar_${Date.now()}.${Z}`;if(T){const De=T.split("/").pop();De&&await ne.storage.from("avatars").remove([`${e.id}/${De}`])}const{data:Ee,error:fe}=await ne.storage.from("avatars").upload(se,U,{cacheControl:"3600",upsert:!0});if(fe)throw fe;const{data:te}=ne.storage.from("avatars").getPublicUrl(se),Se=te.publicUrl,{error:Te}=await ze.upsertUserProfile(e.id,{email:e.email,display_name:(k==null?void 0:k.trim())||null,avatar_url:Se});if(Te)throw Te;N(Se),alert(r("profile.saveSuccess"))}catch(U){console.error("Upload error:",U),alert(r("profile.uploadFailed",{error:U.message||"Unknown error"}))}finally{C(!1),M.current&&(M.current.value="")}}},Ce=(D,L,W,U)=>{var se;const Z=((se=U==null?void 0:U.slice(0,3))==null?void 0:se.map((Ee,fe)=>`${fe+1}. ${Ee.restaurant_name} (${Ee.category})`).join("<br>"))||"";return`<!DOCTYPE html>
<html lang="${I}">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title> - whattoeat.today</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(180deg, #fbfbfd 0%, #f5f5f7 100%);
      padding: 40px 20px;
      min-height: 100vh;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      border-radius: 28px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    h1 { color: #1D1D1F; margin-bottom: 30px; font-size: 32px; }
    h2 { color: #1D1D1F; margin-top: 30px; margin-bottom: 15px; font-size: 24px; }
    .section { margin-bottom: 30px; padding: 20px; background: rgba(245,245,247,0.9); border-radius: 20px; border: 1px solid rgba(29,29,31,0.08); }
    .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-top: 15px; }
    .stat-item { text-align: center; padding: 15px; background: white; border-radius: 16px; }
    .stat-value { font-size: 28px; font-weight: 700; color: #1D1D1F; letter-spacing: -0.02em; }
    .stat-label { color: #666; margin-top: 5px; }
    .watermark { text-align: center; color: #999; margin-top: 40px; font-size: 14px; }
    p { line-height: 1.8; color: #333; margin-bottom: 10px; }
  </style>
</head>
<body>
  <div class="container">
    <h1> </h1>
    
    <div class="section">
      <h2></h2>
      <p><strong>:</strong> ${(D==null?void 0:D.email)||""}</p>
      <p><strong>:</strong> ${new Date().toLocaleString(I)}</p>
    </div>

    ${L?`
    <div class="section">
      <h2></h2>
      <div class="stats">
        <div class="stat-item">
          <div class="stat-value">${L.weeklySearches||0}</div>
          <div class="stat-label"></div>
        </div>
        <div class="stat-item">
          <div class="stat-value">${L.totalSelections||0}</div>
          <div class="stat-label"></div>
        </div>
        <div class="stat-item">
          <div class="stat-value">${L.topCategory||""}</div>
          <div class="stat-label"></div>
        </div>
      </div>
    </div>
    `:""}

    ${W?`
    <div class="section">
      <h2>AI </h2>
      <p>${W.title||""}</p>
    </div>

    <div class="section">
      <h2>150</h2>
      <p>${(W.report||"").replaceAll(`
`,"<br>")}</p>
    </div>
    `:""}

    <div class="section">
      <h2> TOP 3</h2>
      <p>${Z}</p>
    </div>

    <div class="watermark">
      <p>Generated by whattoeat.today</p>
    </div>
  </div>
</body>
</html>`};return y?h.jsx("div",{className:"safe-area-container bg-gray-50 flex items-center justify-center",children:h.jsx(P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-8 h-8 border-2 border-gray-900 border-t-transparent rounded-full"})}):h.jsxs("div",{className:"safe-area-container bg-gray-50 relative",children:[h.jsx("div",{className:"bg-white sticky top-0 z-20 border-b border-gray-200 safe-top",children:h.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-3 flex items-center gap-2",children:[h.jsx(P.button,{onClick:t,whileTap:{scale:.95},className:"min-w-[44px] min-h-[44px] w-11 h-11 flex items-center justify-center text-blue-500 hover:bg-blue-50 rounded-full transition-colors","aria-label":"back",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),h.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:r("profile.title","")})]})}),h.jsxs("div",{className:"relative z-10 max-w-4xl mx-auto px-4 pb-20 pt-6 space-y-4",children:[h.jsx(P.div,{initial:{opacity:0,y:18},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-6 shadow-sm",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-2xl font-bold text-white shadow-md overflow-hidden",children:T?h.jsx("img",{src:T,alt:"avatar",className:"w-full h-full object-cover",onError:D=>{D.currentTarget.style.display="none"}}):((k==null?void 0:k[0])||((Ae=e==null?void 0:e.email)==null?void 0:Ae[0])||"U").toUpperCase()}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-900 leading-tight break-words",children:k||((ae=e==null?void 0:e.email)==null?void 0:ae.split("@")[0])||(e==null?void 0:e.email)||r("select.unknown")}),h.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:r("profile.explorer")})]})]})}),i&&h.jsxs(P.div,{initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{delay:.06},className:"bg-white rounded-2xl p-6 shadow-sm",children:[h.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:r("profile.stats","")}),h.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[h.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-xl",children:[h.jsx("div",{className:"text-2xl font-bold text-gray-900",children:i.weeklySearches||0}),h.jsx("div",{className:"text-xs text-gray-600 mt-1",children:r("profile.weeklySearches","")})]}),h.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-xl",children:[h.jsx("div",{className:"text-2xl font-bold text-gray-900",children:i.totalSelections||0}),h.jsx("div",{className:"text-xs text-gray-600 mt-1",children:r("profile.totalSelections","")})]}),h.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-xl",children:[h.jsx("div",{className:"text-lg font-bold text-gray-900 truncate",children:i.topCategory||""}),h.jsx("div",{className:"text-xs text-gray-600 mt-1",children:r("profile.topCategory","")})]})]})]}),h.jsxs(P.div,{initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{delay:.08},className:"bg-white rounded-2xl p-6 shadow-sm space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-sm text-gray-600",children:r("profile.displayName")}),h.jsx("input",{value:k,onChange:D=>j(D.target.value),placeholder:r("profile.displayNamePlaceholder"),className:"mt-2 w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm text-gray-600 block mb-2",children:r("profile.avatar")}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-2xl font-bold text-white shadow-md overflow-hidden flex-shrink-0",children:T?h.jsx("img",{src:T,alt:"avatar preview",className:"w-full h-full object-cover",onError:D=>{var L;D.currentTarget.style.display="none",D.currentTarget.parentElement.innerHTML=((k==null?void 0:k[0])||((L=e==null?void 0:e.email)==null?void 0:L[0])||"U").toUpperCase()}}):((k==null?void 0:k[0])||((Ke=e==null?void 0:e.email)==null?void 0:Ke[0])||"U").toUpperCase()}),h.jsxs("div",{className:"flex-1",children:[h.jsx("input",{ref:M,type:"file",accept:"image/jpeg,image/jpg,image/png",onChange:be,className:"hidden",id:"avatar-upload"}),h.jsx(P.label,{htmlFor:"avatar-upload",whileHover:{scale:1.02},whileTap:{scale:.98},className:"inline-block w-full py-3 px-4 bg-blue-50 text-blue-600 rounded-xl font-medium text-center cursor-pointer hover:bg-blue-100 transition-colors",children:r(V?"profile.saving":T?"profile.changeAvatar":"profile.uploadAvatar")}),h.jsx("p",{className:"text-xs text-gray-400 mt-2",children:r("profile.avatarHint")})]})]})]}),h.jsx(P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},disabled:K,onClick:A,className:"w-full py-3 bg-blue-500 text-white rounded-xl font-semibold shadow-sm disabled:opacity-60",children:r(K?"profile.saving":"profile.save")})]}),h.jsxs(P.div,{initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{delay:.12},className:"bg-white rounded-2xl p-6 shadow-sm",children:[h.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:r("profile.aiPersona","AI ")}),p?h.jsxs("div",{className:"space-y-3",children:[h.jsx("div",{className:"p-4 bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl border border-blue-100",children:h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold text-lg",children:((Gt=p.title)==null?void 0:Gt[0])||""}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("h4",{className:"font-semibold text-gray-900 truncate",children:p.title||""}),h.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:r("profile.personaGenerated","")})]})]})}),h.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[h.jsx(P.button,{onClick:()=>b(!0),whileHover:{scale:1.02},whileTap:{scale:.98},className:"py-3 px-4 bg-blue-500 text-white rounded-xl text-sm font-medium shadow-sm hover:bg-blue-600 transition-colors active:scale-95",children:r("profile.viewReport","")}),h.jsx(P.button,{onClick:H,whileHover:{scale:1.02},whileTap:{scale:.98},className:"py-3 px-4 bg-white text-blue-500 border-2 border-blue-200 rounded-xl text-sm font-medium hover:bg-blue-50 transition-colors active:scale-95",children:r("profile.exportReport","")})]}),h.jsx(P.button,{onClick:$,disabled:w,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full py-2.5 px-4 bg-gray-100 text-gray-700 rounded-xl text-sm font-medium hover:bg-gray-200 disabled:opacity-60 disabled:cursor-not-allowed transition-colors active:scale-95",children:w?r("profile.generating","..."):r("profile.regenerate","")})]}):h.jsx(P.button,{onClick:$,disabled:w,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full py-3 bg-blue-500 text-white rounded-xl text-base font-medium shadow-sm hover:bg-blue-600 disabled:opacity-60 disabled:cursor-not-allowed transition-colors",children:w?r("profile.generating","..."):r("profile.generate"," AI ")})]}),h.jsxs(P.div,{initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{delay:.18},className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:[h.jsxs("div",{className:"flex items-center gap-2 p-4",children:[h.jsxs("button",{onClick:()=>_(!E),className:"flex-1 flex items-center justify-between hover:bg-gray-50 transition-colors rounded-lg p-2 -m-2",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center",children:h.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}),h.jsxs("div",{className:"text-left",children:[h.jsx("span",{className:"text-base font-medium text-gray-900 block",children:r("profile.history","")}),h.jsx("span",{className:"text-xs text-gray-500",children:r("profile.historyCount",{count:c.length+u.length},`${c.length+u.length} `)})]})]}),h.jsx("svg",{className:`w-5 h-5 text-gray-400 transition-transform ${E?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),h.jsx(P.button,{onClick:R,whileHover:{scale:1.05},whileTap:{scale:.95},className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-50 transition-colors",title:"",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),E&&(c.length>0||u.length>0)&&h.jsx("div",{className:"border-t border-gray-100 max-h-[500px] overflow-y-auto",children:h.jsxs("div",{className:"p-4 space-y-4",children:[c.length>0&&h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center gap-2 px-2",children:[h.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500"}),h.jsx("span",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wide",children:r("profile.confirmedSelections","")}),h.jsxs("span",{className:"text-xs text-gray-400",children:["(",c.length,")"]})]}),c.map((D,L)=>h.jsxs(P.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:L*.02},className:"group relative p-4 bg-gradient-to-br from-green-50 via-emerald-50 to-green-50 border-l-4 border-green-500 rounded-xl shadow-sm hover:shadow-md transition-all active:scale-[0.98]",children:[h.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-green-400 to-emerald-400 rounded-l-xl"}),h.jsx("div",{className:"absolute top-3 right-3 w-6 h-6 rounded-full bg-green-500 flex items-center justify-center shadow-sm",children:h.jsx("svg",{className:"w-3.5 h-3.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),h.jsx("div",{className:"flex items-start gap-3 pr-8",children:h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("div",{className:"flex items-center gap-2 mb-1",children:h.jsx("h4",{className:"font-semibold text-gray-900 truncate group-hover:text-green-700 transition-colors",children:D.restaurant_name||""})}),h.jsx("div",{className:"flex items-center gap-2 mt-1.5",children:D.category&&h.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md bg-green-100 text-green-700 text-xs font-medium",children:D.category})}),D.address&&h.jsxs("p",{className:"text-xs text-gray-600 mt-2 truncate flex items-center gap-1",children:[h.jsxs("svg",{className:"w-3 h-3 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),D.address]}),h.jsxs("p",{className:"text-xs text-gray-500 mt-2 flex items-center gap-1",children:[h.jsx("svg",{className:"w-3 h-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),X(D.timestamp)]})]})})]},`selection-${L}`))]}),u.length>0&&h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center gap-2 px-2 mt-4",children:[h.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-400"}),h.jsx("span",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wide",children:r("profile.viewedButNotSelected","")}),h.jsxs("span",{className:"text-xs text-gray-400",children:["(",u.length,")"]})]}),u.map((D,L)=>h.jsxs(P.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:(c.length+L)*.02},className:"group relative p-4 bg-gradient-to-br from-gray-50 via-slate-50 to-gray-50 border-l-4 border-gray-300 rounded-xl shadow-sm hover:shadow-md transition-all active:scale-[0.98] opacity-75",children:[h.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-gray-300 to-gray-400 rounded-l-xl"}),h.jsx("div",{className:"absolute top-3 right-3 w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center shadow-sm",children:h.jsx("svg",{className:"w-3.5 h-3.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})})}),h.jsx("div",{className:"flex items-start gap-3 pr-8",children:h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("h4",{className:"font-medium text-gray-700 truncate group-hover:text-gray-900 transition-colors",children:D.restaurant_name||""}),h.jsxs("div",{className:"flex items-center gap-2 mt-1.5 flex-wrap",children:[D.category&&h.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md bg-gray-200 text-gray-600 text-xs font-medium",children:D.category}),D.rating&&h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("svg",{className:"w-3 h-3 text-yellow-400 fill-current",viewBox:"0 0 20 20",children:h.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),h.jsx("span",{className:"text-xs text-gray-500",children:D.rating})]}),D.distance>0&&h.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[h.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),D.distance>1e3?`${(D.distance/1e3).toFixed(1)}km`:`${D.distance}m`]})]}),D.address&&h.jsxs("p",{className:"text-xs text-gray-500 mt-2 truncate flex items-center gap-1",children:[h.jsxs("svg",{className:"w-3 h-3 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),D.address]}),h.jsxs("p",{className:"text-xs text-gray-400 mt-2 flex items-center gap-1",children:[h.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),X(D.viewed_at)]})]})})]},`view-${L}`))]})]})}),E&&c.length===0&&u.length===0&&h.jsxs("div",{className:"border-t border-gray-100 p-8 text-center",children:[h.jsx("div",{className:"text-gray-400 text-4xl mb-2",children:""}),h.jsx("p",{className:"text-gray-500 text-sm font-medium",children:r("profile.noHistory","")}),h.jsx("p",{className:"text-gray-400 text-xs mt-1",children:'""'})]})]}),h.jsx(P.div,{initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{delay:.22},className:"bg-white rounded-xl p-4 shadow-sm border border-gray-200",children:h.jsx("button",{onClick:n,className:"w-full text-left text-base font-medium text-red-500 hover:text-red-600 transition-colors",children:r("profile.logout","")})})]}),h.jsx(vP,{isOpen:v,persona:p,onClose:()=>b(!1),onRegenerate:$})]})}const fv=[{key:"lunch",hour:11,minute:30},{key:"afternoon_tea",hour:15,minute:0},{key:"dinner",hour:18,minute:30}];let dc=[];function gs(){return typeof window<"u"&&typeof Notification<"u"}function xP(){return gs()?Notification.permission:"denied"}function Ns(t,e="info"){if(typeof window<"u"&&window.showToast)window.showToast(t,e);else{const n=document.createElement("div");n.textContent=t,n.style.cssText=`
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: ${e==="error"?"#ef4444":e==="success"?"#10b981":"#3b82f6"};
      color: white;
      padding: 12px 24px;
      border-radius: 8px;
      z-index: 10000;
      font-size: 14px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      animation: fadeInOut 3s ease-in-out;
    `,document.body.appendChild(n),setTimeout(()=>{n.style.opacity="0",n.style.transition="opacity 0.3s",setTimeout(()=>document.body.removeChild(n),300)},2700)}}async function bP(){if(!gs())return Ns("","error"),"denied";if(Notification.permission==="granted")return"granted";if(Notification.permission==="denied")return Ns("","error"),"denied";try{const t=await Notification.requestPermission();return t==="granted"?Ns("","success"):t==="denied"&&Ns("","error"),t}catch(t){return console.error("",t),Ns("","error"),"denied"}}function pv(){dc.forEach(t=>{clearTimeout(t)}),dc=[]}function SP(t,e){const n=new Date,r=new Date;return r.setHours(t,e,0,0),r<=n&&r.setDate(r.getDate()+1),r.getTime()-n.getTime()}function mv(t){if(!gs()||Notification.permission!=="granted")return!1;try{const{title:e,body:n,url:r}=t||{},s=new Notification(e||"",{body:n||"",silent:!0,data:r||null});return r&&(s.onclick=i=>{i.preventDefault();try{window.focus()}catch{}try{window.location.hash=r}catch{}}),!0}catch(e){return console.error("",e),!1}}function gv(t,e,n,r){const s=SP(t.hour,t.minute),i=window.setTimeout(()=>{const o=n(t,e);r&&!o.url&&(o.url=r),mv(o),gv(t,e,n,r)},s);dc.push(i)}function _P(t,e){const r={lunch:"",afternoon_tea:"",dinner:""}[t.key]||"",s=e?`${e.title||""}${e.why?`  ${e.why}`:""}`:"";return{title:r,body:s}}function kP(t=[],e={}){const n=e.buildContent||_P,r=e.onClickUrl||"#/recommendation";if(pv(),!gs()||Notification.permission!=="granted")return{scheduled:0,error:"no-permission"};let s=0;return fv.forEach(i=>{const o=t.find(a=>a.slot===i.key);gv(i,o,n,r),s+=1}),{scheduled:s,error:null}}function EP(t){return!gs()||Notification.permission!=="granted"?!1:mv(t||{title:"",body:"",url:"#/recommendation"})}const st={DEFAULT_SLOTS:fv,isSupported:gs,getPermissionStatus:xP,requestPermission:bP,clearScheduled:pv,scheduleDailyRecommendations:kP,sendTestNotification:EP},Fl="wte_daily_notify_enabled";function TP({onBack:t}){const{user:e}=vr(),{t:n}=Qe(),[r,s]=S.useState([]),[i,o]=S.useState(""),[a,l]=S.useState(!0),[u,d]=S.useState(!1),[c,f]=S.useState(""),[p,m]=S.useState(!1),[v,b]=S.useState(st.getPermissionStatus()),w=st.DEFAULT_SLOTS;S.useEffect(()=>{try{const _=localStorage.getItem(Fl);m(_==="1")}catch{}},[]),S.useEffect(()=>(y(),()=>st.clearScheduled()),[e==null?void 0:e.id]),S.useEffect(()=>{p&&v==="granted"&&r.length>0?st.scheduleDailyRecommendations(r,{buildContent:(_,k)=>({title:n(`daily.slots.${_.key}.notifyTitle`,{defaultValue:n("daily.notify.defaultTitle")})||n("daily.notify.defaultTitle"),body:k?`${k.title||""}${k.why?`  ${k.why}`:""}`:n("daily.notify.defaultBody")})}):st.clearScheduled()},[p,v,r,n]);const g=S.useMemo(()=>w.map(_=>({..._,rec:r.find(k=>k.slot===_.key)})),[r,w]),y=async()=>{f(""),l(_=>_===!0||r.length===0),d(!0);try{const _=e?ze.getUserSelectionHistory(e.id,30):Promise.resolve({data:[]}),k=e?ze.getUserSearchHistory(e.id,20):Promise.resolve({data:[]}),[{data:j},{data:T}]=await Promise.all([_,k]),{data:N,error:K}=await ha.generateDailyRecommendations({selectionHistory:j||[],searchHistory:T||[]});if(K)throw new Error(K);s((N==null?void 0:N.slots)||[]),o((N==null?void 0:N.summary)||"")}catch(_){console.error("",_),f(_.message||n("daily.errorFallback")),s([]),o("")}finally{l(!1),d(!1)}},x=async()=>{if(p){st.clearScheduled();try{localStorage.removeItem(Fl)}catch{}m(!1)}else{if(!st.isSupported()){f(n("daily.notify.unsupported"));return}const _=await st.requestPermission();if(b(_),_!=="granted"){f(n("daily.notify.permissionDenied"));return}try{localStorage.setItem(Fl,"1")}catch{}m(!0)}},E=()=>{if(!st.isSupported()){f(n("daily.notify.unsupported"));return}st.sendTestNotification({title:n("daily.notify.testTitle"),body:n("daily.notify.testBody")})||f(n("daily.notify.permissionDenied"))};return h.jsxs("div",{className:"safe-area-container bg-gray-50 relative",children:[h.jsx("div",{className:"bg-white sticky top-0 z-20 border-b border-gray-200",children:h.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-3 flex items-center gap-2",children:[h.jsx(P.button,{onClick:t,whileTap:{scale:.95},className:"min-w-[44px] min-h-[44px] w-11 h-11 flex items-center justify-center text-blue-500 hover:bg-blue-50 rounded-full transition-colors","aria-label":"back",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:n("daily.title")}),h.jsx("p",{className:"text-xs text-gray-500",children:n("daily.subtitle")})]}),h.jsx("div",{className:"ml-auto flex items-center gap-2",children:h.jsx(P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:y,disabled:u,className:"px-3 py-2 text-sm font-medium rounded-xl bg-blue-500 text-white shadow-sm disabled:opacity-60",children:n(u?"daily.refreshing":"daily.refresh")})})]})}),h.jsxs("div",{className:"max-w-4xl mx-auto px-4 pb-14 pt-4 space-y-4",children:[c&&h.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 rounded-xl p-4 text-sm",children:n("daily.error",{error:c})}),i&&h.jsxs(P.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 rounded-2xl p-4 shadow-sm",children:[h.jsx("div",{className:"text-xs text-blue-600 mb-1",children:n("daily.summary")}),h.jsx("div",{className:"text-base text-gray-900 font-semibold",children:i})]}),h.jsx(P.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100",children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-100 text-blue-500 flex items-center justify-center text-lg",children:""}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center justify-between gap-3",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-base font-semibold text-gray-900",children:n("daily.notify.title")}),h.jsx("div",{className:"text-xs text-gray-500 mt-1",children:n("daily.notify.desc")})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${p?"bg-green-50 text-green-700":"bg-gray-100 text-gray-500"}`,children:n(p?"daily.notify.enabled":"daily.notify.disabled")}),h.jsx(P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:x,className:"px-3 py-2 rounded-xl bg-apple-text text-white text-sm font-medium shadow-sm",children:n(p?"daily.notify.turnOff":"daily.notify.turnOn")})]})]}),h.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[h.jsx("button",{onClick:E,className:"text-xs px-3 py-2 rounded-lg bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",children:n("daily.notify.test")}),h.jsx("span",{className:"text-xs text-gray-400",children:n("daily.notify.scheduleHint",{lunch:n("daily.slots.lunch.time"),tea:n("daily.slots.afternoon_tea.time"),dinner:n("daily.slots.dinner.time")})})]})]})]})}),a?h.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm flex items-center justify-center",children:[h.jsx(P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-7 h-7 border-2 border-apple-text border-t-transparent rounded-full"}),h.jsx("span",{className:"ml-3 text-sm text-gray-600",children:n("daily.loading")})]}):g.every(_=>!_.rec)?h.jsx("div",{className:"bg-white rounded-2xl p-8 shadow-sm text-center text-gray-500 text-sm",children:n("daily.empty")}):g.map((_,k)=>{var j,T,N,K,F,V,C,M;return h.jsxs(P.div,{initial:{opacity:0,y:14},animate:{opacity:1,y:0},transition:{delay:k*.05},className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100",children:[h.jsxs("div",{className:"flex items-start justify-between gap-3",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 rounded-xl bg-gray-100 flex items-center justify-center text-lg",children:_.key==="lunch"?"":_.key==="afternoon_tea"?"":""}),h.jsxs("div",{children:[h.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[n(`daily.slots.${_.key}.label`),h.jsx("span",{className:"text-xs text-gray-500 ml-2",children:n(`daily.slots.${_.key}.time`)})]}),h.jsx("div",{className:"text-xs text-gray-500 mt-1",children:(j=_.rec)!=null&&j.drink_focus?_.rec.drink_focus:n(`daily.slots.${_.key}.hint`)})]})]}),h.jsxs("span",{className:"text-xs text-gray-400",children:[k+1,"/3"]})]}),h.jsxs("div",{className:"mt-3",children:[h.jsx("div",{className:"text-base font-semibold text-gray-900",children:((T=_.rec)==null?void 0:T.title)||n(`daily.slots.${_.key}.fallback`)}),((N=_.rec)==null?void 0:N.why)&&h.jsx("p",{className:"text-sm text-gray-600 mt-2",children:_.rec.why})]}),((F=(K=_.rec)==null?void 0:K.keywords)==null?void 0:F.length)>0&&h.jsxs("div",{className:"mt-3",children:[h.jsx("div",{className:"text-xs text-gray-500 mb-1",children:n("daily.keywords")}),h.jsx("div",{className:"flex flex-wrap gap-2",children:_.rec.keywords.slice(0,4).map(I=>h.jsx("span",{className:"px-2.5 py-1 bg-gray-100 rounded-full text-xs text-gray-700",children:I},I))})]}),((C=(V=_.rec)==null?void 0:V.tags)==null?void 0:C.length)>0&&h.jsxs("div",{className:"mt-3",children:[h.jsx("div",{className:"text-xs text-gray-500 mb-1",children:n("daily.tags")}),h.jsx("div",{className:"flex flex-wrap gap-2",children:_.rec.tags.slice(0,6).map(I=>h.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded-full text-xs",children:I},I))})]}),((M=_.rec)==null?void 0:M.cta)&&h.jsxs("div",{className:"mt-3 text-sm text-apple-text font-medium",children:[n("daily.cta"),"",_.rec.cta]})]},_.key)})]})]})}const yv="sk-4309d4ad184d40e398086b1c1cd00e45",jP="https://api.deepseek.com/".replace(/\/+$/,""),vv=`${jP}/v1/chat/completions`;function wv(t){if(!t)return"zh";const e=String(t).toLowerCase();return e.startsWith("zh")?"zh":e.startsWith("en")?"en":"zh"}function PP({selectionHistory:t=[],searchHistory:e=[],persona:n=null,lang:r="zh"}){var a,l;const s=JSON.stringify(((a=t==null?void 0:t.slice)==null?void 0:a.call(t,0,30))||[],null,2),i=JSON.stringify(((l=e==null?void 0:e.slice)==null?void 0:l.call(e,0,20))||[],null,2),o=n?JSON.stringify(n,null,2):"null";return r==="en"?{system:`You are a warm, supportive food companion.
Your tone should feel gentle, caring, and encouraging (never sarcastic).
Return STRICT JSON only (no Markdown, no extra text).`,user:`Use persona (may be null), selection_history, and search_history to craft today's cozy picks.
Return STRICT JSON:
{
  "title": "short headline",
  "tagline": "warm 1-2 lines, like a caring friend",
  "restaurants": [
    {
      "name": "restaurant name",
      "recommended_dish": "signature dish",
      "reason": "warm reason (<= 30 words)",
      "fit": ["tag1", "tag2"]
    }
  ]
}

persona:
${o}

selection_history (newest first):
${s}

search_history (newest first):
${i}

Rules:
- Prefer tastes inferred from persona; if missing, rely on histories.
- Must output 3-5 restaurants (no empty array).
- Each reason should reference a preference signal (tag/history) implicitly.
- If little data, give safe, popular mainstream picks.
- Avoid pressure; keep it cozy and reassuring.`}:{system:`
 JSON Markdown `,user:` persona nullselection_historysearch_history 
 JSON
{
  "title": "",
  "tagline": "1-2 ",
  "restaurants": [
    {
      "name": "",
      "recommended_dish": "",
      "reason": "30",
      "fit": ["1", "2"]
    }
  ]
}

persona
${o}

selection_history
${s}

search_history
${i}


-  persona 
- JSON 
-  3-5 restaurants 
- reason 
-  3-5 `}}async function Gp({selectionHistory:t=[],searchHistory:e=[],persona:n=null}={}){var o,a,l;const r=wv(ie.resolvedLanguage||ie.language),{system:s,user:i}=PP({selectionHistory:t,searchHistory:e,persona:n,lang:r});try{const u=await fetch(vv,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${yv}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest"},mode:"cors",credentials:"omit",body:JSON.stringify({model:"deepseek-chat",messages:[{role:"system",content:s},{role:"user",content:i}],temperature:.6,max_tokens:900})});if(!u.ok)throw new Error(`DeepSeek API : ${u.status}`);const c=((l=(a=(o=(await u.json()).choices)==null?void 0:o[0])==null?void 0:a.message)==null?void 0:l.content)||"";try{const f=c.match(/\{[\s\S]*\}/);if(f){const p=JSON.parse(f[0]),m=Array.isArray(p.restaurants)?p.restaurants:[];return{data:{title:p.title||"",tagline:p.tagline||"",restaurants:m.slice(0,5).map(v=>({name:(v==null?void 0:v.name)||"",recommended_dish:(v==null?void 0:v.recommended_dish)||"",reason:(v==null?void 0:v.reason)||"",fit:Array.isArray(v==null?void 0:v.fit)?v.fit.slice(0,3):[]}))},error:null}}}catch{}return{data:{title:"",tagline:c||"",restaurants:Jp()},error:null}}catch(u){return console.error(" AI ",u),{data:{title:"",tagline:"",restaurants:Jp()},error:u.message||""}}}function Jp(){return[{name:"",recommended_dish:"",reason:"",fit:["",""]},{name:"",recommended_dish:"",reason:"",fit:["",""]},{name:"/",recommended_dish:"/",reason:"",fit:["",""]}]}function CP({slots:t=[],lang:e="zh"}){const n=JSON.stringify(t,null,2);return e==="en"?{system:`You write warm, catchy notification copy (Baidu Maps vibe: caring, inviting, short).
Return STRICT JSON only.`,user:`Write 3 notification messages for meal moments using the provided slot + top restaurant name(s).
Return STRICT JSON:
{
  "notifications": [
    { "slot": "lunch"|"afternoon_tea"|"dinner", "title": "short catchy title (<= 14 words)", "body": "warm, inviting body (<= 28 words)" }
  ]
}

Input:
${n}

Rules:
- Keep it cozy, never pushy.
- Mention the restaurant name naturally (if provided).
- If restaurant is missing, still make it comforting.`}:{system:`
 JSON`,user:` slot  3 /
 JSON
{
  "notifications": [
    { "slot": "lunch"|"afternoon_tea"|"dinner", "title": "14", "body": "28" }
  ]
}


${n}


- 
- 
- `}}async function NP({slots:t=[]}={}){var s,i,o;const e=wv(ie.resolvedLanguage||ie.language),{system:n,user:r}=CP({slots:t,lang:e});try{const a=await fetch(vv,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${yv}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest"},mode:"cors",credentials:"omit",body:JSON.stringify({model:"deepseek-chat",messages:[{role:"system",content:n},{role:"user",content:r}],temperature:.7,max_tokens:600})});if(!a.ok)throw new Error(`DeepSeek API : ${a.status}`);const d=(((o=(i=(s=(await a.json()).choices)==null?void 0:s[0])==null?void 0:i.message)==null?void 0:o.content)||"").match(/\{[\s\S]*\}/);if(d){const c=JSON.parse(d[0]);return{data:Array.isArray(c.notifications)?c.notifications:[],error:null}}return{data:null,error:null}}catch(a){return console.error("",a),{data:null,error:a.message||""}}}const hc="59db828f842e5c5666d401e86911ce1d",RP="https://restapi.amap.com/v3/place/text";async function OP(t){if(!t||!t.trim())throw new Error("");const e=new URLSearchParams({key:hc,keywords:t.trim(),types:"",city:"",offset:"20",page:"1",extensions:"base",output:"json"});try{const n=`${RP}?${e.toString()}`;console.log("POI  URL:",n.replace(hc,"API_KEY_HIDDEN"));const r=await fetch(n,{method:"GET",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},mode:"cors",credentials:"omit"});if(!r.ok){const l=await r.text();throw console.error("HTTP :",r.status,l),new Error(`: ${r.status} ${r.statusText}`)}const s=r.headers.get("content-type")||"";if(!s.includes("application/json")){const l=await r.text();throw l.trim().startsWith("<!DOCTYPE")||l.trim().startsWith("<html")||l.trim().startsWith("<?xml")?new Error(" HTML  API "):new Error(` JSON : ${s}`)}const i=await r.text();if(i.trim().startsWith("<!DOCTYPE")||i.trim().startsWith("<html")||i.trim().startsWith("<?xml"))throw new Error(" HTML  API ");let o;try{o=JSON.parse(i)}catch(l){throw console.error("JSON :",l,":",i.substring(0,200)),new Error(" JSON ")}if(console.log("POI  API :",o),o.status!=="1")throw new Error(`API : ${o.info||o.infocode||""}`);return(o.pois||[]).map(l=>({id:l.id,name:l.name,address:l.address||l.pname+l.cityname+l.adname,location:{longitude:parseFloat(l.location.split(",")[0]),latitude:parseFloat(l.location.split(",")[1])},type:l.type,typecode:l.typecode,pname:l.pname,cityname:l.cityname,adname:l.adname,formatted_address:`${l.pname}${l.cityname}${l.adname}${l.address||""}`}))}catch(n){throw console.error("POI :",n),n.message.includes("fetch")?new Error(""):n}}function AP(t){return new Promise((e,n)=>{if(!t||!t.trim()){n(new Error(""));return}const r=`poi_callback_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,s=document.createElement("script");window[r]=o=>{if(delete window[r],document.body.removeChild(s),o.status!=="1"){n(new Error(`API : ${o.info||""}`));return}const l=(o.pois||[]).map(u=>({id:u.id,name:u.name,address:u.address||u.pname+u.cityname+u.adname,location:{longitude:parseFloat(u.location.split(",")[0]),latitude:parseFloat(u.location.split(",")[1])},type:u.type,typecode:u.typecode,pname:u.pname,cityname:u.cityname,adname:u.adname,formatted_address:`${u.pname}${u.cityname}${u.adname}${u.address||""}`}));e(l)},s.onerror=()=>{delete window[r],document.body.removeChild(s),n(new Error("JSONP "))};const i=new URLSearchParams({key:hc,keywords:t.trim(),types:"",city:"",offset:"20",page:"1",extensions:"base",output:"json"});s.src=`https://restapi.amap.com/v3/place/text?${i.toString()}&callback=${r}`,document.body.appendChild(s)})}const LP="https://restapi.amap.com/v3/place/around",Yp="59db828f842e5c5666d401e86911ce1d";async function IP({location:t,radius:e,keywords:n=[]}){if(!t||!t.latitude||!t.longitude)throw new Error("");const r=n.length>0?n.join("|"):"",s=new URLSearchParams({key:Yp,location:`${t.longitude},${t.latitude}`,types:"050000",radius:e.toString(),offset:"50",page:"1",output:"json"});r&&s.append("keywords",r);try{const i=`${LP}?${s.toString()}`;console.log(" URL:",i.replace(Yp,"API_KEY_HIDDEN"));const o=await fetch(i,{method:"GET",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},mode:"cors",credentials:"omit"});if(!o.ok){const d=await o.text();throw console.error("HTTP :",o.status,d),new Error(`: ${o.status} ${o.statusText}`)}const a=o.headers.get("content-type")||"";if(!a.includes("application/json")){const d=await o.text();throw d.trim().startsWith("<!DOCTYPE")||d.trim().startsWith("<html")||d.trim().startsWith("<?xml")?new Error(" HTML  API "):new Error(` JSON : ${a}`)}const l=await o.text();if(l.trim().startsWith("<!DOCTYPE")||l.trim().startsWith("<html")||l.trim().startsWith("<?xml"))throw new Error(" HTML  API ");let u;try{u=JSON.parse(l)}catch(d){throw console.error("JSON :",d,":",l.substring(0,200)),new Error(" JSON ")}if(console.log("API :",u),u.status!=="1")throw new Error(`API : ${u.info||u.infocode||""}`);return{pois:u.pois||[],count:parseInt(u.count||"0",10)}}catch(i){throw console.error(":",i),i.message.includes("fetch")?new Error(""):i}}function $P(t){if(!t||t.length===0)return null;const e=Math.floor(Math.random()*t.length);return t[e]}const DP="59db828f842e5c5666d401e86911ce1d";function MP(t){return new Promise((e,n)=>{const r=`amap_callback_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,s=document.createElement("script");let i=null;i=setTimeout(()=>{o(),n(new Error("JSONP "))},3e4);const o=()=>{i&&(clearTimeout(i),i=null),window[r]&&delete window[r],s.parentNode&&s.parentNode.removeChild(s)};window[r]=a=>{o(),e(a)},s.onerror=()=>{o(),n(new Error("JSONP "))};try{s.src=`${t}&callback=${r}`,document.body.appendChild(s)}catch(a){o(),n(a)}})}async function UP({location:t,radius:e,keywords:n=[]}){if(!t||!t.latitude||!t.longitude)throw new Error("");const r=n.length>0?n.join("|"):"",s=new URLSearchParams({key:DP,location:`${t.longitude},${t.latitude}`,types:"050000",radius:e.toString(),offset:"50",page:"1",output:"json"});r&&s.append("keywords",r);const i=`https://restapi.amap.com/v3/place/around?${s.toString()}`;try{const o=await MP(i);if(o.status!=="1")throw new Error(`API : ${o.info||""}`);return{pois:o.pois||[],count:parseInt(o.count||"0",10)}}catch(o){throw console.error(" (JSONP):",o),o}}async function VP(t){throw!t||!t.trim()?new Error(""):new Error("Google Maps API Key ")}async function FP({location:t,radius:e,keywords:n=[]}){throw!t||!t.latitude||!t.longitude?new Error(""):new Error("Google Maps API Key ")}const BP="https://overpass-api.de/api/interpreter",zP="https://nominatim.openstreetmap.org/search";function WP(t,e,n,r){const i=(n-t)*Math.PI/180,o=(r-e)*Math.PI/180,a=Math.sin(i/2)*Math.sin(i/2)+Math.cos(t*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2);return 6371e3*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))}async function HP(t){if(!t||!t.trim())throw new Error("");try{const e=new URLSearchParams({q:t.trim(),format:"json",addressdetails:"1",limit:"20","accept-language":"zh,en"}),n=`${zP}?${e.toString()}`;console.log("GreenStreet :",n);const r=await fetch(n,{method:"GET",headers:{Accept:"application/json","User-Agent":"WhatToEatToday/1.0 (https://what-to-eat-today.vercel.app)"}});if(!r.ok){const a=await r.text();throw console.error("HTTP :",r.status,a),new Error(`: ${r.status} ${r.statusText}`)}const s=r.headers.get("content-type")||"";if(!s.includes("application/json")){const a=await r.text();throw a.trim().startsWith("<!DOCTYPE")||a.trim().startsWith("<html")||a.trim().startsWith("<?xml")?new Error(" HTML  API "):new Error(` JSON : ${s}`)}const i=await r.text();if(i.trim().startsWith("<!DOCTYPE")||i.trim().startsWith("<html")||i.trim().startsWith("<?xml"))throw new Error(" HTML  API ");let o;try{o=JSON.parse(i)}catch(a){throw console.error("JSON :",a,":",i.substring(0,200)),new Error(" JSON ")}return console.log("GreenStreet :",o),!Array.isArray(o)||o.length===0?[]:o.map(a=>({id:a.place_id.toString(),name:a.display_name.split(",")[0]||a.display_name,address:a.display_name,location:{longitude:parseFloat(a.lon),latitude:parseFloat(a.lat)},formatted_address:a.display_name}))}catch(e){throw console.error("GreenStreet :",e),e.message.includes("fetch")?new Error(""):e}}async function KP({location:t,radius:e,keywords:n=[]}){var r,s;if(!t||!t.latitude||!t.longitude)throw new Error("");try{const i=`
      [out:json][timeout:60];
      (
        node["amenity"~"^(restaurant|cafe|fast_food|bar|pub|biergarten|food_court|ice_cream)$"](around:${e},${t.latitude},${t.longitude});
        way["amenity"~"^(restaurant|cafe|fast_food|bar|pub|biergarten|food_court|ice_cream)$"](around:${e},${t.latitude},${t.longitude});
      );
      out center;
    `.trim();console.log("GreenStreet Overpass :",i.substring(0,200)+"...");const o=await fetch(BP,{method:"POST",headers:{"Content-Type":"text/plain","User-Agent":"WhatToEatToday/1.0 (https://what-to-eat-today.vercel.app)"},body:i});if(!o.ok){const c=await o.text();console.error("Overpass API :",c);let f=`: ${o.status} ${o.statusText}`;try{const p=JSON.parse(c);p.error&&(f=p.error)}catch{if(c&&c.length>0){const m=c.substring(0,200);(m.includes("ODbL")||m.includes("openstreetmap.org")||m.trim().startsWith("<!DOCTYPE")||m.trim().startsWith("<html"))&&(f="Overpass API ")}}throw new Error(f)}const a=o.headers.get("content-type")||"";if(!a.includes("application/json")){const c=await o.text();throw c.trim().startsWith("<!DOCTYPE")||c.trim().startsWith("<html")||c.trim().startsWith("<?xml")?new Error(" HTML  API "):new Error(` JSON : ${a}`)}const l=await o.text();if(l.trim().startsWith("<!DOCTYPE")||l.trim().startsWith("<html")||l.trim().startsWith("<?xml"))throw new Error(" HTML  API ");let u;try{u=JSON.parse(l)}catch(c){throw console.error("JSON :",c,":",l.substring(0,200)),new Error(" JSON ")}if(console.log("GreenStreet Overpass :",{elementsCount:(r=u.elements)==null?void 0:r.length,elements:(s=u.elements)==null?void 0:s.slice(0,3)}),!u.elements||u.elements.length===0)return console.warn("GreenStreet "),{pois:[],count:0};const d=u.elements.slice(0,50).map(c=>{var w,g,y,x,E,_,k,j,T,N,K,F,V,C,M,I,X,R,$,H;let f,p;if(c.type==="node"?(f=c.lat,p=c.lon):c.type==="way"?(f=(w=c.center)==null?void 0:w.lat,p=(g=c.center)==null?void 0:g.lon):(f=((y=c.center)==null?void 0:y.lat)||c.lat,p=((x=c.center)==null?void 0:x.lon)||c.lon),!f||!p)return console.warn(":",c.type,c.id),null;const m=WP(t.latitude,t.longitude,f,p);if(n.length>0){const A=(((E=c.tags)==null?void 0:E.name)||"").toLowerCase(),q=(((_=c.tags)==null?void 0:_["name:en"])||"").toLowerCase(),be=(((k=c.tags)==null?void 0:k.cuisine)||"").toLowerCase();if(!n.map(ae=>ae.toLowerCase()).some(ae=>A.includes(ae)||q.includes(ae)||be.includes(ae)))return null}const v=[];(j=c.tags)!=null&&j["addr:housenumber"]&&v.push(c.tags["addr:housenumber"]),(T=c.tags)!=null&&T["addr:street"]&&v.push(c.tags["addr:street"]),(N=c.tags)!=null&&N["addr:city"]&&v.push(c.tags["addr:city"]),(K=c.tags)!=null&&K["addr:country"]&&v.push(c.tags["addr:country"]);const b=v.length>0?v.join(" "):((F=c.tags)==null?void 0:F["addr:full"])||((V=c.tags)==null?void 0:V["addr:road"])||"";return{id:`${c.type}-${c.id}`,name:((C=c.tags)==null?void 0:C.name)||((M=c.tags)==null?void 0:M["name:en"])||((I=c.tags)==null?void 0:I.alt_name)||"",type:((X=c.tags)==null?void 0:X.amenity)||"restaurant",address:b,distance:Math.round(m),tel:((R=c.tags)==null?void 0:R.phone)||(($=c.tags)==null?void 0:$["contact:phone"])||((H=c.tags)==null?void 0:H["contact:mobile"])||"",rating:null,location:`${p},${f}`,biz_ext:{rating:null}}}).filter(Boolean).sort((c,f)=>c.distance-f.distance);return console.log("GreenStreet :",{totalElements:u.elements.length,filteredPois:d.length,sample:d[0]}),{pois:d,count:d.length}}catch(i){throw console.error(" GreenStreet :",i),i}}async function qP(t,e="amap"){if(e==="google")return await VP(t);if(e==="greenstreet")return await HP(t);try{return await OP(t)}catch(n){return console.warn("Fetch  JSONP:",n),await AP(t)}}async function Id({location:t,radius:e,keywords:n=[]},r="amap"){if(r==="google")return await FP({location:t,radius:e,keywords:n});if(r==="greenstreet")return await KP({location:t,radius:e,keywords:n});try{return await IP({location:t,radius:e,keywords:n})}catch(s){return console.warn("Fetch  JSONP:",s),await UP({location:t,radius:e,keywords:n})}}const GP=["radial-gradient(circle at 20% 20%, rgba(147, 197, 253, 0.22) 0%, transparent 35%)","radial-gradient(circle at 80% 10%, rgba(196, 181, 253, 0.22) 0%, transparent 32%)","radial-gradient(circle at 50% 80%, rgba(253, 224, 71, 0.18) 0%, transparent 32%)"].join(",");function JP({onBack:t}){var y;const{user:e}=vr(),{t:n}=Qe(),[r,s]=S.useState(!0),[i,o]=S.useState(!1),[a,l]=S.useState(""),[u,d]=S.useState({title:"",tagline:"",restaurants:[]}),[c,f]=S.useState(null),[p,m]=S.useState({location:null,radius:2e3,mapService:"amap"}),[v,b]=S.useState({}),w=S.useMemo(()=>({title:n("recommendation.fallbackTitle"),tagline:n("recommendation.fallbackTagline"),restaurants:[{name:n("recommendation.fallbackRestaurant"),recommended_dish:n("recommendation.fallbackDish"),reason:n("recommendation.fallbackReason")}]}),[n]);S.useEffect(()=>{st.requestPermission().then(()=>{st.scheduleDailyRecommendations([],{onClickUrl:"#/recommendation"})}),g()},[e==null?void 0:e.id]),S.useEffect(()=>{if(u&&u.title){const x=[{slot:"lunch",title:u.title,why:u.tagline,cta:n("recommendation.cta")},{slot:"afternoon_tea",title:u.title,why:u.tagline,cta:n("recommendation.cta")},{slot:"dinner",title:u.title,why:u.tagline,cta:n("recommendation.cta")}];st.scheduleDailyRecommendations(x,{onClickUrl:"#/recommendation",buildContent:(E,_)=>{const k=v==null?void 0:v[E.key];return{title:(k==null?void 0:k.title)||n(`daily.slots.${E.key}.notifyTitle`,{defaultValue:n("daily.notify.defaultTitle")}),body:(k==null?void 0:k.body)||(_==null?void 0:_.why)||u.tagline||n("daily.notify.defaultBody"),url:"#/recommendation"}}})}},[u,n,v]);const g=async()=>{var x,E,_,k,j,T,N;l(""),s(!0),o(!0);try{const K=e?ze.getUserSelectionHistory(e.id,30):Promise.resolve({data:[]}),F=e?ze.getUserSearchHistory(e.id,20):Promise.resolve({data:[]}),[{data:V},{data:C}]=await Promise.all([K,F]),M=Array.isArray(C)?(x=C[0])==null?void 0:x.search_criteria:null,I=YP(M);I!=null&&I.location&&m(I);let X=null;try{X=(await ha.generateUserPersona(V||[])).data||null,f(X)}catch{}const{data:R,error:$}=await ha.generateDailyRecommendations({selectionHistory:V||[],searchHistory:C||[]}),H=I==null?void 0:I.location;if(H&&((E=R==null?void 0:R.slots)!=null&&E.length)){const A=await XP(R.slots,I),{data:q,error:be}=await Gp({selectionHistory:V||[],searchHistory:C||[],persona:X}),Ce={title:(q==null?void 0:q.title)||w.title,tagline:(q==null?void 0:q.tagline)||w.tagline,restaurants:A.length?A:(q==null?void 0:q.restaurants)||w.restaurants};d(Ce);const Ae={lunch:((_=A==null?void 0:A[0])==null?void 0:_.name)||"",afternoon_tea:((k=A==null?void 0:A[1])==null?void 0:k.name)||((j=A==null?void 0:A[0])==null?void 0:j.name)||"",dinner:((T=A==null?void 0:A[2])==null?void 0:T.name)||((N=A==null?void 0:A[0])==null?void 0:N.name)||""},ae=[{slot:"lunch",restaurant:Ae.lunch},{slot:"afternoon_tea",restaurant:Ae.afternoon_tea},{slot:"dinner",restaurant:Ae.dinner}],{data:Ke}=await NP({slots:ae});if(Array.isArray(Ke)&&Ke.length){const Gt={};Ke.forEach(D=>{D!=null&&D.slot&&(Gt[D.slot]={title:D.title,body:D.body})}),b(Gt)}$&&l($),be&&l(be)}else{const{data:A,error:q}=await Gp({selectionHistory:V||[],searchHistory:C||[],persona:X});q?(d(w),l(q)):d(A||w),H||l(n("recommendation.needRecentSearch"))}}catch(K){console.error(" AI ",K),d(w),l(K.message||n("recommendation.error"))}finally{s(!1),o(!1)}};return h.jsxs("div",{className:"safe-area-container relative overflow-hidden",children:[h.jsxs("div",{className:"absolute inset-0 -z-10",children:[h.jsx(P.div,{className:"absolute inset-0 opacity-80 blur-3xl",style:{background:GP},animate:{scale:[1,1.04,1],rotate:[0,2,0]},transition:{duration:18,repeat:1/0,ease:"easeInOut"}}),h.jsx("div",{className:"absolute inset-0 bg-white/40 backdrop-blur-3xl"})]}),h.jsx("div",{className:"sticky top-0 z-20 px-4 sm:px-6 pt-4 safe-top",children:h.jsxs("div",{className:"max-w-3xl mx-auto flex items-center gap-3",children:[h.jsx(P.button,{onClick:t,whileTap:{scale:.95},className:"min-w-[44px] min-h-[44px] w-11 h-11 flex items-center justify-center rounded-full bg-white/70 backdrop-blur border border-white/60 shadow-sm text-blue-500","aria-label":"back",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("div",{className:"text-2xl font-semibold tracking-tight text-apple-text",children:n("recommendation.title")}),h.jsx("div",{className:"text-xs text-gray-500 mt-1",children:n("recommendation.subtitle")})]}),h.jsx(P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:g,disabled:i,className:"px-4 py-2 rounded-full bg-apple-text text-white text-sm font-medium shadow-md disabled:opacity-60",children:n(i?"recommendation.refreshing":"recommendation.refresh")})]})}),h.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 pb-16 pt-6 space-y-4",children:[a&&h.jsx(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-2xl bg-red-50/80 border border-red-100 text-sm text-red-700 backdrop-blur",children:n("recommendation.errorWithMsg",{error:a})}),h.jsxs(P.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeInOut"},className:"relative overflow-hidden rounded-[28px] bg-white/55 backdrop-blur-xl border border-white/60 shadow-[0_24px_60px_rgba(0,0,0,0.06)]",children:[h.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[h.jsx("div",{className:"absolute -top-20 -left-10 w-64 h-64 bg-white/40 blur-3xl"}),h.jsx("div",{className:"absolute -bottom-24 -right-8 w-72 h-72 bg-blue-200/30 blur-3xl"})]}),h.jsxs("div",{className:"relative p-6 sm:p-8 space-y-4",children:[h.jsx("div",{className:"text-xs uppercase tracking-[0.28em] text-gray-500",children:n("recommendation.label")}),h.jsx("div",{className:"text-3xl sm:text-4xl font-semibold text-apple-text leading-tight",children:r?n("recommendation.loadingTitle"):u.title||w.title}),h.jsx("div",{className:"text-sm sm:text-base text-gray-700 leading-relaxed max-w-2xl",children:r?n("recommendation.loadingTagline"):u.tagline||w.tagline}),((y=c==null?void 0:c.tags)==null?void 0:y.length)>0&&h.jsx("div",{className:"flex flex-wrap gap-2",children:c.tags.slice(0,6).map(x=>h.jsx("span",{className:"px-3 py-1 rounded-full bg-white/70 border border-white/60 text-xs text-apple-text",children:x},x))})]})]}),h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:h.jsx(Pt,{children:(r?w.restaurants:u.restaurants||w.restaurants).map((x,E)=>h.jsxs(P.div,{initial:{opacity:0,y:16,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:12},transition:{duration:.45,ease:"easeInOut",delay:E*.05},className:"relative overflow-hidden rounded-2xl bg-white/60 border border-white/60 backdrop-blur-xl shadow-lg p-5 space-y-3",children:[h.jsxs("div",{className:"flex items-start justify-between gap-3",children:[h.jsx("div",{className:"text-base font-semibold text-apple-text leading-tight",children:x.name}),h.jsx("span",{className:"text-xs text-gray-400",children:E+1})]}),x.recommended_dish&&h.jsxs("div",{className:"text-sm text-blue-600 font-medium",children:[n("recommendation.dish")," ",x.recommended_dish]}),x.reason&&h.jsx("div",{className:"text-sm text-gray-700 leading-relaxed",children:x.reason}),h.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[h.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400"}),n("recommendation.tip")]})]},`${x.name}-${E}`))})})]})]})}function YP(t){const e=t==null?void 0:t.address,n=(t==null?void 0:t.mapService)||"amap",r=Number((t==null?void 0:t.distance)||2e3);if(!e||typeof e!="string")return{location:null,radius:r,mapService:n};const s=e.trim().match(/^(-?\d+(\.\d+)?),\s*(-?\d+(\.\d+)?)$/);if(!s)return{location:null,radius:r,mapService:n};const i=parseFloat(s[1]),o=parseFloat(s[3]);return Number.isNaN(i)||Number.isNaN(o)?{location:null,radius:r,mapService:n}:{location:{latitude:i,longitude:o},radius:r,mapService:n}}async function XP(t,e){const{location:n,radius:r,mapService:s}=e||{};if(!n)return[];const i=[];for(const a of t.slice(0,3)){const l=Array.isArray(a.keywords)?a.keywords.filter(Boolean).slice(0,3):[];try{const u=await Id({location:n,radius:r||2e3,keywords:l},s),c=(Array.isArray(u==null?void 0:u.pois)?u.pois:[]).slice(0,2).map(f=>({name:f.name,recommended_dish:(a.tags||[]).find(p=>String(p).includes(""))?"":"",reason:a.why||"",fit:Array.isArray(a.tags)?a.tags.slice(0,3):[],address:f.address||"",distance:f.distance||""}));i.push(...c)}catch{}}const o=new Set;return i.filter(a=>{const l=a.name;return!l||o.has(l)?!1:(o.add(l),!0)}).slice(0,6)}function Xp(t=6){const e="ABCDEFGHJKMNPQRSTUVWXYZ23456789";let n="";for(let r=0;r<t;r+=1){const s=Math.floor(Math.random()*e.length);n+=e[s]}return n}const dt={async createRoom({hostId:t}){try{const{data:{user:e},error:n}=await ne.auth.getUser();if(n||!e)throw console.error("[roomService] :",n),new Error("");if(t!==e.id)throw console.error("[roomService] hostId :",{hostId:t,currentUserId:e.id}),new Error("hostId ");if(console.log("[roomService] ID:",e.id),console.log("[roomService]  hostId:",t),console.log("[roomService] hostId :",t===e.id),t!==e.id)throw console.error("[roomService] hostId :",{hostId:t,currentUserId:e.id}),new Error("hostId ID");const r=Xp();let s=0,i=r;for(;s<10;)try{const{data:u,error:d}=await ne.from("rooms").select("code").eq("code",i).maybeSingle();if(d||!u)break;i=Xp(),s++}catch(u){console.warn("[roomService]  code :",u);break}const o={code:i,host_id:e.id,status:"waiting"};console.log("[roomService] :",o);try{const{data:u,error:d}=await ne.rpc("create_room",{p_host_id:e.id,p_code:i,p_status:"waiting"});if(!d&&u&&u.length>0)return console.log("[roomService]  RPC "),{data:u[0],error:null};d&&console.warn("[roomService] RPC  INSERT:",d)}catch(u){console.warn("[roomService] RPC  INSERT:",u)}const{data:a,error:l}=await ne.from("rooms").insert(o).select("*").single();if(l)throw console.error("[roomService]  - :",{message:l.message,details:l.details,hint:l.hint,code:l.code,hostId:t,finalCode:i}),l;return{data:a,error:null}}catch(e){return console.error("[roomService] :",e),{data:null,error:e}}},async joinRoom({userId:t,code:e}){try{const n=(e||"").trim().toUpperCase(),{data:r,error:s}=await ne.from("rooms").select("*").eq("code",n).single();if(s)throw s;const{data:i,error:o}=await ne.from("room_members").upsert({room_id:r.id,user_id:t,joined_at:new Date().toISOString()},{onConflict:"room_id,user_id"}).select("*").single();if(o)throw o;return{data:{room:r,member:i},error:null}}catch(n){return console.error("[roomService] :",n),{data:null,error:n}}},async updatePreferences({roomId:t,userId:e,preferences:n}){try{const{data:r,error:s}=await ne.from("room_members").upsert({room_id:t,user_id:e,preferences:n,joined_at:new Date().toISOString()},{onConflict:"room_id,user_id"}).select("*").single();if(s)throw s;return{data:r,error:null}}catch(r){return console.error("[roomService] :",r),{data:null,error:r}}},async getRoomMembers(t){try{const{data:e,error:n}=await ne.from("room_members").select("*").eq("room_id",t);if(n)throw n;return{data:e,error:null}}catch(e){return console.error("[roomService] :",e),{data:null,error:e}}},async updateRoomStatus({roomId:t,status:e,patch:n={}}){try{const r={status:e,...n};try{const{data:s,error:i}=await ne.rpc("update_room_status",{p_room_id:t,p_status:e,p_final_restaurant_name:n.final_restaurant_name||null,p_decision_reason:n.decision_reason||null,p_current_candidates:n.current_candidates||null});if(i)throw i;return{data:Array.isArray(s)&&s.length>0?s[0]:s,error:null}}catch(s){console.warn("[roomService] RPC  UPDATE:",s);const{data:i,error:o}=await ne.from("rooms").update(r).eq("id",t).select("*").single();if(o)throw console.error("[roomService]  - :",{message:o.message,details:o.details,hint:o.hint,code:o.code,updateData:r,roomId:t}),o;return{data:i,error:null}}}catch(r){return console.error("[roomService] :",r),{data:null,error:r}}},async updateRoomCandidates({roomId:t,candidates:e}){try{try{const{data:n,error:r}=await ne.rpc("update_room_candidates",{p_room_id:t,p_candidates:e});if(r)throw r;return{data:Array.isArray(n)&&n.length>0?n[0]:n,error:null}}catch(n){console.warn("[roomService] RPC  UPDATE:",n);const{data:r,error:s}=await ne.from("rooms").update({current_candidates:e}).eq("id",t).select("*").single();if(s)throw s;return{data:r,error:null}}}catch(n){return console.error("[roomService] :",n),{data:null,error:n}}},subscribeRoom(t,e){const n=ne.channel(`room-${t}`).on("postgres_changes",{event:"*",schema:"public",table:"rooms",filter:`id=eq.${t}`},r=>{try{typeof e=="function"&&e(r)}catch(s){console.error("[roomService] :",s)}}).subscribe();return{unsubscribe(){try{ne.removeChannel(n)}catch(r){console.error("[roomService] :",r)}}}}};function xv({restaurants:t,duration:e=1500,onComplete:n}){const{t:r}=Qe(),[s,i]=S.useState(0),[o,a]=S.useState(!0);if(S.useEffect(()=>{if(!t||t.length===0){n&&n();return}a(!0),i(0);const u=Math.max(30,e/Math.max(t.length,30)),d=setInterval(()=>{i(f=>{let p;do p=Math.floor(Math.random()*t.length);while(p===f&&t.length>1);return p})},u),c=setTimeout(()=>{clearInterval(d),a(!1);const f=Math.floor(Math.random()*t.length);i(f),n&&setTimeout(n,200)},e);return()=>{clearInterval(d),clearTimeout(c)}},[t,e,n]),!t||t.length===0)return h.jsx("div",{className:"text-center py-8",children:h.jsx("div",{className:"text-lg text-apple-text",children:r("actions.searching")})});const l=t[s];return h.jsxs("div",{className:"relative h-28 sm:h-32 flex items-center justify-center overflow-hidden",children:[h.jsx(Pt,{mode:"wait",children:h.jsxs(P.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:-50,opacity:0},transition:{duration:o?.15:.3,ease:o?"easeOut":"easeInOut"},className:"text-center px-4",children:[h.jsx("div",{className:"text-xl sm:text-2xl font-bold text-apple-text break-words",children:(l==null?void 0:l.name)||"..."}),(l==null?void 0:l.type)&&h.jsx("div",{className:"text-xs sm:text-sm text-gray-500 mt-1",children:l.type})]},s)}),h.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[h.jsx("div",{className:"absolute top-0 left-0 right-0 h-12 sm:h-16 bg-gradient-to-b from-white to-transparent"}),h.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-12 sm:h-16 bg-gradient-to-t from-white to-transparent"})]})]})}const Jt="06bfd081af4b459697ee8b40a420a365",QP="https://devapi.qweather.com/v7/weather/now";function ZP(t){if(!t||t.code!=="200"||!t.now)return{code:(t==null?void 0:t.code)||"fallback",text:"",category:"unknown",temp:null,raw:t||null};const e=t.now.text||"",n=t.now.temp?Number(t.now.temp):null,r=t.now.icon||"";let s="unknown";const i=e.toLowerCase();return i.includes("")||i.includes("shower")||i.includes("rain")||["300","301","302","303","304","305","306","307","308","309","310","311","312","313"].includes(r)?s="rainy":n!=null&&n>=30?s="hot":n!=null&&n<=5?s="cold":i.includes("")||i.includes("sun")||r==="100"?s="sunny":(i.includes("")||i.includes("")||i.includes("cloud"))&&(s="cloudy"),{code:t.code,text:e,category:s,temp:n,raw:t}}async function eC({latitude:t,longitude:e}){if(!t||!e||!Jt)return console.warn("[WeatherService]  QWeather API Key fallback "),{code:"fallback",text:"",category:"unknown",temp:null,raw:null};const n=new URLSearchParams({key:Jt,location:`${e},${t}`}),r=`${QP}?${n.toString()}`,s=`${Jt.substring(0,4)}****${Jt.substring(Jt.length-4)}`,i=r.replace(Jt,s);console.log("[WeatherService]  API:",{url:i,location:`${e},${t}`,keyLength:(Jt==null?void 0:Jt.length)||0});try{const o=await fetch(r,{method:"GET"});if(!o.ok)return console.warn("[WeatherService]  2xx :",{status:o.status,statusText:o.statusText,url:i,location:`${e},${t}`}),{code:String(o.status),text:"",category:"unknown",temp:null,raw:null};const a=await o.json();return ZP(a)}catch(o){return console.warn("[WeatherService]  fallback",o),{code:"error",text:"",category:"unknown",temp:null,raw:null}}}const tC="sk-4309d4ad184d40e398086b1c1cd00e45",nC="https://api.deepseek.com/".replace(/\/+$/,""),rC=`${nC}/v1/chat/completions`;function sC(t=[]){const e=Array.isArray(t)?t.slice(0,10):[],n={};e.forEach(s=>{const i=(s.restaurant_category||s.category||"").trim();i&&(n[i]=(n[i]||0)+1)});let r=null;if(e.length>=3){const[s,i,o]=e,a=s.restaurant_category||s.category,l=i.restaurant_category||i.category,u=o.restaurant_category||o.category;a&&a===l&&l===u&&(r=a)}return{recent:e,categoryCount:n,repeatedCategory:r}}function iC(t=[],e=[]){const n={};t.forEach(o=>{const a=(o.category||"").trim();a&&(n[a]=(n[a]||0)+1)});const r={};e.forEach(o=>{const a=(o.restaurant_category||o.category||"").trim();a&&(r[a]=(r[a]||0)+1)});const s=[];return new Set([...Object.keys(n),...Object.keys(r)]).forEach(o=>{const a=n[o]||0,l=r[o]||0,u=a+l;if(u===0)return;const d=a/u;(a>=3&&l===0||d>.7&&a>=2)&&s.push({category:o,viewCount:a,selectCount:l,rejectionRate:Math.round(d*100)})}),s.sort((o,a)=>a.rejectionRate-o.rejectionRate),{dislikedCategories:s.slice(0,5),viewCountByCategory:n,selectCountByCategory:r}}function oC(t=[]){return t.slice(0,30).map(e=>{var n;return{id:e.id||e.uid||e.poiId||e.name,name:e.name||"",category:e.type||e.category||"",distance:e.distance!=null?Number(e.distance):null,address:e.address||"",in_mall:/|||mall|plaza/i.test(`${e.type||""} ${e.name||""} ${e.address||""}`),rating:((n=e.biz_ext)==null?void 0:n.rating)||e.rating||null}})}function aC({weather:t,mood:e,selectionAnalysis:n,viewAnalysis:r,candidates:s,groupPreferences:i=null,hasHistory:o=!0}){var p;const l={weather:{text:(t==null?void 0:t.text)||"",category:(t==null?void 0:t.category)||"unknown",temp:t==null?void 0:t.temp},mood:null,selection_analysis:o?{recent:n.recent,category_count:n.categoryCount,repeated_category:n.repeatedCategory}:null,view_analysis:o&&((p=r==null?void 0:r.dislikedCategories)==null?void 0:p.length)>0?{disliked_categories:r.dislikedCategories.map(m=>({category:m.category,rejection_rate:m.rejectionRate,view_count:m.viewCount,select_count:m.selectCount}))}:null,group_preferences:i,candidates:s},u=JSON.stringify(l,null,2),d=`"/"""

 JSON Markdown `,f=`JSON  candidates ""

 JSON
{
  "best_restaurant_id": " id  name",
  "best_restaurant_name": "",
  "decision_reason": "20 TA"
}


- category = "rainy"
  - in_mall = true 
  - /distance 
- category = "hot"
  - // category/"/////"
${o?`-  3  categoryselection_analysis.repeated_category 
  - "/"
- **** view_analysis.disliked_categories 
  - ********
  -  5 ""`:"- "}
-  group_preferences

 JSON
${u}`;return{system:d,user:f}}async function lC(t){var n,r,s;try{const i=new AbortController,o=setTimeout(()=>i.abort(),8e3),a=await fetch(rC,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${tC}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({model:"deepseek-chat",messages:[{role:"system",content:t.system},{role:"user",content:t.user}],temperature:.5,max_tokens:600}),signal:i.signal});if(clearTimeout(o),!a.ok)throw new Error(`DeepSeek API : ${a.status}`);const l=await a.json(),d=(((s=(r=(n=l==null?void 0:l.choices)==null?void 0:n[0])==null?void 0:r.message)==null?void 0:s.content)||"").match(/\{[\s\S]*\}/);return d?{data:JSON.parse(d[0]),error:null}:{data:null,error:"AI  JSON"}}catch(i){return i.name==="AbortError"?(console.warn("[RecommendationEngine] DeepSeek API 8 Fallback"),{data:null,error:"TIMEOUT"}):(console.error("[RecommendationEngine]  DeepSeek ",i),{data:null,error:i.message||" DeepSeek "})}}function uC(t=[],e=[]){if(!Array.isArray(t)||t.length===0)return null;const n=new Set(e.map(o=>(o.category||o).toLowerCase()));let r=t;const s=t.filter(o=>!n.has((o.category||"").toLowerCase()));return s.length>0&&(r=s),[...r].sort((o,a)=>{const l=o.distance!=null?Number(o.distance):1/0,u=a.distance!=null?Number(a.distance):1/0,d=o.rating!=null?Number(o.rating):0,c=a.rating!=null?Number(a.rating):0;return l!==u?l-u:c-d})[0]}async function bv({userId:t,location:e,mood:n,candidates:r,groupPreferences:s=null}){if(!Array.isArray(r)||r.length===0)return{bestRestaurantId:null,bestRestaurantName:"",decision_reason:"",rankedCandidates:[],error:""};const[i,o,a]=await Promise.all([e?eC(e):Promise.resolve({category:"unknown"}),t?ze.getUserSelectionHistory(t,10):Promise.resolve({data:[]}),t?ze.getUserViewHistory(t,30):Promise.resolve({data:[]})]),l=o.data||[],u=a.data||[],d=Array.isArray(l)&&l.length>0||Array.isArray(u)&&u.length>0,c=sC(l),f=iC(u,l),p=oC(r);let m=p;if(f.dislikedCategories.length>0){const x=new Set(f.dislikedCategories.map(E=>E.category.toLowerCase()));m=p.map(E=>({...E,is_disliked_category:x.has((E.category||"").toLowerCase())}))}const v=aC({weather:i,mood:n,selectionAnalysis:c,viewAnalysis:f,candidates:m,groupPreferences:s,hasHistory:d}),{data:b,error:w}=await lC(v);let g=null,y="";if(!w&&b){const x=b.best_restaurant_id||b.best_restaurant_name;y=b.decision_reason||"",x&&(g=p.find(E=>E.id===x||E.name===x)||p[0]||null)}return g||(g=uC(p,f.dislikedCategories.map(x=>x.category)),y||(w==="TIMEOUT"?y="AI ":y=(i==null?void 0:i.category)==="rainy"?"":"")),{bestRestaurantId:(g==null?void 0:g.id)||(g==null?void 0:g.name)||null,bestRestaurantName:(g==null?void 0:g.name)||"",decision_reason:y,rankedCandidates:p,error:w||null}}function cC({onBack:t}){const{t:e}=Qe(),{user:n}=vr(),[r,s]=S.useState("idle"),[i,o]=S.useState(null),[a,l]=S.useState(""),[u,d]=S.useState(""),[c,f]=S.useState("waiting"),[p,m]=S.useState(!1),[v,b]=S.useState(""),[w,g]=S.useState(null),[y,x]=S.useState(!1),[E,_]=S.useState(0),[k,j]=S.useState([]),[T,N]=S.useState(null),[K,F]=S.useState(""),[V,C]=S.useState(null),[M,I]=S.useState([]),[X,R]=S.useState([]),$=!!i&&n&&i.host_id===n.id;S.useEffect(()=>{if(!$||!(i!=null&&i.id)||i.current_candidates)return;(async()=>{try{if(!navigator.geolocation){console.warn("");return}navigator.geolocation.getCurrentPosition(async W=>{const{latitude:U,longitude:Z}=W.coords;C({latitude:U,longitude:Z});try{const se=await Id({location:{latitude:U,longitude:Z},radius:2e3,keywords:[]},"amap"),fe=(Array.isArray(se==null?void 0:se.pois)?se.pois:[]).slice(0,10);fe.length>0&&(await dt.updateRoomCandidates({roomId:i.id,candidates:fe}),j(fe))}catch(se){console.error(":",se)}},W=>{console.warn(":",W)})}catch(W){console.error(":",W)}})()},[$,i==null?void 0:i.id,i==null?void 0:i.current_candidates]),S.useEffect(()=>{if(!(i!=null&&i.id))return;const L=dt.subscribeRoom(i.id,W=>{const U=W.new;console.log("[MultiplayerRoomPage] Realtime :",{status:U==null?void 0:U.status,final_restaurant_name:U==null?void 0:U.final_restaurant_name,event:W.eventType,isHost:$?"Host":"Member"}),U!=null&&U.status&&(console.log("[MultiplayerRoomPage] Realtime: ",U.status),f(U.status)),U!=null&&U.current_candidates&&Array.isArray(U.current_candidates)&&j(U.current_candidates),(U==null?void 0:U.status)==="rolling"&&requestAnimationFrame(()=>{x(!0),_(Z=>Z+1)}),(U==null?void 0:U.status)==="finished"&&(x(!1),console.log("[MultiplayerRoomPage] Realtime:  finished ",{final_restaurant_name:U.final_restaurant_name,decision_reason:U.decision_reason,isHost:$?"Host":"Member",current_candidates_count:Array.isArray(U.current_candidates)?U.current_candidates.length:0}),setTimeout(()=>{var Ee;const Z=U.final_restaurant_name||"",se=U.decision_reason||"";if(console.log("[MultiplayerRoomPage] Realtime: :",{restaurantName:Z,reason:se,isHost:$?"Host":"Member",allRestaurantsCount:k.length}),Z){const fe=U.current_candidates||k,te=Array.isArray(fe)?fe.find(Te=>Te.name===Z):null,Se=(te==null?void 0:te.address)||((Ee=te==null?void 0:te.location)==null?void 0:Ee.address)||"";console.log("[MultiplayerRoomPage] Realtime: ",{restaurantName:Z,restaurantAddress:Se,reason:se,isHost:$?"Host":"Member",candidatesCount:Array.isArray(fe)?fe.length:0,foundCandidate:!!te}),N({name:Z,address:Se}),F(se),f("finished"),console.log("[MultiplayerRoomPage] Realtime:  ",{restaurantName:Z,isHost:$?"Host":"Member"})}else console.warn("[MultiplayerRoomPage] Realtime:   finished ",{newData:U})},2100))});return g(L),()=>{L==null||L.unsubscribe()}},[i==null?void 0:i.id]),S.useEffect(()=>{$||!(i!=null&&i.current_candidates)||Array.isArray(i.current_candidates)&&i.current_candidates.length>0&&j(i.current_candidates)},[i==null?void 0:i.current_candidates,$]),S.useEffect(()=>{if(!(i!=null&&i.id))return;const L=async()=>{const{data:U}=await dt.getRoomMembers(i.id);U&&R(U)};L();const W=setInterval(L,3e3);return()=>clearInterval(W)},[i==null?void 0:i.id]);const H=async()=>{if(!n){b(e("multiplayer.needLogin")||"");return}m(!0),b("");try{console.log("[MultiplayerRoomPage] :",{user:n,userId:n==null?void 0:n.id,userEmail:n==null?void 0:n.email,hasUser:!!n,userKeys:n?Object.keys(n):[]});let L=n;if(!L||!L.id){console.warn("[MultiplayerRoomPage] useAuth  user  supabase ");const{supabase:Z}=await uv(async()=>{const{supabase:fe}=await Promise.resolve().then(()=>WT);return{supabase:fe}},void 0),{data:{user:se},error:Ee}=await Z.auth.getUser();if(Ee)throw console.error("[MultiplayerRoomPage]  supabase :",Ee),new Error("");if(!se)throw new Error("");L=se,console.log("[MultiplayerRoomPage]  supabase :",L.id)}if(!L||!L.id)throw new Error("");const{data:W,error:U}=await dt.createRoom({hostId:L.id});if(U)throw U;o(W),l(W.code),f(W.status||"waiting"),s("host")}catch(L){console.error("",L),b(L.message||"")}finally{m(!1)}},A=async()=>{if(!n){b(e("multiplayer.needLogin")||"");return}if(!u.trim()){b(e("multiplayer.enterCode")||"");return}m(!0),b("");try{const{data:L,error:W}=await dt.joinRoom({userId:n.id,code:u});if(W)throw W;o(L.room),l(L.room.code),f(L.room.status||"waiting"),s("join")}catch(L){console.error("",L),b(L.message||"")}finally{m(!1)}},q=async()=>{var L,W;if(!i||!n){console.warn("[MultiplayerRoomPage] ");return}if(c==="rolling"||c==="finished"){console.log("[MultiplayerRoomPage] ");return}try{console.log("[MultiplayerRoomPage] ...",{isHost:$,userId:n.id}),m(!0),b(""),!k.length&&i.current_candidates&&(console.log("[MultiplayerRoomPage] :",i.current_candidates.length),j(i.current_candidates)),console.log("[MultiplayerRoomPage]  rolling...");const U=await dt.updateRoomStatus({roomId:i.id,status:"rolling"});if(U.error)throw console.error("[MultiplayerRoomPage]  rolling :",U.error),U.error;console.log("[MultiplayerRoomPage]  rolling");let Z=i.current_candidates||[];if((!Array.isArray(Z)||Z.length===0)&&(Z=k),console.log("[MultiplayerRoomPage] :",Z.length),Z.length===0){const pe="";console.error("[MultiplayerRoomPage]",pe),b(pe),await dt.updateRoomStatus({roomId:i.id,status:"waiting"});return}console.log("[MultiplayerRoomPage] ...");const{data:se}=await dt.getRoomMembers(i.id),Ee=Array.isArray(se)?se.map(pe=>pe.preferences).filter(Boolean):[];console.log("[MultiplayerRoomPage] :",Ee);const fe=Ee.length>0?{tags:Array.from(new Set(Ee.flatMap(pe=>Array.isArray(pe==null?void 0:pe.tags)?pe.tags:[]).filter(Boolean)))}:null;console.log("[MultiplayerRoomPage] :",fe),console.log("[MultiplayerRoomPage]  AI ...");const te=await bv({userId:n.id,location:V,mood:null,candidates:Z,groupPreferences:fe});if(!te)throw new Error("AI ");const Se=te.bestRestaurantName||"",Te=te.decision_reason||"";if(console.log("[MultiplayerRoomPage] AI :",{bestName:Se,aiReason:Te}),!Se)throw new Error("AI ");const De=Z.find(pe=>pe.name===Se)||Z[0],Mi=(De==null?void 0:De.address)||((L=De==null?void 0:De.location)==null?void 0:L.address)||"";console.log("[MultiplayerRoomPage] :",{bestName:Se,restaurantAddress:Mi}),console.log("[MultiplayerRoomPage] ...",{bestName:Se,aiReason:Te,isHost:$});try{const pe=await dt.updateRoomStatus({roomId:i.id,status:"finished",patch:{final_restaurant_name:Se,decision_reason:Te}});if(pe.error){if(!$){console.log("[MultiplayerRoomPage]  Realtime "),await dt.updateRoomStatus({roomId:i.id,status:"waiting"});return}throw pe.error}if(console.log("[MultiplayerRoomPage] ",pe.data),pe.data){const ys=pe.data.final_restaurant_name||Se,$d=pe.data.decision_reason||Te;ys&&setTimeout(()=>{console.log("[MultiplayerRoomPage] ",{restaurantName:ys,reason:$d,restaurantAddress:Mi,isHost:$}),N({name:ys,address:Mi}),F($d),f("finished")},2100)}}catch(pe){if(!$&&((W=pe.message)!=null&&W.includes("Only the room host"))){console.log("[MultiplayerRoomPage]  Realtime ");try{await dt.updateRoomStatus({roomId:i.id,status:"waiting"})}catch(ys){console.error("[MultiplayerRoomPage] :",ys)}return}throw pe}}catch(U){console.error("[MultiplayerRoomPage] :",U);const Z=U.message||"";if(b(Z),i!=null&&i.id)try{await dt.updateRoomStatus({roomId:i.id,status:"waiting"})}catch(se){console.error("[MultiplayerRoomPage] :",se)}}finally{m(!1)}},be=()=>h.jsx("div",{className:"sticky top-0 z-20 px-4 sm:px-6 pt-4 pb-2 safe-top bg-gradient-to-b from-white/80 to-white/40 backdrop-blur-xl border-b border-gray-100/50",children:h.jsxs("div",{className:"max-w-2xl mx-auto flex items-center gap-3",children:[h.jsx(P.button,{onClick:t,whileTap:{scale:.92},className:"min-w-[44px] min-h-[44px] w-11 h-11 flex items-center justify-center rounded-full bg-white/90 backdrop-blur-sm border border-gray-200/60 shadow-sm text-gray-700 hover:bg-gray-50 transition-colors","aria-label":"back",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("div",{className:"text-xl font-semibold tracking-tight text-gray-900",children:e("multiplayer.title")}),h.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:e("multiplayer.subtitle")})]})]})}),Ce=()=>h.jsxs("div",{className:"space-y-5",children:[h.jsx(P.button,{whileHover:{scale:1.01},whileTap:{scale:.98},onClick:H,disabled:p,className:"w-full min-h-[56px] py-4 px-6 rounded-2xl bg-gray-900 text-white font-semibold text-base shadow-lg shadow-gray-900/20 disabled:opacity-50 disabled:cursor-not-allowed active:scale-[0.98] transition-all",children:p?"...":e("multiplayer.createRoom")}),h.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[h.jsx("span",{className:"flex-1 h-px bg-gray-200"}),h.jsx("span",{children:e("multiplayer.orJoin")}),h.jsx("span",{className:"flex-1 h-px bg-gray-200"})]}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("input",{value:u,onChange:L=>d(L.target.value.toUpperCase()),maxLength:6,className:"flex-1 rounded-2xl border border-gray-200 bg-white px-4 py-3.5 text-base font-medium tracking-wider outline-none focus:ring-2 focus:ring-gray-900/20 focus:border-gray-300 transition-all",placeholder:e("multiplayer.enterCode")}),h.jsx(P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:A,disabled:p||!u.trim(),className:"min-w-[80px] rounded-2xl bg-gray-900 text-white font-semibold px-5 disabled:opacity-40 disabled:cursor-not-allowed",children:e("multiplayer.join")})]})]}),Ae=()=>h.jsxs("div",{className:"space-y-4",children:[h.jsxs(P.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"bg-white/80 backdrop-blur-xl rounded-3xl p-5 border border-gray-100/60 shadow-sm",children:[h.jsx("div",{className:"text-xs font-medium text-gray-500 mb-3 uppercase tracking-wide",children:e("multiplayer.roomCode")}),h.jsx("div",{className:"text-3xl font-mono tracking-[0.4em] text-gray-900 mb-2 font-semibold",children:a||"------"}),h.jsx("div",{className:"text-xs text-gray-500 leading-relaxed",children:e("multiplayer.shareTip")})]}),X.length>0&&h.jsxs(P.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"bg-white/80 backdrop-blur-xl rounded-3xl p-4 border border-gray-100/60 shadow-sm",children:[h.jsx("div",{className:"text-xs font-medium text-gray-500 mb-3 uppercase tracking-wide",children:e("multiplayer.participants")}),h.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:X.map(L=>{var W;return h.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white text-xs font-semibold shadow-sm",title:L.user_id,children:((W=L.user_id)==null?void 0:W.slice(0,2).toUpperCase())||"?"},L.user_id)})})]})]}),ae=()=>h.jsx(Pt,{children:y&&h.jsxs(P.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},exit:{opacity:0,y:12},className:"bg-white/80 backdrop-blur-xl rounded-3xl p-6 shadow-lg border border-gray-100/60",children:[h.jsx("div",{className:"text-center mb-4 text-sm text-gray-600 font-medium",children:e("multiplayer.rolling")}),h.jsx(xv,{restaurants:k.map(L=>({name:L.name,type:L.type||""})),duration:2e3,onComplete:()=>{console.log("[MultiplayerRoomPage] ")}},E)]})}),Ke=()=>(console.log("[MultiplayerRoomPage] renderResultModal :",{status:c,finalRestaurant:T,hasName:!!(T!=null&&T.name),decisionReason:K,shouldShow:!!(T!=null&&T.name)}),T!=null&&T.name?(console.log("[MultiplayerRoomPage] renderResultModal: "),h.jsx(Pt,{children:h.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:L=>{L.target,L.currentTarget},children:h.jsxs(P.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white/95 backdrop-blur-xl rounded-3xl p-6 sm:p-8 max-w-md w-full shadow-2xl border border-gray-200/60 relative",children:[h.jsx("button",{onClick:()=>{},className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"",children:h.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),h.jsxs("div",{className:"text-center space-y-4",children:[h.jsx(P.div,{initial:{scale:0},animate:{scale:[0,1.2,1]},transition:{delay:.2,type:"spring",damping:10},className:"text-6xl mb-2",children:""}),h.jsx(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-sm text-gray-500 font-medium",children:e("multiplayer.finalTitle")}),h.jsx(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-2xl sm:text-3xl font-bold text-gray-900 break-words leading-tight px-2",children:T.name}),K&&h.jsxs(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:"mt-4 pt-4 border-t border-gray-200",children:[h.jsx("div",{className:"text-xs text-gray-500 mb-2 font-medium",children:e("multiplayer.aiReasonPrefix")}),h.jsx("div",{className:"text-sm text-gray-700 leading-relaxed px-2",children:K})]}),X.length>0&&h.jsxs(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6},className:"mt-4 pt-4 border-t border-gray-200",children:[h.jsxs("div",{className:"text-xs text-gray-500 mb-2 font-medium",children:[e("multiplayer.participants")," (",X.length,")"]}),h.jsx("div",{className:"flex items-center justify-center gap-2 flex-wrap",children:X.map(L=>{var W;return h.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white text-xs font-semibold shadow-sm",title:L.user_id,children:((W=L.user_id)==null?void 0:W.slice(0,2).toUpperCase())||"?"},L.user_id)})})]}),h.jsxs(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.7},className:"mt-6 flex gap-3",children:[h.jsx(P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{T!=null&&T.address&&window.open(`https://uri.amap.com/navigation?to=${encodeURIComponent(T.address)}`,"_blank")},className:"flex-1 rounded-2xl bg-gray-900 text-white font-semibold py-3 px-4 text-sm",children:""}),h.jsx(P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{N(null),F("")},className:"flex-1 rounded-2xl bg-gray-100 text-gray-700 font-semibold py-3 px-4 text-sm",children:""})]})]})]})})})):(console.log("[MultiplayerRoomPage] renderResultModal: "),null)),Gt=()=>null,D=()=>h.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"mt-8 pt-6 border-t border-gray-200/60",children:h.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-3xl p-5 border border-gray-100/60",children:[h.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-4",children:e("multiplayer.rulesTitle")}),h.jsxs("div",{className:"space-y-3 text-xs text-gray-600 leading-relaxed",children:[h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("span",{className:"text-gray-400 font-mono",children:"1."}),h.jsx("span",{children:e("multiplayer.step1")})]}),h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("span",{className:"text-gray-400 font-mono",children:"2."}),h.jsx("span",{children:e("multiplayer.step2")})]}),h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("span",{className:"text-gray-400 font-mono",children:"3."}),h.jsx("span",{children:e("multiplayer.step3")})]}),h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("span",{className:"text-gray-400 font-mono",children:"4."}),h.jsx("span",{children:e("multiplayer.step4")})]}),h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("span",{className:"text-gray-400 font-mono",children:"5."}),h.jsx("span",{children:e("multiplayer.step5")})]}),h.jsx("div",{className:"mt-4 pt-3 border-t border-gray-100/60 text-gray-500 italic",children:e("multiplayer.rulesNote")})]})]})});return h.jsxs("div",{className:"safe-area-container bg-gradient-to-b from-gray-50 to-white flex flex-col relative overflow-hidden min-h-screen",children:[be(),h.jsx("main",{className:"flex-1 px-4 sm:px-6 pb-8 pt-4 overflow-y-auto",children:h.jsxs("div",{className:"max-w-2xl mx-auto space-y-5",children:[v&&h.jsx(P.div,{initial:{opacity:0,y:-8},animate:{opacity:1,y:0},className:"bg-red-50/80 backdrop-blur-sm border border-red-200/60 text-red-700 rounded-2xl px-4 py-3 text-sm",children:v}),!i&&Ce(),i&&h.jsxs("div",{className:"space-y-5",children:[Ae(),c==="waiting"&&h.jsxs(P.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"space-y-4",children:[h.jsx("div",{className:"text-sm font-semibold text-gray-900",children:e("multiplayer.selectPreferences")}),h.jsx(dC,{selected:M,onChange:L=>{I(L),i!=null&&i.id&&n&&dt.updatePreferences({roomId:i.id,userId:n.id,preferences:{tags:L}})}}),h.jsx("div",{className:"text-xs text-gray-500 leading-relaxed",children:e("multiplayer.waitingTip")})]}),c==="voting"&&h.jsx("div",{className:"text-sm text-gray-500 text-center py-2",children:e("multiplayer.votingTip")}),(c==="waiting"||c==="voting")&&h.jsx(P.button,{whileHover:{scale:1.01},whileTap:{scale:.98},disabled:p||c==="rolling"||c==="finished",onClick:q,className:"w-full min-h-[56px] rounded-2xl bg-gray-900 text-white font-semibold text-base shadow-lg shadow-gray-900/20 disabled:opacity-50 disabled:cursor-not-allowed active:scale-[0.98] transition-all",children:p?"...":c==="rolling"?e("multiplayer.rolling"):e("multiplayer.togetherSelect")||""}),ae(),c==="finished"&&Gt()]}),D()]})}),Ke()]})}function dC({selected:t=[],onChange:e}){const{t:n}=Qe(),r=[{id:"not_spicy",label:n("multiplayer.notSpicy")},{id:"fast_food",label:n("multiplayer.fastFood")},{id:"good_environment",label:n("multiplayer.goodEnvironment")},{id:"group_friendly",label:n("multiplayer.groupFriendly")},{id:"light_food",label:n("multiplayer.lightFood")},{id:"budget_friendly",label:n("multiplayer.budgetFriendly")}],s=i=>{const o=t.includes(i)?t.filter(a=>a!==i):[...t,i];e(o)};return h.jsx("div",{className:"flex flex-wrap gap-2.5",children:r.map(i=>{const o=t.includes(i.id);return h.jsx(P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>s(i.id),className:`px-4 py-2.5 rounded-full text-sm font-medium transition-all ${o?"bg-gray-900 text-white shadow-md":"bg-white/80 backdrop-blur-sm text-gray-700 border border-gray-200/60 hover:bg-gray-50"}`,children:i.label},i.id)})})}function hC({onLocationChange:t,mapService:e="amap"}){const{t:n}=Qe(),[r,s]=S.useState("auto"),[i,o]=S.useState(!1),[a,l]=S.useState(null),[u,d]=S.useState(""),[c,f]=S.useState(null),[p,m]=S.useState([]),[v,b]=S.useState(!1),[w,g]=S.useState(!1),y=S.useRef(null),x=S.useRef(null),E=()=>{if(!navigator.geolocation){f(n("location.errors.notSupported")),setTimeout(()=>f(null),3e3);return}o(!0),f(null),navigator.geolocation.getCurrentPosition(async T=>{const{latitude:N,longitude:K}=T.coords,F={latitude:N,longitude:K,formatted_address:n("location.currentLocation"),source:"auto"};t(F),l(n("location.currentLocation")),o(!1)},T=>{console.error(":",T);let N=n("location.errors.failed");switch(T.code){case T.PERMISSION_DENIED:N=n("location.errors.permissionDenied");break;case T.POSITION_UNAVAILABLE:N=n("location.errors.unavailable");break;case T.TIMEOUT:N=n("location.errors.timeout");break}f(N),setTimeout(()=>f(null),5e3),o(!1)})},_=async T=>{if(!T||!T.trim()){m([]),b(!1);return}g(!0),f(null);try{const N=await qP(T,e);m(N),b(N.length>0),g(!1)}catch(N){console.error("POI :",N),f(N.message||n("location.errors.searchFailed")),m([]),b(!1),g(!1)}};S.useEffect(()=>{if(r!=="manual")return;if(y.current&&clearTimeout(y.current),!u.trim()){m([]),b(!1);return}const T=u;return y.current=setTimeout(()=>{_(T)},500),()=>{y.current&&clearTimeout(y.current)}},[u,r]);const k=T=>{var V,C;const N=((V=T.location)==null?void 0:V.latitude)||(typeof T.location=="string"?parseFloat(T.location.split(",")[1]):0),K=((C=T.location)==null?void 0:C.longitude)||(typeof T.location=="string"?parseFloat(T.location.split(",")[0]):0),F={latitude:N,longitude:K,formatted_address:T.formatted_address||T.address||T.name,name:T.name,source:"manual"};t(F),l(T.name),d(T.name),b(!1),m([])},j=T=>{s(T),f(null),l(null),d(""),m([]),b(!1)};return h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex gap-2 bg-gray-50 rounded-xl p-1",children:[h.jsx("button",{onClick:()=>j("auto"),disabled:i,className:`flex-1 min-h-[44px] px-4 py-2 rounded-lg font-medium text-sm transition-all touch-manipulation ${r==="auto"?"bg-white text-apple-text shadow-sm":"text-gray-600 hover:text-apple-text"} disabled:opacity-50`,children:h.jsxs("div",{className:"flex items-center justify-center gap-2",children:[h.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),h.jsx("span",{children:n("location.auto")})]})}),h.jsx("button",{onClick:()=>j("manual"),disabled:i,className:`flex-1 min-h-[44px] px-4 py-2 rounded-lg font-medium text-sm transition-all touch-manipulation ${r==="manual"?"bg-white text-apple-text shadow-sm":"text-gray-600 hover:text-apple-text"} disabled:opacity-50`,children:h.jsxs("div",{className:"flex items-center justify-center gap-2",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),h.jsx("span",{children:n("location.manual")})]})})]}),h.jsx(Pt,{mode:"wait",children:r==="auto"?h.jsx(P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2},children:h.jsx(P.button,{whileHover:i?{}:{scale:1.02},whileTap:i?{}:{scale:.98},onClick:E,disabled:i,className:"w-full min-h-[44px] flex items-center justify-center gap-3 px-6 py-4 bg-gray-50 hover:bg-gray-100 active:bg-gray-200 rounded-xl text-apple-text transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed touch-manipulation",children:i?h.jsxs(h.Fragment,{children:[h.jsx(P.div,{className:"w-5 h-5 border-2 border-apple-text border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),h.jsx("span",{className:"text-base font-medium",children:n("location.getting")})]}):h.jsxs(h.Fragment,{children:[h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),h.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),h.jsx("span",{className:"text-base font-medium",children:a||n("location.clickToGet")})]})})},"auto"):h.jsxs(P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"space-y-3",children:[h.jsxs("div",{className:"relative",children:[h.jsxs("div",{className:"relative",children:[h.jsx("input",{ref:x,type:"text",value:u,onChange:T=>{d(T.target.value),f(null),T.target.value.trim()&&b(!0)},onFocus:()=>{p.length>0&&b(!0)},onBlur:()=>{setTimeout(()=>b(!1),200)},placeholder:n("location.placeholder"),className:"w-full min-h-[44px] px-4 py-3 pr-10 bg-gray-50 border border-gray-200 rounded-xl text-apple-text placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-apple-text focus:border-transparent touch-manipulation"}),w&&h.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:h.jsx(P.div,{className:"w-5 h-5 border-2 border-apple-text border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})})]}),h.jsx(Pt,{children:v&&p.length>0&&h.jsx(P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute z-50 w-full mt-2 bg-white rounded-xl shadow-lg border border-gray-200 max-h-64 overflow-y-auto",children:p.map((T,N)=>h.jsxs("button",{onClick:()=>k(T),className:"w-full text-left px-4 py-3 hover:bg-gray-50 active:bg-gray-100 transition-colors border-b border-gray-100 last:border-b-0 touch-manipulation",children:[h.jsx("div",{className:"font-medium text-apple-text mb-1",children:T.name}),h.jsx("div",{className:"text-sm text-gray-500 line-clamp-1",children:T.formatted_address||T.address})]},T.id||N))})})]}),a&&h.jsxs(P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"flex items-center gap-2 px-4 py-2 bg-green-50 border border-green-200 rounded-xl text-sm text-green-700",children:[h.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),h.jsx("span",{children:n("location.selected",{name:a})})]})]},"manual")}),h.jsx(Pt,{children:c&&h.jsx(P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},className:"bg-red-50 border border-red-200 text-red-600 rounded-xl p-3 text-sm",children:c})})]})}const fC={amap:{id:"amap",name:"",description:"",icon:""},greenstreet:{id:"greenstreet",name:"GreenStreet",description:"",icon:"",free:!0}};function pC({value:t,onChange:e}){const{t:n}=Qe(),[r,s]=S.useState(t||"amap"),i=o=>{s(o),e&&e(o)};return h.jsxs("div",{className:"space-y-3",children:[h.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:Object.values(fC).map(o=>h.jsx(P.button,{onClick:()=>i(o.id),whileHover:{scale:1.02},whileTap:{scale:.98},className:`min-h-[44px] px-3 sm:px-4 py-3 rounded-xl border-2 transition-all touch-manipulation active:scale-95 ${r===o.id?"border-apple-text bg-apple-text text-white shadow-md":"border-gray-200 bg-white text-apple-text hover:border-gray-300"}`,children:h.jsxs("div",{className:"flex flex-col items-center gap-1",children:[h.jsx("span",{className:"text-2xl",children:o.icon}),h.jsx("span",{className:"font-medium text-sm",children:n(`map.${o.id}.name`)}),h.jsx("span",{className:`text-xs ${r===o.id?"text-white/80":"text-gray-500"}`,children:n(`map.${o.id}.desc`)}),o.free&&h.jsx("span",{className:`text-xs font-bold ${r===o.id?"text-white":"text-green-600"}`,children:n("map.free")})]})},o.id))}),r==="greenstreet"&&h.jsx(P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"bg-green-50 border border-green-200 rounded-xl p-3 text-sm text-green-800",children:h.jsxs("div",{className:"flex items-start gap-2",children:[h.jsx("svg",{className:"w-5 h-5 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),h.jsxs("div",{children:[h.jsx("div",{className:"font-medium mb-1",children:n("map.tipTitle")}),h.jsxs("div",{className:"text-xs text-green-700",children:[n("map.tipBody"),h.jsx("span",{className:"block mt-1 font-medium",children:n("map.tipBody2")})]})]})]})})]})}const Qp={:["","","",""],:["","","","",""],:["","",""],:["","","",""],:["","",""]},mC={:{icon:"",hint:""},:{icon:"",hint:""},:{icon:"",hint:""},:{icon:"",hint:""},:{icon:"",hint:""}};function gC({selectedFoods:t,onSelectionChange:e}){const{t:n}=Qe(),[r,s]=S.useState(""),i=o=>{t.includes(o)?e(t.filter(a=>a!==o)):e([...t,o])};return h.jsxs("div",{children:[h.jsx("div",{className:"mb-4",children:h.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1 -mx-1 px-1 touch-pan-x",children:Object.keys(Qp).map(o=>{const a=r===o,l=mC[o]||{icon:""};return h.jsx(P.button,{onClick:()=>s(o),whileTap:{scale:.98},className:`flex-shrink-0 min-h-[44px] px-4 py-2 rounded-[18px] border transition-all active:scale-95 ${a?"bg-apple-text text-white border-apple-text shadow-sm":"bg-white text-apple-text border-gray-200 hover:border-gray-300"}`,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-lg",children:l.icon}),h.jsxs("div",{className:"text-left leading-tight",children:[h.jsx("div",{className:"text-sm font-semibold",children:n(`foods.categories.${o}`)}),h.jsx("div",{className:`text-[11px] ${a?"text-white/80":"text-gray-500"}`,children:n(`foods.hints.${o}`)})]})]})},o)})})}),h.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:Qp[r].map((o,a)=>{const l=t.includes(o);return h.jsx(P.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3,delay:a*.05},whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>i(o),className:`min-h-[52px] px-4 py-3 rounded-[18px] text-base font-semibold transition-all duration-200 touch-manipulation active:scale-95 border ${l?"bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-md border-white/0":"bg-white text-apple-text hover:bg-gray-50 border-gray-200"}`,children:h.jsxs("div",{className:"flex items-center justify-between gap-2",children:[h.jsx("span",{className:"truncate",children:n(`foods.cuisines.${o}`)}),h.jsx("span",{className:`text-sm ${l?"text-white/90":"text-gray-400"}`,children:l?"":"+"})]})},o)})}),t.length>0&&h.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[h.jsx("p",{className:"text-sm text-gray-600 mb-2",children:n("foods.selected")}),h.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(o=>h.jsx(P.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"px-3 py-1.5 bg-apple-text text-white rounded-full text-sm",children:n(`foods.cuisines.${o}`)},o))})]})]})}function yC({value:t,onChange:e}){const i=l=>{e(Number(l.target.value))},o=l=>l>=1e3?`${(l/1e3).toFixed(1)}km`:`${l}m`,a=(t-500)/4500*100;return h.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[h.jsxs("div",{className:"relative py-2 -my-2",children:[h.jsx("div",{className:"h-2 sm:h-2.5 bg-gray-200 rounded-full",children:h.jsx(P.div,{className:"h-2 sm:h-2.5 bg-apple-text rounded-full",initial:{width:0},animate:{width:`${a}%`},transition:{duration:.3}})}),h.jsx("input",{type:"range",min:500,max:5e3,step:100,value:t,onChange:i,className:"absolute top-0 left-0 w-full h-8 opacity-0 cursor-pointer touch-manipulation",style:{WebkitAppearance:"none"}}),h.jsx(P.div,{className:"absolute top-1/2 -translate-y-1/2 w-8 h-8 sm:w-6 sm:h-6 bg-apple-text rounded-full shadow-lg pointer-events-none touch-manipulation",style:{left:`calc(${a}% - 16px)`},whileHover:{scale:1.2},whileTap:{scale:.9}})]}),h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:o(500)}),h.jsx("span",{className:"text-base sm:text-lg font-semibold text-apple-text",children:o(t)}),h.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:o(5e3)})]})]})}function vC(t,e="amap"){if(!t||!t.location)return null;let n,r;if(typeof t.location=="string"){const[s,i]=t.location.split(",");r=parseFloat(s),n=parseFloat(i)}else typeof t.location=="object"&&(t.location.latitude&&t.location.longitude?(n=parseFloat(t.location.latitude),r=parseFloat(t.location.longitude)):t.location.lat&&t.location.lng&&(n=parseFloat(t.location.lat),r=parseFloat(t.location.lng)));return!n||!r||isNaN(n)||isNaN(r)?null:e==="greenstreet"?`https://www.google.com/maps/dir/?api=1&destination=${n},${r}`:`https://uri.amap.com/navigation?to=${`${r},${n}`}&toName=${encodeURIComponent(t.name||"")}&mode=car&policy=1&src=mypage&coordinate=gaode&callnative=1`}async function wC(t){if(!t)return!1;let e=t.name||"";if(t.address&&(e+=e?`
${t.address}`:t.address),t.location){let n="";typeof t.location=="string"?n=t.location:typeof t.location=="object"&&(t.location.latitude&&t.location.longitude?n=`${t.location.latitude},${t.location.longitude}`:t.location.lat&&t.location.lng&&(n=`${t.location.lat},${t.location.lng}`)),n&&(e+=`
: ${n}`)}try{if(navigator.clipboard&&navigator.clipboard.writeText)return await navigator.clipboard.writeText(e),!0;{const n=document.createElement("textarea");n.value=e,n.style.position="fixed",n.style.opacity="0",document.body.appendChild(n),n.select();const r=document.execCommand("copy");return document.body.removeChild(n),r}}catch(n){return console.error(":",n),!1}}function xC({isOpen:t,restaurant:e,onClose:n,onChangeRestaurant:r,onConfirmSelection:s,mapService:i="amap",aiReason:o=""}){const[a,l]=S.useState(!1),{t:u}=Qe();if(!t||!e)return null;const d=p=>{if(!p||p==="0"||p===0)return null;const m=typeof p=="string"?parseFloat(p):p;return isNaN(m)?null:h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("span",{className:"text-gray-500 text-sm",children:u("result.rating")}),h.jsx("div",{className:"flex items-center gap-0.5",children:[1,2,3,4,5].map(v=>h.jsx("svg",{className:`w-4 h-4 ${v<=Math.round(m)?"text-yellow-400 fill-current":"text-gray-300"}`,viewBox:"0 0 20 20",fill:"currentColor",children:h.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},v))}),h.jsx("span",{className:"text-apple-text font-medium ml-1",children:m.toFixed(1)})]})},c=vC(e,i),f=async()=>{await wC(e)&&(l(!0),setTimeout(()=>l(!1),2e3))};return h.jsx(Pt,{children:t&&h.jsxs(h.Fragment,{children:[h.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n,className:"fixed inset-0 bg-black bg-opacity-30 backdrop-blur-sm z-40"}),h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6",children:h.jsx(P.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"max-w-md w-full relative max-h-[90vh] overflow-y-auto",onClick:p=>p.stopPropagation(),children:h.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-apple p-6 sm:p-8 shadow-2xl border border-white/20 relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-white/30 to-transparent rounded-full blur-2xl -translate-y-16 translate-x-16"}),h.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-white/20 to-transparent rounded-full blur-xl translate-y-12 -translate-x-12"}),h.jsx("button",{onClick:n,className:"absolute top-4 right-4 min-w-[44px] min-h-[44px] w-11 h-11 flex items-center justify-center rounded-full bg-white/60 backdrop-blur-sm hover:bg-white/80 active:bg-white/90 transition-colors z-10 touch-manipulation",children:h.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),h.jsxs("div",{className:"text-center relative z-10",children:[h.jsx(P.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.2,type:"spring",stiffness:200},className:"text-5xl sm:text-6xl mb-3 sm:mb-4",children:""}),h.jsx(P.h2,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-xl sm:text-2xl font-semibold text-apple-text mb-2",children:u("result.goEat")}),h.jsx(P.h3,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-2xl sm:text-3xl font-bold text-apple-text mb-4 sm:mb-6 px-2 break-words",children:e.name}),o&&h.jsx(P.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{delay:.45},className:"mb-4 sm:mb-5 text-sm text-gray-600 px-3",children:h.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full bg-blue-50/80 px-3 py-1 text-xs text-blue-700 border border-blue-100",children:[h.jsx("span",{children:"AI"}),h.jsx("span",{className:"w-1 h-1 rounded-full bg-blue-400"}),h.jsx("span",{children:o})]})}),h.jsxs(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:"space-y-3 sm:space-y-4 text-left bg-white/60 backdrop-blur-sm rounded-xl p-4 sm:p-5 mb-4 sm:mb-6 border border-white/40",children:[e.rating&&d(e.rating),e.distance>0&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),h.jsx("span",{className:"text-gray-500 text-sm",children:u("result.distance")}),h.jsx("span",{className:"text-apple-text font-medium",children:e.distance>1e3?`${(e.distance/1e3).toFixed(1)}km`:`${e.distance}m`})]}),e.address&&h.jsxs("div",{className:"flex items-start gap-2",children:[h.jsxs("svg",{className:"w-4 h-4 text-gray-500 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),h.jsxs("div",{className:"flex-1",children:[h.jsx("span",{className:"text-gray-500 text-sm",children:u("result.address")}),h.jsx("span",{className:"text-apple-text text-sm leading-relaxed",children:e.address})]})]})]}),h.jsxs(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6},className:"space-y-3",children:[h.jsxs("div",{className:"flex gap-3",children:[h.jsx(P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:r,className:"flex-1 min-h-[44px] py-3 px-4 sm:px-6 bg-white/80 backdrop-blur-sm text-apple-text rounded-xl font-medium hover:bg-white active:bg-white/90 transition-colors border border-white/40 shadow-sm touch-manipulation",children:u("actions.changeOne")}),c?h.jsx(P.a,{whileHover:{scale:1.02},whileTap:{scale:.98},href:c,target:"_blank",rel:"noopener noreferrer",onClick:()=>{s&&s(e)},className:"flex-1 min-h-[44px] py-3 px-4 sm:px-6 bg-apple-text text-white rounded-xl font-medium hover:bg-opacity-90 active:bg-opacity-80 transition-colors shadow-lg touch-manipulation flex items-center justify-center",children:u("actions.navigate")}):h.jsx(P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:f,className:"flex-1 min-h-[44px] py-3 px-4 sm:px-6 bg-apple-text text-white rounded-xl font-medium hover:bg-opacity-90 active:bg-opacity-80 transition-colors shadow-lg touch-manipulation flex items-center justify-center",children:u(a?"actions.copied":"actions.copyAddress")})]}),s&&h.jsx(P.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{s(e),n()},className:"w-full min-h-[44px] py-3 px-4 sm:px-6 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl font-medium hover:opacity-90 active:opacity-80 transition-opacity shadow-lg touch-manipulation",children:u("actions.confirmThis")})]})]})]})})})]})})}function bC({onRetry:t}){const{t:e}=Qe(),n=e("empty.messages",{returnObjects:!0}),r=Array.isArray(n)?n:[],s=r[Math.floor(Math.random()*Math.max(r.length,1))]||{};return h.jsxs(P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,type:"spring"},className:"bg-white rounded-apple p-6 sm:p-8 text-center shadow-sm",children:[h.jsx(P.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"text-6xl sm:text-7xl mb-3 sm:mb-4",children:s.emoji}),h.jsx(P.h3,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-xl sm:text-2xl font-bold text-apple-text mb-2",children:s.title}),h.jsx(P.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-base sm:text-lg text-gray-600 mb-3",children:s.subtitle}),h.jsx(P.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:"text-sm text-gray-500 mb-5 sm:mb-6 leading-relaxed px-2",children:s.description}),t&&h.jsx(P.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"min-h-[44px] px-6 py-3 bg-apple-text text-white rounded-xl font-medium hover:bg-opacity-90 transition-colors touch-manipulation",children:e("empty.retry")})]})}function SC({selectedFoods:t,range:e,location:n,mapService:r="amap"}){const{user:s}=vr(),{t:i}=Qe(),[o,a]=S.useState(!1),[l,u]=S.useState(!1),[d,c]=S.useState([]),[f,p]=S.useState(null),[m,v]=S.useState(null),[b,w]=S.useState(""),[g,y]=S.useState(!1),[x,E]=S.useState(!1),[_,k]=S.useState(null),[j,T]=S.useState(0),N=C=>{var I;let M=null;if(C.location)if(typeof C.location=="string"){const[X,R]=C.location.split(",");X&&R&&(M={lng:X,lat:R})}else typeof C.location=="object"&&(C.location.latitude&&C.location.longitude?M={latitude:C.location.latitude,longitude:C.location.longitude}:C.location.lng&&C.location.lat&&(M=C.location));return{name:C.name||i("select.unknownRestaurant"),type:C.type||"",address:C.address||"",distance:parseInt(C.distance||"0",10),tel:C.tel||"",rating:((I=C.biz_ext)==null?void 0:I.rating)||C.rating||null,location:M}},K=async()=>{if(!n){k(i("select.needLocation")),setTimeout(()=>k(null),3e3);return}a(!0),k(null),p(null),u(!1),E(!1),v(null),w("");try{const M=(await Id({location:n,radius:e,keywords:t},r)).pois;if(M.length===0){a(!1),E(!0);return}if(x&&E(!1),c(M),s)try{await ze.saveSearchHistory(s.id,{address:n.address||`${n.lat},${n.lng}`,categories:t,distance:e,mapService:r})}catch(I){console.error(":",I)}try{const I=n&&n.latitude&&n.longitude?{latitude:n.latitude,longitude:n.longitude}:n&&n.lat&&n.lng?{latitude:n.lat,longitude:n.lng}:null,{bestRestaurantId:X,decision_reason:R}=await bv({userId:(s==null?void 0:s.id)||null,location:I,mood:null,candidates:M});X&&v(X),R&&w(R)}catch(I){console.warn("AI :",I)}a(!1),u(!0),T(I=>I+1)}catch(C){console.error(":",C),k(C.message||i("select.fetchFailed")),a(!1)}},F=async()=>{if(d.length>0){let C=null;if(m&&(C=d.find(M=>M.id===m||M.uid===m||M.poiId===m||M.name===m)||null),C||(C=$P(d)),C){const M=N(C);if(p(M),u(!1),a(!1),y(!0),s)try{await ze.saveViewHistory(s.id,{restaurant_name:M.name,category:M.type||t[0]||i("select.unknown"),address:M.address||"",rating:M.rating||null,distance:M.distance||0}),console.log(" ")}catch(I){console.error(" :",I)}}}},V=()=>{d.length>0&&(y(!1),p(null),T(C=>C+1),u(!0))};return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"space-y-3",children:[x&&h.jsx(bC,{onRetry:()=>{E(!1),K()}}),l&&d.length>0&&h.jsxs(P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-white rounded-apple p-4 sm:p-6 shadow-sm",children:[h.jsx("div",{className:"text-center mb-3 sm:mb-4",children:h.jsx("div",{className:"text-base sm:text-lg font-medium text-apple-text",children:i("actions.pickingForYou")})}),h.jsx(xv,{restaurants:d.map(C=>({name:C.name||i("select.unknownRestaurant"),type:C.type||""})),duration:1500,onComplete:F},j)]}),h.jsxs(P.button,{onClick:K,disabled:o||l||x,className:"w-full min-h-[56px] py-4 sm:py-6 bg-apple-text text-white text-lg sm:text-xl font-semibold rounded-apple shadow-lg relative overflow-hidden disabled:opacity-50 disabled:cursor-not-allowed touch-manipulation",whileHover:!o&&!l&&!x?{scale:1.02}:{},whileTap:!o&&!l&&!x?{scale:.98}:{},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:[!o&&!l&&h.jsx(P.div,{className:"absolute inset-0 bg-white opacity-0",animate:{opacity:[0,.1,0],scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),o&&!l?h.jsxs("span",{className:"relative z-10 flex items-center justify-center gap-2",children:[h.jsx(P.div,{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),i("actions.searching")]}):l?h.jsx("span",{className:"relative z-10",children:i("actions.picking")}):h.jsx("span",{className:"relative z-10",children:i("actions.helpMeChoose")})]}),h.jsx(Pt,{children:_&&h.jsx(P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},className:"bg-red-50 border border-red-200 text-red-600 rounded-xl p-4 text-sm",children:_})})]}),h.jsx(xC,{isOpen:g,restaurant:f,aiReason:b,onClose:()=>{y(!1),p(null)},onChangeRestaurant:V,onConfirmSelection:async C=>{if(s&&C)try{console.log(" :",{userId:s.id,restaurantName:C.name,category:C.type||t[0]||i("select.unknown"),address:C.address||""});const{data:M,error:I}=await ze.saveSelectionResult(s.id,{restaurant_name:C.name,category:C.type||t[0]||i("select.unknown"),address:C.address||""});I?(console.error(" :",I),alert(`: ${I.message||I}`)):(console.log(" :",M),window.dispatchEvent(new CustomEvent("selectionSaved",{detail:{restaurantName:C.name}})))}catch(M){console.error(" :",M),alert(`: ${M.message||M}`)}else console.warn(" ",{user:!!s,restaurant:!!C})},mapService:r})]})}function _C(t){if(!t)return"zh";const e=String(t).toLowerCase();return e.startsWith("zh")?"zh":e.startsWith("en")?"en":"zh"}function kC({className:t=""}){const{i18n:e,t:n}=Qe(),r=_C(e.resolvedLanguage||e.language),s=r==="zh"?"en":"zh";return h.jsxs(P.button,{type:"button",onClick:()=>e.changeLanguage(s),whileTap:{scale:.98},className:["min-h-[36px] px-3 py-1.5 rounded-full","bg-white/70 hover:bg-white/90 active:bg-white","border border-white/60 backdrop-blur-sm shadow-sm","text-xs font-semibold tracking-wide text-apple-text","transition-colors select-none",t].join(" "),"aria-label":`Switch language to ${s==="zh"?"Chinese":"English"}`,children:[h.jsx("span",{className:r==="zh"?"opacity-100":"opacity-50",children:n("lang.zh")}),h.jsx("span",{className:"mx-1 opacity-40",children:"/"}),h.jsx("span",{className:r==="en"?"opacity-100":"opacity-50",children:n("lang.en")})]})}function EC(){const{user:t,guestMode:e,loading:n}=vr(),{t:r,i18n:s}=Qe(),[i,o]=S.useState(()=>typeof window<"u"&&window.location.hash==="#/recommendation"?"recommendation":"home"),[a,l]=S.useState("amap"),[u,d]=S.useState([]),[c,f]=S.useState(2e3),[p,m]=S.useState(null);return S.useEffect(()=>{const v=()=>{window.location.hash==="#/recommendation"&&o("recommendation")};return window.addEventListener("hashchange",v),v(),()=>window.removeEventListener("hashchange",v)},[]),S.useEffect(()=>{st.requestPermission()},[]),n?h.jsx("div",{className:"safe-area-container bg-apple-bg flex items-center justify-center",children:h.jsx(P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-8 h-8 border-2 border-apple-text border-t-transparent rounded-full"})}):!t&&!e?h.jsx(Ip,{}):i==="profile"?t?h.jsx(wP,{onBack:()=>o("home")}):h.jsx(Ip,{}):i==="daily"?h.jsx(TP,{onBack:()=>o("home")}):i==="recommendation"?h.jsx(JP,{onBack:()=>o("home")}):i==="multiplayer"?h.jsx(cC,{onBack:()=>o("home")}):h.jsx(Pt,{mode:"wait",children:h.jsxs(P.div,{initial:{opacity:0,filter:"blur(2px)"},animate:{opacity:1,filter:"blur(0px)"},exit:{opacity:0,filter:"blur(2px)"},transition:{duration:.18,ease:"easeOut"},className:"safe-area-container bg-apple-bg flex flex-col relative overflow-hidden i18n-fade",children:[h.jsxs("div",{className:"fixed inset-0 -z-10",children:[h.jsx(P.div,{className:"absolute inset-0 opacity-30",animate:{background:["radial-gradient(circle at 20% 50%, rgba(147, 197, 253, 0.1) 0%, transparent 50%)","radial-gradient(circle at 80% 80%, rgba(196, 181, 253, 0.1) 0%, transparent 50%)","radial-gradient(circle at 40% 20%, rgba(253, 224, 71, 0.08) 0%, transparent 50%)","radial-gradient(circle at 20% 50%, rgba(147, 197, 253, 0.1) 0%, transparent 50%)"]},transition:{duration:20,repeat:1/0,ease:"easeInOut"}}),h.jsx(P.div,{className:"absolute inset-0 opacity-20",animate:{background:["radial-gradient(circle at 60% 30%, rgba(196, 181, 253, 0.1) 0%, transparent 50%)","radial-gradient(circle at 30% 70%, rgba(253, 224, 71, 0.08) 0%, transparent 50%)","radial-gradient(circle at 70% 50%, rgba(147, 197, 253, 0.1) 0%, transparent 50%)","radial-gradient(circle at 60% 30%, rgba(196, 181, 253, 0.1) 0%, transparent 50%)"]},transition:{duration:25,repeat:1/0,ease:"easeInOut"}})]}),h.jsx("header",{className:"sticky top-0 z-20 px-4 sm:px-6 safe-top",children:h.jsxs("div",{className:"frosted-bar max-w-2xl mx-auto px-4 sm:px-5 py-3 sm:py-4 flex items-center gap-3 sm:gap-4",children:[h.jsx(P.div,{initial:{opacity:0,y:-12},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"},className:"flex-1 min-w-0",children:h.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[h.jsxs("span",{className:"title-chip text-sm sm:text-base font-semibold",children:[h.jsx("span",{className:"title-badge text-xs sm:text-sm font-semibold",children:"Eat"}),h.jsx("span",{className:"truncate",children:r("app.name")})]}),h.jsx("span",{className:"text-xs sm:text-sm subdued",children:r("app.tagline")})]})}),h.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[h.jsx(kC,{}),h.jsx(P.button,{onClick:()=>o("multiplayer"),whileHover:{scale:1.05},whileTap:{scale:.96},className:"relative overflow-hidden min-w-[44px] min-h-[44px] px-3 py-1.5 text-sm font-semibold text-purple-600 bg-white rounded-full border border-purple-100 shadow-sm hover:bg-purple-50 touch-manipulation",children:h.jsx("span",{className:"relative z-10",children:r("home.multiplayer")||""})}),h.jsxs(P.button,{onClick:()=>{window.location.hash="#/recommendation",o("recommendation")},whileHover:{scale:1.05},whileTap:{scale:.96},className:"relative overflow-hidden min-w-[44px] min-h-[44px] px-3 py-1.5 text-sm font-semibold text-blue-600 bg-white rounded-full border border-blue-100 shadow-sm hover:bg-blue-50 touch-manipulation",children:[h.jsx(P.span,{className:"absolute inset-0 bg-gradient-to-r from-blue-50 via-white to-blue-100 opacity-80",animate:{opacity:[.7,1,.7]},transition:{duration:2.2,repeat:1/0,ease:"easeInOut"}}),h.jsx("span",{className:"relative z-10",children:r("home.daily")})]}),t?h.jsx(P.button,{onClick:()=>o("profile"),whileHover:{scale:1.02},whileTap:{scale:.96},className:"min-w-[44px] min-h-[44px] px-2 sm:px-3 py-1 text-sm font-semibold text-apple-text/70 hover:text-apple-text/90 touch-manipulation",children:r("home.profile")||""}):h.jsx(P.button,{onClick:()=>o("profile"),whileTap:{scale:.95},className:"min-h-[44px] px-2 sm:px-3 py-1 text-sm font-semibold text-apple-text/70 hover:text-apple-text/90 touch-manipulation",children:r("home.loginUnlock")})]})]})}),h.jsx("main",{className:"flex-1 px-4 sm:px-6 pb-6 sm:pb-8 relative z-10",children:h.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"bg-white rounded-apple p-5 sm:p-6 shadow-sm max-w-2xl mx-auto",children:[h.jsxs("div",{className:"mb-6 sm:mb-8",children:[h.jsx("h2",{className:"text-lg sm:text-xl font-medium text-apple-text mb-3 sm:mb-4",children:r("home.mapService")}),h.jsx(pC,{value:a,onChange:l})]}),h.jsxs("div",{className:"mb-6 sm:mb-8",children:[h.jsx("h2",{className:"text-lg sm:text-xl font-medium text-apple-text mb-3 sm:mb-4",children:r("home.searchLocation")}),h.jsx(hC,{onLocationChange:m,mapService:a})]}),h.jsxs("div",{className:"mb-6 sm:mb-8",children:[h.jsx("h2",{className:"text-lg sm:text-xl font-medium text-apple-text mb-3 sm:mb-4",children:r("home.whatToEat")}),h.jsx(gC,{selectedFoods:u,onSelectionChange:d})]}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-lg sm:text-xl font-medium text-apple-text mb-3 sm:mb-4",children:r("home.searchRange")}),h.jsx(yC,{value:c,onChange:f})]})]})}),h.jsx("footer",{className:"px-4 sm:px-6 pb-6 sm:pb-8 relative z-10",children:h.jsx("div",{className:"max-w-2xl mx-auto",children:h.jsx(SC,{selectedFoods:u,range:c,location:p,mapService:a})})})]},s.resolvedLanguage||s.language)})}function TC(){return h.jsx(HT,{children:h.jsx(EC,{})})}class jC extends pa.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){console.error("ErrorBoundary :",e,n),this.setState({error:e,errorInfo:n})}render(){return this.state.hasError?h.jsx("div",{className:"safe-area-container bg-gray-50 flex items-center justify-center p-4",children:h.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 max-w-md w-full",children:[h.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:ie.t("error.title")}),h.jsx("p",{className:"text-gray-700 mb-4",children:ie.t("error.desc")}),!1,h.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 w-full bg-apple-text text-white py-2 px-4 rounded-lg hover:bg-opacity-90 transition-colors",children:ie.t("error.reload")})]})}):this.props.children}}window.addEventListener("unhandledrejection",t=>{console.error(" Promise :",t.reason)});window.addEventListener("error",t=>{console.error(":",t.error)});Bl.createRoot(document.getElementById("root")).render(h.jsx(pa.StrictMode,{children:h.jsx(jC,{children:h.jsx(TC,{})})}));export{PC as c,Sv as g};
